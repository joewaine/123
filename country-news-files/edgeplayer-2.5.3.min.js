!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=n(1),r=n(2),a=r.methodFactory;r.methodFactory=function(e,t,n){var i=a(e,t,n);return function(){var t=Array.prototype.slice.call(arguments);void 0!==n&&t.unshift("[EdgePlayer] "+e.toUpperCase()+" ["+n+"] "),i.apply(void 0,t)}},r.setLevel(r.getLevel());var o=n(3),s=n(6),l=n(12),d=n(13),u=n(14),c=n(15),h=n(16),f=n(17),p=n(18),g=n(133),m=n(41),v=n(134),y=window.MTVNPlayer=window.MTVNPlayer||{},E=window.EdgePlayer=y;E.Player||(E.version="2.5.3",E.build="Tue Oct 17 2017 15:04:55 GMT-0400 (EDT)",E.defaultGuiVersion="2.6.8",E.defaultPolyfillVersion="1.4.17",E.defaultEndslateVersion="2.0.1",E.defaultAgeGateVersion="1.0.0",E.componentBaseUrl="//media.mtvnservices.com/edge",E.log=r,E.log.setDefaultLevel(E.log.levels.INFO),E.utils=o,E.GlobalCallbacks=h,g(E),E.settings=m,E.Events=s,E.Errors=l,E.PlayState=u,E.AdBreakTypes=c,E.Timeouts=d,E.supports={persistAdTerminated:!0},i.isFunction(Object.freeze)&&(Object.freeze(u),Object.freeze(s),Object.freeze(l)),E.Player=p,E.isReady=!0,i.isFunction(E.onAPIReady)&&E.onAPIReady(E),f.triggerGlobalCallbacks(E.GlobalCallbacks.API_READY,E),(window[E.GlobalCallbacks.API_READY]=[]).push=function(e){e(E)},f.triggerGlobalCallbacks(E.GlobalCallbacks.LEGACY_PJS_API_READY,E),window[E.GlobalCallbacks.LEGACY_PJS_API_READY]=window[E.GlobalCallbacks.API_READY],f.triggerGlobalCallbacks(E.GlobalCallbacks.LEGACY_API_READY,E),window[E.GlobalCallbacks.LEGACY_API_READY]=window[E.GlobalCallbacks.API_READY],v.init(),n(135),E.css=n(136).toString())},function(e,t,n){var i,r;(function(){function n(e){function t(t,n,i,r,a,o){for(;a>=0&&o>a;a+=e){var s=r?r[a]:a;i=n(i,t[s],s,t)}return i}return function(n,i,r,a){i=S(i,a,4);var o=!I(n)&&T.keys(n),s=(o||n).length,l=e>0?0:s-1;return arguments.length<3&&(r=n[o?o[l]:l],l+=e),t(n,i,r,o,l,s)}}function a(e){return function(t,n,i){n=R(n,i);for(var r=L(t),a=e>0?0:r-1;a>=0&&r>a;a+=e)if(n(t[a],a,t))return a;return-1}}function o(e,t,n){return function(i,r,a){var o=0,s=L(i);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+s,o):s=a>=0?Math.min(a+1,s):a+s+1;else if(n&&a&&s)return a=n(i,r),i[a]===r?a:-1;if(r!==r)return a=t(p.call(i,o,s),T.isNaN),a>=0?a+o:-1;for(a=e>0?o:s-1;a>=0&&s>a;a+=e)if(i[a]===r)return a;return-1}}function s(e,t){var n=O.length,i=e.constructor,r=T.isFunction(i)&&i.prototype||c,a="constructor";for(T.has(e,a)&&!T.contains(t,a)&&t.push(a);n--;)a=O[n],a in e&&e[a]!==r[a]&&!T.contains(t,a)&&t.push(a)}var l=this,d=l._,u=Array.prototype,c=Object.prototype,h=Function.prototype,f=u.push,p=u.slice,g=c.toString,m=c.hasOwnProperty,v=Array.isArray,y=Object.keys,E=h.bind,A=Object.create,b=function(){},T=function(e){return e instanceof T?e:this instanceof T?void(this._wrapped=e):new T(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=T),t._=T,T.VERSION="1.8.3";var S=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,a){return e.call(t,n,i,r,a)}}return function(){return e.apply(t,arguments)}},R=function(e,t,n){return null==e?T.identity:T.isFunction(e)?S(e,t,n):T.isObject(e)?T.matcher(e):T.property(e)};T.iteratee=function(e,t){return R(e,t,1/0)};var k=function(e,t){return function(n){var i=arguments.length;if(2>i||null==n)return n;for(var r=1;i>r;r++)for(var a=arguments[r],o=e(a),s=o.length,l=0;s>l;l++){var d=o[l];t&&void 0!==n[d]||(n[d]=a[d])}return n}},w=function(e){if(!T.isObject(e))return{};if(A)return A(e);b.prototype=e;var t=new b;return b.prototype=null,t},M=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,L=M("length"),I=function(e){var t=L(e);return"number"==typeof t&&t>=0&&C>=t};T.each=T.forEach=function(e,t,n){t=S(t,n);var i,r;if(I(e))for(i=0,r=e.length;r>i;i++)t(e[i],i,e);else{var a=T.keys(e);for(i=0,r=a.length;r>i;i++)t(e[a[i]],a[i],e)}return e},T.map=T.collect=function(e,t,n){t=R(t,n);for(var i=!I(e)&&T.keys(e),r=(i||e).length,a=Array(r),o=0;r>o;o++){var s=i?i[o]:o;a[o]=t(e[s],s,e)}return a},T.reduce=T.foldl=T.inject=n(1),T.reduceRight=T.foldr=n(-1),T.find=T.detect=function(e,t,n){var i;return i=I(e)?T.findIndex(e,t,n):T.findKey(e,t,n),void 0!==i&&-1!==i?e[i]:void 0},T.filter=T.select=function(e,t,n){var i=[];return t=R(t,n),T.each(e,function(e,n,r){t(e,n,r)&&i.push(e)}),i},T.reject=function(e,t,n){return T.filter(e,T.negate(R(t)),n)},T.every=T.all=function(e,t,n){t=R(t,n);for(var i=!I(e)&&T.keys(e),r=(i||e).length,a=0;r>a;a++){var o=i?i[a]:a;if(!t(e[o],o,e))return!1}return!0},T.some=T.any=function(e,t,n){t=R(t,n);for(var i=!I(e)&&T.keys(e),r=(i||e).length,a=0;r>a;a++){var o=i?i[a]:a;if(t(e[o],o,e))return!0}return!1},T.contains=T.includes=T.include=function(e,t,n,i){return I(e)||(e=T.values(e)),("number"!=typeof n||i)&&(n=0),T.indexOf(e,t,n)>=0},T.invoke=function(e,t){var n=p.call(arguments,2),i=T.isFunction(t);return T.map(e,function(e){var r=i?t:e[t];return null==r?r:r.apply(e,n)})},T.pluck=function(e,t){return T.map(e,T.property(t))},T.where=function(e,t){return T.filter(e,T.matcher(t))},T.findWhere=function(e,t){return T.find(e,T.matcher(t))},T.max=function(e,t,n){var i,r,a=-(1/0),o=-(1/0);if(null==t&&null!=e){e=I(e)?e:T.values(e);for(var s=0,l=e.length;l>s;s++)i=e[s],i>a&&(a=i)}else t=R(t,n),T.each(e,function(e,n,i){r=t(e,n,i),(r>o||r===-(1/0)&&a===-(1/0))&&(a=e,o=r)});return a},T.min=function(e,t,n){var i,r,a=1/0,o=1/0;if(null==t&&null!=e){e=I(e)?e:T.values(e);for(var s=0,l=e.length;l>s;s++)i=e[s],a>i&&(a=i)}else t=R(t,n),T.each(e,function(e,n,i){r=t(e,n,i),(o>r||r===1/0&&a===1/0)&&(a=e,o=r)});return a},T.shuffle=function(e){for(var t,n=I(e)?e:T.values(e),i=n.length,r=Array(i),a=0;i>a;a++)t=T.random(0,a),t!==a&&(r[a]=r[t]),r[t]=n[a];return r},T.sample=function(e,t,n){return null==t||n?(I(e)||(e=T.values(e)),e[T.random(e.length-1)]):T.shuffle(e).slice(0,Math.max(0,t))},T.sortBy=function(e,t,n){return t=R(t,n),T.pluck(T.map(e,function(e,n,i){return{value:e,index:n,criteria:t(e,n,i)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var _=function(e){return function(t,n,i){var r={};return n=R(n,i),T.each(t,function(i,a){var o=n(i,a,t);e(r,i,o)}),r}};T.groupBy=_(function(e,t,n){T.has(e,n)?e[n].push(t):e[n]=[t]}),T.indexBy=_(function(e,t,n){e[n]=t}),T.countBy=_(function(e,t,n){T.has(e,n)?e[n]++:e[n]=1}),T.toArray=function(e){return e?T.isArray(e)?p.call(e):I(e)?T.map(e,T.identity):T.values(e):[]},T.size=function(e){return null==e?0:I(e)?e.length:T.keys(e).length},T.partition=function(e,t,n){t=R(t,n);var i=[],r=[];return T.each(e,function(e,n,a){(t(e,n,a)?i:r).push(e)}),[i,r]},T.first=T.head=T.take=function(e,t,n){return null!=e?null==t||n?e[0]:T.initial(e,e.length-t):void 0},T.initial=function(e,t,n){return p.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},T.last=function(e,t,n){return null!=e?null==t||n?e[e.length-1]:T.rest(e,Math.max(0,e.length-t)):void 0},T.rest=T.tail=T.drop=function(e,t,n){return p.call(e,null==t||n?1:t)},T.compact=function(e){return T.filter(e,T.identity)};var P=function(e,t,n,i){for(var r=[],a=0,o=i||0,s=L(e);s>o;o++){var l=e[o];if(I(l)&&(T.isArray(l)||T.isArguments(l))){t||(l=P(l,t,n));var d=0,u=l.length;for(r.length+=u;u>d;)r[a++]=l[d++]}else n||(r[a++]=l)}return r};T.flatten=function(e,t){return P(e,t,!1)},T.without=function(e){return T.difference(e,p.call(arguments,1))},T.uniq=T.unique=function(e,t,n,i){T.isBoolean(t)||(i=n,n=t,t=!1),null!=n&&(n=R(n,i));for(var r=[],a=[],o=0,s=L(e);s>o;o++){var l=e[o],d=n?n(l,o,e):l;t?(o&&a===d||r.push(l),a=d):n?T.contains(a,d)||(a.push(d),r.push(l)):T.contains(r,l)||r.push(l)}return r},T.union=function(){return T.uniq(P(arguments,!0,!0))},T.intersection=function(e){for(var t=[],n=arguments.length,i=0,r=L(e);r>i;i++){var a=e[i];if(!T.contains(t,a)){for(var o=1;n>o&&T.contains(arguments[o],a);o++);o===n&&t.push(a)}}return t},T.difference=function(e){var t=P(arguments,!0,!0,1);return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){return T.unzip(arguments)},T.unzip=function(e){for(var t=e&&T.max(e,L).length||0,n=Array(t),i=0;t>i;i++)n[i]=T.pluck(e,i);return n},T.object=function(e,t){for(var n={},i=0,r=L(e);r>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},T.findIndex=a(1),T.findLastIndex=a(-1),T.sortedIndex=function(e,t,n,i){n=R(n,i,1);for(var r=n(t),a=0,o=L(e);o>a;){var s=Math.floor((a+o)/2);n(e[s])<r?a=s+1:o=s}return a},T.indexOf=o(1,T.findIndex,T.sortedIndex),T.lastIndexOf=o(-1,T.findLastIndex),T.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),a=0;i>a;a++,e+=n)r[a]=e;return r};var D=function(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var a=w(e.prototype),o=e.apply(a,r);return T.isObject(o)?o:a};T.bind=function(e,t){if(E&&e.bind===E)return E.apply(e,p.call(arguments,1));if(!T.isFunction(e))throw new TypeError("Bind must be called on a function");var n=p.call(arguments,2),i=function(){return D(e,i,t,this,n.concat(p.call(arguments)))};return i},T.partial=function(e){var t=p.call(arguments,1),n=function(){for(var i=0,r=t.length,a=Array(r),o=0;r>o;o++)a[o]=t[o]===T?arguments[i++]:t[o];for(;i<arguments.length;)a.push(arguments[i++]);return D(e,n,this,this,a)};return n},T.bindAll=function(e){var t,n,i=arguments.length;if(1>=i)throw new Error("bindAll must be passed function names");for(t=1;i>t;t++)n=arguments[t],e[n]=T.bind(e[n],e);return e},T.memoize=function(e,t){var n=function(i){var r=n.cache,a=""+(t?t.apply(this,arguments):i);return T.has(r,a)||(r[a]=e.apply(this,arguments)),r[a]};return n.cache={},n},T.delay=function(e,t){var n=p.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=T.partial(T.delay,T,1),T.throttle=function(e,t,n){var i,r,a,o=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:T.now(),o=null,a=e.apply(i,r),o||(i=r=null)};return function(){var d=T.now();s||n.leading!==!1||(s=d);var u=t-(d-s);return i=this,r=arguments,0>=u||u>t?(o&&(clearTimeout(o),o=null),s=d,a=e.apply(i,r),o||(i=r=null)):o||n.trailing===!1||(o=setTimeout(l,u)),a}},T.debounce=function(e,t,n){var i,r,a,o,s,l=function(){var d=T.now()-o;t>d&&d>=0?i=setTimeout(l,t-d):(i=null,n||(s=e.apply(a,r),i||(a=r=null)))};return function(){a=this,r=arguments,o=T.now();var d=n&&!i;return i||(i=setTimeout(l,t)),d&&(s=e.apply(a,r),a=r=null),s}},T.wrap=function(e,t){return T.partial(t,e)},T.negate=function(e){return function(){return!e.apply(this,arguments)}},T.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}},T.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},T.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),1>=e&&(t=null),n}},T.once=T.partial(T.before,2);var x=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];T.keys=function(e){if(!T.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)T.has(e,n)&&t.push(n);return x&&s(e,t),t},T.allKeys=function(e){if(!T.isObject(e))return[];var t=[];for(var n in e)t.push(n);return x&&s(e,t),t},T.values=function(e){for(var t=T.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=e[t[r]];return i},T.mapObject=function(e,t,n){t=R(t,n);for(var i,r=T.keys(e),a=r.length,o={},s=0;a>s;s++)i=r[s],o[i]=t(e[i],i,e);return o},T.pairs=function(e){for(var t=T.keys(e),n=t.length,i=Array(n),r=0;n>r;r++)i[r]=[t[r],e[t[r]]];return i},T.invert=function(e){for(var t={},n=T.keys(e),i=0,r=n.length;r>i;i++)t[e[n[i]]]=n[i];return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=k(T.allKeys),T.extendOwn=T.assign=k(T.keys),T.findKey=function(e,t,n){t=R(t,n);for(var i,r=T.keys(e),a=0,o=r.length;o>a;a++)if(i=r[a],t(e[i],i,e))return i},T.pick=function(e,t,n){var i,r,a={},o=e;if(null==o)return a;T.isFunction(t)?(r=T.allKeys(o),i=S(t,n)):(r=P(arguments,!1,!1,1),i=function(e,t,n){return t in n},o=Object(o));for(var s=0,l=r.length;l>s;s++){var d=r[s],u=o[d];i(u,d,o)&&(a[d]=u)}return a},T.omit=function(e,t,n){if(T.isFunction(t))t=T.negate(t);else{var i=T.map(P(arguments,!1,!1,1),String);t=function(e,t){return!T.contains(i,t)}}return T.pick(e,t,n)},T.defaults=k(T.allKeys,!0),T.create=function(e,t){var n=w(e);return t&&T.extendOwn(n,t),n},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e},T.isMatch=function(e,t){var n=T.keys(t),i=n.length;if(null==e)return!i;for(var r=Object(e),a=0;i>a;a++){var o=n[a];if(t[o]!==r[o]||!(o in r))return!1}return!0};var N=function(e,t,n,i){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var r=g.call(e);if(r!==g.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var a="[object Array]"===r;if(!a){if("object"!=typeof e||"object"!=typeof t)return!1;var o=e.constructor,s=t.constructor;if(o!==s&&!(T.isFunction(o)&&o instanceof o&&T.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var l=n.length;l--;)if(n[l]===e)return i[l]===t;if(n.push(e),i.push(t),a){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!N(e[l],t[l],n,i))return!1}else{var d,u=T.keys(e);if(l=u.length,T.keys(t).length!==l)return!1;for(;l--;)if(d=u[l],!T.has(t,d)||!N(e[d],t[d],n,i))return!1}return n.pop(),i.pop(),!0};T.isEqual=function(e,t){return N(e,t)},T.isEmpty=function(e){return null==e?!0:I(e)&&(T.isArray(e)||T.isString(e)||T.isArguments(e))?0===e.length:0===T.keys(e).length},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.isArray=v||function(e){return"[object Array]"===g.call(e)},T.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},T.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){T["is"+e]=function(t){return g.call(t)==="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return T.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(T.isFunction=function(e){return"function"==typeof e||!1}),T.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},T.isNaN=function(e){return T.isNumber(e)&&e!==+e},T.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===g.call(e)},T.isNull=function(e){return null===e},T.isUndefined=function(e){return void 0===e},T.has=function(e,t){return null!=e&&m.call(e,t)},T.noConflict=function(){return l._=d,this},T.identity=function(e){return e},T.constant=function(e){return function(){return e}},T.noop=function(){},T.property=M,T.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},T.matcher=T.matches=function(e){return e=T.extendOwn({},e),function(t){return T.isMatch(t,e)}},T.times=function(e,t,n){var i=Array(Math.max(0,e));t=S(t,n,1);for(var r=0;e>r;r++)i[r]=t(r);return i},T.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},T.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=T.invert(B),U=function(e){var t=function(t){return e[t]},n="(?:"+T.keys(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}};T.escape=U(B),T.unescape=U(F),T.result=function(e,t,n){var i=null==e?void 0:e[t];return void 0===i&&(i=n),T.isFunction(i)?i.call(e):i};var G=0;T.uniqueId=function(e){var t=++G+"";return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,Y=function(e){return"\\"+H[e]};T.template=function(e,t,n){!t&&n&&(t=n),t=T.defaults({},t,T.templateSettings);var i=RegExp([(t.escape||j).source,(t.interpolate||j).source,(t.evaluate||j).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,function(t,n,i,o,s){return a+=e.slice(r,s).replace(V,Y),r=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),t}),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return o.call(this,e,T)},l=t.variable||"obj";return s.source="function("+l+"){\n"+a+"}",s},T.chain=function(e){var t=T(e);return t._chain=!0,t};var z=function(e,t){return e._chain?T(t).chain():t};T.mixin=function(e){T.each(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),z(this,n.apply(T,e))}})},T.mixin(T),T.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],z(this,n)}}),T.each(["concat","join","slice"],function(e){var t=u[e];T.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),T.prototype.value=function(){return this._wrapped},T.prototype.valueOf=T.prototype.toJSON=T.prototype.value,T.prototype.toString=function(){return""+this._wrapped},i=[],r=function(){return T}.apply(t,i),!(void 0!==r&&(e.exports=r))}).call(this)},function(e,t,n){var i,r;!function(a,o){"use strict";i=o,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){"use strict";function e(e){return typeof console===s?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):o}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(i.call(this,t,n),this[e].apply(this,arguments))}}function i(e,t){for(var n=0;n<l.length;n++){var i=l[n];this[i]=e>n?o:this.methodFactory(i,e,t)}}function r(t,i,r){return e(t)||n.apply(this,arguments)}function a(e,t,n){function a(e){var t=(l[e]||"silent").toUpperCase();try{return void(window.localStorage[c]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"="+t+";"}catch(e){}}function o(){var e;try{e=window.localStorage[c]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(c)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}var d,u=this,c="loglevel";e&&(c+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||r,u.getLevel=function(){return d},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;return d=t,n!==!1&&a(t),i.call(u,t,e),typeof console===s&&t<u.levels.SILENT?"No console available for logging":void 0},u.setDefaultLevel=function(e){o()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var h=o();null==h&&(h=null==t?"WARN":t),u.setLevel(h,!1)}var o=function(){},s="undefined",l=["trace","debug","info","warn","error"],d=new a,u={};d.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new a(e,d.getLevel(),d.methodFactory)),t};var c=typeof window!==s?window.log:void 0;return d.noConflict=function(){return typeof window!==s&&window.log===d&&(window.log=c),d},d})},function(e,t,n){var i,r=n(2).getLogger("utils"),a=n(4).window,o=a.document,s=n(1),l=n(5),d=a.Date,u=a.Number,c=a.Math,h=a.isFinite,f=a.performance,p={};i=f&&f.timing&&f.timing.navigationStart?f.timing.navigationStart:d.now(),e.exports={getTiming:function(){return a.performance&&"function"==typeof a.performance.now?c.round(a.performance.now()):d.now()-i},validateTiming:function(e){return!isNaN(e)&&c.round(e)<=this.getTiming()},isInteger:function(e){return u.isInteger?u.isInteger(e):this.isNumber(e)&&c.floor(e)===e},isNumber:function(e){return"number"==typeof e&&h(e)},parseIntOrNull:function(e){var t=parseInt(e,10);return isNaN(t)?null:t},deepObjectProcessing:function(e,t,n){for(var i in e)s.isObject(e[i])&&!s.isFunction(e[i])?n&&this.deepObjectProcessing(e[i],t,n):t(e,i);return e},preserveDefinedValues:function(e,t){return this.deepObjectProcessing(e,function(e,t){(null===e[t]||void 0===e[t])&&delete e[t]},t)},preserveNullableValues:function(e,t){return this.deepObjectProcessing(e,function(e,t){void 0===e[t]&&(e[t]=null)},t)},animate:function(e,t,n,i){function r(u){var h=n?c.min(1,(u-l)/n):1;s.each(o,function(n,i){var r=t[i];e[i]=n+d(h)*(r-n)}),1!==h?a.requestAnimationFrame(r):"function"==typeof i&&i()}if(void 0!==e){"function"==typeof n&&(i=n,n=null);var o=s.pick(e,s.keys(t)),l=this.getTiming(),d=function(e){return e*(2-e)};a.requestAnimationFrame(r)}},getExternalModule:function(e,t){var n=p[e];return s.isUndefined(n)?(p[e]=n=[t],l.ajax({url:e,dataType:"text",cache:!0,success:function(t){var i;try{i=Function("var module = {}; "+t+"\n return module.exports;")()}catch(e){return void r.error("External module execution error",e.stack,e,t)}r.debug("external module loaded",e),p[e]=i,n.forEach(function(e){e(i)})},error:function(t,n,i){r.error("external module loading error",e,t,n,i)}}),void r.debug("external module requested",e)):s.isArray(n)?(r.debug("external module is already loading",e),void n.push(t)):(r.debug("external module loaded from cache",e),void t(n))},generateId:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*c.random()|0,n="x"===e?t:3&t|8;return n.toString(16)});return e},appendStyle:function(){var e=o.createElement("style");return e.appendChild(o.createTextNode("")),o.head.appendChild(e),e.sheet},insertCss:function(e,t,n){try{return"insertRule"in e?e.insertRule(t+"{"+n+"}",0):"addRule"in e&&e.addRule(t,n),!0}catch(e){return r.warn("CSS rule insertion failed",e),!1}}}},function(e,t){e.exports={window:window}},function(e,t){var n=function(){function e(e){return null==e?String(e):K[W.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function a(e){return r(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function o(e){return"number"==typeof e.length}function s(e){return L.call(e,function(e){return null!=e})}function l(e){return e.length>0?S.fn.concat.apply([],e):e}function d(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function u(e){return e in P?P[e]:P[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function c(e,t){return"number"!=typeof t||D[d(e)]?t:t+"px"}function h(e){var t,n;return _[e]||(t=I.createElement(e),I.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),_[e]=n),_[e]}function f(e){return"children"in e?C.call(e.children):S.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function p(e,t,n){for(T in t)n&&(a(t[T])||J(t[T]))?(a(t[T])&&!a(e[T])&&(e[T]={}),J(t[T])&&!J(e[T])&&(e[T]=[]),p(e[T],t[T],n)):t[T]!==b&&(e[T]=t[T])}function g(e,t){return null==t?S(e):S(e).filter(t)}function m(e,n,i,r){return t(n)?n.call(e,i,r):n}function v(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function y(e,t){var n=e.className||"",i=n&&n.baseVal!==b;return t===b?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function E(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?S.parseJSON(e):e:t):e}catch(t){return e}}function A(e,t){t(e);for(var n=0,i=e.childNodes.length;i>n;n++)A(e.childNodes[n],t)}var b,T,S,R,k,w,M=[],C=M.slice,L=M.filter,I=window.document,_={},P={},D={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},x=/^\s*<(\w+|!)[^>]*>/,O=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,F=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],G=["after","prepend","before","append"],j=I.createElement("table"),H=I.createElement("tr"),V={tr:I.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:H,th:H,"*":I.createElement("div")},Y=/complete|loaded|interactive/,z=/^[\w-]*$/,K={},W=K.toString,q={},X=I.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(e){return e instanceof Array};return q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=X).appendChild(e),i=~q.qsa(r,t).indexOf(e),a&&X.removeChild(e),i},k=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},w=function(e){return L.call(e,function(t,n){return e.indexOf(t)==n})},q.fragment=function(e,t,n){var i,r,o;return O.test(e)&&(i=S(I.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(N,"<$1></$2>")),t===b&&(t=x.test(e)&&RegExp.$1),t in V||(t="*"),o=V[t],o.innerHTML=""+e,i=S.each(C.call(o.childNodes),function(){o.removeChild(this)})),a(n)&&(r=S(i),S.each(n,function(e,t){U.indexOf(e)>-1?r[e](t):r.attr(e,t)})),i},q.Z=function(e,t){return e=e||[],e.__proto__=S.fn,e.selector=t||"",e},q.isZ=function(e){return e instanceof q.Z},q.init=function(e,n){var i;if(!e)return q.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&x.test(e))i=q.fragment(e,RegExp.$1,n),e=null;else{if(n!==b)return S(n).find(e);i=q.qsa(I,e)}else{if(t(e))return S(I).ready(e);if(q.isZ(e))return e;if(J(e))i=s(e);else if(r(e))i=[e],e=null;else if(x.test(e))i=q.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==b)return S(n).find(e);i=q.qsa(I,e)}}return q.Z(i,e)},S=function(e,t){return q.init(e,t)},S.extend=function(e){var t,n=C.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){p(e,n,t)}),e},q.qsa=function(e,t){var n,r="#"==t[0],a=!r&&"."==t[0],o=r||a?t.slice(1):t,s=z.test(o);return i(e)&&s&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:C.call(s&&!r?a?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},S.contains=I.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},S.type=e,S.isFunction=t,S.isWindow=n,S.isArray=J,S.isPlainObject=a,S.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},S.inArray=function(e,t,n){return M.indexOf.call(t,e,n)},S.camelCase=k,S.trim=function(e){return null==e?"":String.prototype.trim.call(e)},S.uuid=0,S.support={},S.expr={},S.map=function(e,t){var n,i,r,a=[];if(o(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&a.push(n);else for(r in e)n=t(e[r],r),null!=n&&a.push(n);return l(a)},S.each=function(e,t){var n,i;if(o(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},S.grep=function(e,t){return L.call(e,t)},window.JSON&&(S.parseJSON=JSON.parse),S.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),S.fn={forEach:M.forEach,reduce:M.reduce,push:M.push,sort:M.sort,indexOf:M.indexOf,concat:M.concat,map:function(e){return S(S.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return S(C.apply(this,arguments))},ready:function(e){return Y.test(I.readyState)&&I.body?e(S):I.addEventListener("DOMContentLoaded",function(){e(S)},!1),this},get:function(e){return e===b?C.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return M.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):S(L.call(this,function(t){return q.matches(t,e)}))},add:function(e,t){return S(w(this.concat(S(e,t))))},is:function(e){return this.length>0&&q.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==b)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):o(e)&&t(e.item)?C.call(e):S(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return S(n)},has:function(e){return this.filter(function(){return r(e)?S.contains(this,e):S(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:S(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:S(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?S(e).filter(function(){var e=this;return M.some.call(n,function(t){return S.contains(t,e)})}):1==this.length?S(q.qsa(this[0],e)):this.map(function(){return q.qsa(this,e)}):[]},closest:function(e,t){var n=this[0],r=!1;for("object"==typeof e&&(r=S(e));n&&!(r?r.indexOf(n)>=0:q.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return S(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=S.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return g(t,e)},parent:function(e){return g(w(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return C.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return L.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return S.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=h(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=S(e).get(0),r=i.parentNode||this.length>1;return this.each(function(t){S(this).wrapAll(n?e.call(this,t):r?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){S(this[0]).before(e=S(e));for(var t;(t=e.children()).length;)e=t.first();S(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=S(this),r=i.contents(),a=n?e.call(this,t):e;r.length?r.wrapAll(a):i.append(a)})},unwrap:function(){return this.parent().each(function(){S(this).replaceWith(S(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=S(this);(e===b?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return S(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return S(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;S(this).empty().append(m(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=m(this,e,t,this.textContent);
this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(r(e))for(T in e)v(this,T,e[T]);else v(this,e,m(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:b},removeAttr:function(e){return this.each(function(){1===this.nodeType&&v(this,e)})},prop:function(e,t){return e=Q[e]||e,1 in arguments?this.each(function(n){this[e]=m(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(F,"-$1").toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?E(i):b},val:function(e){return 0 in arguments?this.each(function(t){this.value=m(this,e,t,this.value)}):this[0]&&(this[0].multiple?S(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=S(this),i=m(this,e,t,n.offset()),r=n.offsetParent().offset(),a={top:i.top-r.top,left:i.left-r.left};"static"==n.css("position")&&(a.position="relative"),n.css(a)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var i=this[0],r=getComputedStyle(i,"");if(!i)return;if("string"==typeof t)return i.style[k(t)]||r.getPropertyValue(t);if(J(t)){var a={};return S.each(t,function(e,t){a[t]=i.style[k(t)]||r.getPropertyValue(t)}),a}}var o="";if("string"==e(t))n||0===n?o=d(t)+":"+c(t,n):this.each(function(){this.style.removeProperty(d(t))});else for(T in t)t[T]||0===t[T]?o+=d(T)+":"+c(T,t[T])+";":this.each(function(){this.style.removeProperty(d(T))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(S(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?M.some.call(this,function(e){return this.test(y(e))},u(e)):!1},addClass:function(e){return e?this.each(function(t){if("className"in this){R=[];var n=y(this),i=m(this,e,t,n);i.split(/\s+/g).forEach(function(e){S(this).hasClass(e)||R.push(e)},this),R.length&&y(this,n+(n?" ":"")+R.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===b)return y(this,"");R=y(this),m(this,e,t,R).split(/\s+/g).forEach(function(e){R=R.replace(u(e)," ")}),y(this,R.trim())}})},toggleClass:function(e,t){return e?this.each(function(n){var i=S(this),r=m(this,e,n,y(this));r.split(/\s+/g).forEach(function(e){(t===b?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===b?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===b?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=B.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(S(e).css("margin-top"))||0,n.left-=parseFloat(S(e).css("margin-left"))||0,i.top+=parseFloat(S(t[0]).css("border-top-width"))||0,i.left+=parseFloat(S(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||I.body;e&&!B.test(e.nodeName)&&"static"==S(e).css("position");)e=e.offsetParent;return e})}},S.fn.detach=S.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});S.fn[e]=function(r){var a,o=this[0];return r===b?n(o)?o["inner"+t]:i(o)?o.documentElement["scroll"+t]:(a=this.offset())&&a[e]:this.each(function(t){o=S(this),o.css(e,m(this,r,t,o[e]()))})}}),G.forEach(function(t,n){var i=n%2;S.fn[t]=function(){var t,r,a=S.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:q.fragment(n)}),o=this.length>1;return a.length<1?this:this.each(function(e,t){r=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=S.contains(I.documentElement,r);a.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!r)return S(e).remove();r.insertBefore(e,t),s&&A(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},S.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return S(e)[t](this),this}}),q.Z.prototype=S.fn,q.uniq=w,q.deserializeValue=E,S.zepto=q,S}();!function(e){function t(e){return e._zid||(e._zid=h++)}function n(e,n,a,o){if(n=i(n),n.ns)var s=r(n.ns);return(m[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!a||t(e.fn)===t(a))&&(!o||e.sel==o)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function r(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function a(e,t){return e.del&&!y&&e.e in E||!!t}function o(e){return A[e]||y&&E[e]||e}function s(n,r,s,l,u,h,f){var p=t(n),g=m[p]||(m[p]=[]);r.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var r=i(t);r.fn=s,r.sel=u,r.e in A&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var p=h||s;r.proxy=function(e){if(e=d(e),!e.isImmediatePropagationStopped()){e.data=l;var t=p.apply(n,e._args==c?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},r.i=g.length,g.push(r),"addEventListener"in n&&n.addEventListener(o(r.e),r.proxy,a(r,f))})}function l(e,i,r,s,l){var d=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,r,s).forEach(function(t){delete m[d][t.i],"removeEventListener"in e&&e.removeEventListener(o(t.e),t.proxy,a(t,l))})})}function d(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(R,function(e,i){var r=n[e];t[e]=function(){return this[i]=b,r&&r.apply(n,arguments)},t[i]=T}),(n.defaultPrevented!==c?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=b)),t}function u(e){var t,n={originalEvent:e};for(t in e)S.test(t)||e[t]===c||(n[t]=e[t]);return d(n,e)}var c,h=1,f=Array.prototype.slice,p=e.isFunction,g=function(e){return"string"==typeof e},m={},v={},y="onfocusin"in window,E={focus:"focusin",blur:"focusout"},A={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:s,remove:l},e.proxy=function(n,i){var r=2 in arguments&&f.call(arguments,2);if(p(n)){var a=function(){return n.apply(i,r?r.concat(f.call(arguments)):arguments)};return a._zid=t(n),a}if(g(i))return r?(r.unshift(n[i],n),e.proxy.apply(null,r)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var b=function(){return!0},T=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$)/,R={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,r,a){var o,d,h=this;return t&&!g(t)?(e.each(t,function(e,t){h.on(e,n,i,t,a)}),h):(g(n)||p(r)||r===!1||(r=i,i=n,n=c),(p(i)||i===!1)&&(r=i,i=c),r===!1&&(r=T),h.each(function(c,h){a&&(o=function(e){return l(h,e.type,r),r.apply(this,arguments)}),n&&(d=function(t){var i,a=e(t.target).closest(n,h).get(0);return a&&a!==h?(i=e.extend(u(t),{currentTarget:a,liveFired:h}),(o||r).apply(a,[i].concat(f.call(arguments,1)))):void 0}),s(h,t,r,i,n,d||o)}))},e.fn.off=function(t,n,i){var r=this;return t&&!g(t)?(e.each(t,function(e,t){r.off(e,n,t)}),r):(g(n)||p(i)||i===!1||(i=n,n=c),i===!1&&(i=T),r.each(function(){l(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=g(t)||e.isPlainObject(t)?e.Event(t):d(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var r,a;return this.each(function(o,s){r=u(g(t)?e.Event(t):t),r._args=i,r.target=s,e.each(n(s,t.type||t),function(e,t){return a=t.proxy(r),r.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){g(e)||(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),d(n)}}(n),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(e){return null}}}}(n),function(e){function t(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}function n(e,n,i,r){return e.global?t(n||y,i,r):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function r(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function a(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function o(e,t,i,r){var a=i.context,o="success";i.success.call(a,e,o,t),r&&r.resolveWith(a,[e,o,t]),n(i,a,"ajaxSuccess",[t,i,e]),l(o,t,i)}function s(e,t,i,r,a){var o=r.context;r.error.call(o,i,t,e),a&&a.rejectWith(o,[i,t,e]),n(r,o,"ajaxError",[i,r,e||t]),l(t,i,r)}function l(e,t,i){var a=i.context;i.complete.call(a,t,e),n(i,a,"ajaxComplete",[t,i]),r(i)}function d(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==S?"html":e==T?"json":A.test(e)?"script":b.test(e)&&"xml")||"text"}function c(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=c(t.url,t.data),t.data=void 0)}function f(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}function p(t,n,i,r){var a,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(s||"object"==a||"array"==a?n:"")+"]"),!r&&o?t.add(l.name,l.value):"array"==a||!i&&"object"==a?p(t,l,i,n):t.add(n,l)})}var g,m,v=0,y=window.document,E=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,A=/^(?:text|application)\/javascript/i,b=/^(?:text|application)\/xml/i,T="application/json",S="text/html",R=/^\s*$/;e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var i,r,l=t.jsonpCallback,d=(e.isFunction(l)?l():l)||"jsonp"+ ++v,u=y.createElement("script"),c=window[d],h=function(t){e(u).triggerHandler("error",t||"abort")},f={abort:h};return n&&n.promise(f),e(u).on("load error",function(a,l){clearTimeout(r),e(u).off().remove(),"error"!=a.type&&i?o(i[0],f,t,n):s(null,l||"error",f,t,n),window[d]=c,i&&e.isFunction(c)&&c(i[0]),c=i=void 0}),a(f,t)===!1?(h("abort"),f):(window[d]=function(){i=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+d),y.head.appendChild(u),t.timeout>0&&(r=setTimeout(function(){h("timeout")},t.timeout)),f)},e.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n=e.extend({},t||{}),r=e.Deferred&&e.Deferred();for(g in e.ajaxSettings)void 0===n[g]&&(n[g]=e.ajaxSettings[g]);i(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),h(n);var l=n.dataType,f=/\?.+=\?/.test(n.url);if(f&&(l="jsonp"),n.cache!==!1&&(t&&t.cache===!0||"script"!=l&&"jsonp"!=l)||(n.url=c(n.url,"_="+Date.now())),"jsonp"==l)return f||(n.url=c(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),e.ajaxJSONP(n,r);var p,v=n.accepts[l],y={},E=function(e,t){y[e.toLowerCase()]=[e,t]},A=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,b=n.xhr(),T=b.setRequestHeader;if(r&&r.promise(b),n.crossDomain||E("X-Requested-With","XMLHttpRequest"),E("Accept",v||"*/*"),(v=n.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),b.overrideMimeType&&b.overrideMimeType(v)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&E("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(m in n.headers)E(m,n.headers[m]);if(b.setRequestHeader=E,b.onreadystatechange=function(){if(4==b.readyState){b.onreadystatechange=d,clearTimeout(p);var t,i=!1;if(b.status>=200&&b.status<300||304==b.status||0==b.status&&"file:"==A){l=l||u(n.mimeType||b.getResponseHeader("content-type")),t=b.responseText;try{"script"==l?(1,eval)(t):"xml"==l?t=b.responseXML:"json"==l&&(t=R.test(t)?null:e.parseJSON(t))}catch(e){i=e}i?s(i,"parsererror",b,n,r):o(t,b,n,r)}else s(b.statusText||null,b.status?"error":"abort",b,n,r)}},a(b,n)===!1)return b.abort(),s(null,"abort",b,n,r),b;if(n.xhrFields)for(m in n.xhrFields)b[m]=n.xhrFields[m];var S="async"in n?n.async:!0;b.open(n.type,n.url,S,n.username,n.password);for(m in y)T.apply(b,y[m]);return n.timeout>0&&(p=setTimeout(function(){b.onreadystatechange=d,b.abort(),s(null,"timeout",b,n,r)},n.timeout)),b.send(n.data?n.data:null),b},e.get=function(){return e.ajax(f.apply(null,arguments))},e.post=function(){var t=f.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=f.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,a=this,o=t.split(/\s/),s=f(t,n,i),l=s.success;return o.length>1&&(s.url=o[0],r=o[1]),s.success=function(t){a.html(r?e("<div>").html(t.replace(E,"")).find(r):t),l&&l.apply(a,arguments)},e.ajax(s),this};var k=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(k(e)+"="+k(t))},p(n,e,t),n.join("&").replace(/%20/g,"+")}}(n),function(e){function t(e){var t=this.os={},n=this.browser={},i=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),r=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=!!e.match(/\(Macintosh\; Intel /),o=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),l=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),d=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=e.match(/Windows Phone ([\d.]+)/),c=d&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),m=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),y=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),E=e.match(/Firefox\/([\d.]+)/),A=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),b=!y&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),T=b||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(n.webkit=!!i)&&(n.version=i[1]),r&&(t.android=!0,t.version=r[2]),l&&!s&&(t.ios=t.iphone=!0,t.version=l[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipod=!0,t.version=s[3]?s[3].replace(/_/g,"."):null),u&&(t.wp=!0,t.version=u[1]),d&&(t.webos=!0,t.version=d[2]),c&&(t.touchpad=!0),p&&(t.blackberry=!0,t.version=p[2]),g&&(t.bb10=!0,t.version=g[2]),m&&(t.rimtabletos=!0,t.version=m[2]),v&&(n.playbook=!0),h&&(t.kindle=!0,t.version=h[1]),f&&(n.silk=!0,n.version=f[1]),!f&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),y&&(n.chrome=!0,n.version=y[1]),E&&(n.firefox=!0,n.version=E[1]),A&&(n.ie=!0,n.version=A[1]),T&&(a||t.ios)&&(n.safari=!0,a&&(n.version=T[1])),b&&(n.webview=!0),t.tablet=!!(o||v||r&&!e.match(/Mobile/)||E&&e.match(/Tablet/)),t.phone=!(t.tablet||t.ipod||!(r||l||d||p||g||y&&e.match(/Android/)||y&&e.match(/CriOS\/([\d.]+)/)||E&&e.match(/Mobile/)))}t.call(e,navigator.userAgent),e.__detect=t}(n),function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(e){return r?r+e:e.toLowerCase()}var r,a,o,s,l,d,u,c,h,f,p="",g={Webkit:"webkit",Moz:"",O:"o"},m=window.document,v=m.createElement("div"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,E={};e.each(g,function(e,n){return v.style[e+"TransitionProperty"]!==t?(p="-"+e.toLowerCase()+"-",r=n,!1):void 0}),a=p+"transform",E[o=p+"transition-property"]=E[s=p+"transition-duration"]=E[d=p+"transition-delay"]=E[l=p+"transition-timing-function"]=E[u=p+"animation-name"]=E[c=p+"animation-duration"]=E[f=p+"animation-delay"]=E[h=p+"animation-timing-function"]="",e.fx={off:r===t&&v.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:p,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(n,i,r,a,o){return e.isFunction(i)&&(a=i,r=t,i=t),e.isFunction(r)&&(a=r,r=t),e.isPlainObject(i)&&(r=i.easing,a=i.complete,o=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),o&&(o=parseFloat(o)/1e3),this.anim(n,i,r,a,o)},e.fn.anim=function(i,r,p,g,m){var v,A,b,T={},S="",R=this,k=e.fx.transitionEnd,w=!1;if(r===t&&(r=e.fx.speeds._default/1e3),m===t&&(m=0),e.fx.off&&(r=0),"string"==typeof i)T[u]=i,T[c]=r+"s",T[f]=m+"s",T[h]=p||"linear",k=e.fx.animationEnd;else{A=[];for(v in i)y.test(v)?S+=v+"("+i[v]+") ":(T[v]=i[v],A.push(n(v)));S&&(T[a]=S,A.push(a)),r>0&&"object"==typeof i&&(T[o]=A.join(", "),T[s]=r+"s",T[d]=m+"s",T[l]=p||"linear")}return b=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(k,b)}else e(this).unbind(k,b);w=!0,e(this).css(E),g&&g.call(this)},r>0&&(this.bind(k,b),setTimeout(function(){w||b.call(R)},1e3*r+25)),this.size()&&this.get(0).clientLeft,this.css(T),0>=r&&setTimeout(function(){R.each(function(){b.call(this)})},0),this},v=null}(n),e.exports=n},function(e,t,n){var i=n(1),r=n(7),a=n(8),o=n(9),s=n(10),l=n(11);e.exports=i.extend({METADATA:"metadata",STATE_CHANGE:"stateChange",MEDIA_START:"mediaStart",MEDIA_END:"mediaEnd",PLAY_REQUESTED:"playRequested",REPLAY_REQUEST:"replayRequest",PLAYHEAD_UPDATE:"playheadUpdate",PLAYLIST_COMPLETE:"playlistComplete",READY:"ready",INDEX_CHANGE:"indexChange",FULL_SCREEN_CHANGE:"fullScreenChange",VOLUME_CHANGE:"volumeChange",MUTED:"muted",UNMUTED:"unmuted",AIRPLAY:"airplay",PERFORMANCE:"performance",DURATION_CHANGE:"durationChange",CUE_POINTS_CHANGE:"cuePointsChange",BUFFERED:"buffered",ERROR:"error",CONFIG_LOADED:"configLoaded",ENDSLATE_SHOW:"endslateShow",ENDSLATE_HIDE:"endslateHide",CC:"closedcaption",CC_608_AVAILABLE:"closedcaption_608",BUFFERING_WAITING:"bufferStall",MANIFEST_LOADED:"manifestLoaded",FLASH_PLUGIN_STATUS:"flashPluginStatus",PLAYER_DESTROY:"playerDestroy",VISIBILITY_CHANGE:"visibilityChange",SEAMLESS_MODE:"seamlessMode",RESIZE:"resize",SETTING_CHANGED:"settingChanged",POSITION_RESUMED:"positionResumed",ID3:"ID3"},r,a,o,s,l)},function(e,t){e.exports={BENTO_LOADED:"bentoLoaded",BENTO_WAITING_FOR_AD_BREAK:"waitingForAdBreak",BENTO_AD_PLAYHEAD:"adPlayhead",BENTO_AD_BREAK_STARTED:"adBreakStarted",BENTO_AD_STARTED:"adStarted",BENTO_AD_CLICKED:"adClicked",BENTO_AD_PAUSED:"adPaused",BENTO_AD_RESUMED:"adResumed",BENTO_PAUSE_REQUESTED:"adPauseRequested",BENTO_RESUME_REQUESTED:"adResumeRequested",BENTO_AD_ENDED:"adEnded",BENTO_AD_BREAK_ENDED:"adBreakEnded",BENTO_AD_BREAK_TIMEOUT:"adBreakTimeout"}},function(e,t){e.exports={PLACEHOLDER_PLAY_REQUESTED:"placeholderPlayRequested"}},function(e,t){e.exports={PLAYLIST_READY:"playlistReady",PLAYLIST_ITEM_READY:"playlistItemReady",PLAYLIST_ERROR:"playlistError"}},function(e,t){e.exports={VTT_TRANSCRIPT_CHECKED:"vttTranscriptChecked"}},function(e,t){e.exports={WAITING_ON_MEDIAGEN_AUTH_CHECK:"waitingOnMediaGenAuthCheck",MEDIAGEN_AUTH_CHECK_ERROR:"mediaGenAuthCheckError"}},function(e,t){e.exports={GENERAL_ERROR:"general_error",PLUGIN_ERROR:"plugin_error",NO_CONNECTION:"no_connection",REQUEST_ERROR:"request_error",PARSE_ERROR:"parse_error",CONFIG_ERROR_MESSAGE:"config_error_message",MEDIAGEN_AUTH_ERROR:"mediagen_auth_error",MEDIAGEN_ERROR_MESSAGE:"mediagen_error_message",VIDEO_UNAVAILABLE:"video_unavailable",STREAM_LIMIT_REACHED:"stream_limit_reached",PLAYBACK_ERROR:"playback_error",MASTER_M3U8_REQUEST_ERROR:"master_m3u8_request_error",MASTER_M3U8_AUTH_ERROR:"master_m3u8_auth_error",PLAYLIST_M3U8_REQUEST_ERROR:"playlist_m3u8_request_error",PLAYLIST_M3U8_AUTH_ERROR:"playlist_m3u8_auth_error",VIDEO_REQUEST_ERROR:"video_request_error",VIDEO_AUTH_ERROR:"video_auth_error",STREAM_EXPIRED:"stream_expired",TT_ERROR:"tt_error",AD_CONFIG_ERROR:"ad_config_error",AD_PLAYBACK_ERROR:"ad_playback_error",AD_REQUEST_TIMEOUT:"ad_request_timeout",AD_REQUEST_HARD_TIMEOUT:"ad_request_hard_timeout"}},function(e,t){e.exports={AGGREGATE:"aggregate",AD_BREAK_START:"waitingForAdBreakStart",AD_PLAY_REQUEST:"waitingForAdPlayRequest",AD_STARTED:"waitingForAdStarted",INTRA_AD:"waitingBetweenAds"}},function(e,t){var n={INITIALIZING:"loadstart",PLAYING:"playing",PAUSED:"paused",SEEKING:"seeking",SEEKED:"seeked",ENDED:"ended",STALLED:"ended",STOPPED:"stopped",WAITING:"waiting",ERROR:"error"};e.exports=n},function(e,t){var n={PRE_ROLL:"preRoll",MID_ROLL:"midRoll",POST_ROLL:"postRoll"};e.exports=n},function(e,t){e.exports={API_READY:"_edgePlayerApiReady",LEGACY_PJS_API_READY:"_pjsReady",LEGACY_API_READY:"_mtvnPlayerAPIReady",PLAYER_READY:"_mtvnPlayerReady",FEED_LOADED:"_edgeplayerFeedLoad"}},function(e,t,n){var i=n(2).getLogger("core"),r=n(4).window,a=n(1),o={instances:[],triggerOnAllPlayers:function(e,t){for(var n=0;n<this.instances.length;n++)this.instances[n].player.trigger(e,t)},checkStorage:function(e){var t;try{t=r[e],t.setItem("test","testSessionStorage")}catch(e){t={getItem:function(){return null},setItem:a.noop,removeItem:a.noop}}return t},processEvent:function(e,t){if(t&&t.target&&t.target.$el&&(t.target.$el.trigger("MTVNPlayer:"+t.type,t),t.target.$el.trigger("EdgePlayer:"+t.type,t)),e){e=a.isArray(e)?e.slice():[e];for(var n=0,r=e.length;r>n;n++)try{e[n].callback(t)}catch(r){i.error('Error in "'+t.type+'" callback.',r.stack,r,e[n]),a.defer(function(){throw r})}}},removePlayerInstance:function(e){this.instances=a.reject(this.instances,function(t){return t.source===e})},registerPlayerInstance:function(e){this.removePlayerInstance(e.id),this.instances.push({source:e.id,player:e}),e.on(EdgePlayer.Events.CONFIG_LOADED,function(){e.configModel.config.simultaneousPlaybackEnabled||o.disableSimultaneousPlayback(e)})},disableSimultaneousPlayback:function(e){e.on(EdgePlayer.Events.PLAY_REQUESTED,function(e){EdgePlayer.activePlayer=e.target,EdgePlayer.getPlayers().forEach(o.pauseInactivePlayer)}),e.on(EdgePlayer.Events.BENTO_AD_STARTED,function(e){o.pauseInactivePlayer(e.target)}),e.on(EdgePlayer.Events.MEDIA_START,function(e){o.pauseInactivePlayer(e.target)})},pauseInactivePlayer:function(e){1===EdgePlayer.getPlayers().length&&(EdgePlayer.activePlayer=EdgePlayer.getPlayer()),EdgePlayer.activePlayer===e||e.configModel.config.simultaneousPlaybackEnabled||e.pause()},triggerGlobalCallbacks:function(e,t){a.each(r[e],function(e){a.isFunction(e)&&e(t)})}};e.exports=o},function(e,t,n){function i(e){return"[EdgePlayer "+EdgePlayer.version+"] "+e}var r=n(2).getLogger("player"),a=n(4).window,o=a.Promise||n(19),s=n(1),l=n(5),d=n(22),u=n(3),c=n(23),h=n(24),f=n(51),p=n(53),g=n(88),m=n(89),v=n(90),y=n(91),E=n(6),A=n(17),b=n(94),T=n(95),S=n(96),R=n(97),k=n(98),w=n(99),M=n(101),C=n(102),L=n(16),I=n(103),_=n(104),P=n(105),D=n(106),x=n(41),O=n(107),N=n(112),B=n(114),F=n(115),U=n(116),G=n(117),j=n(129),H=n(130),V=n(62),Y=n(52),z=n(131),K=n(80),W=n(132),q=n(56),X=[C,S],Q=N,J=n(128),Z=function(e,t,n){if(this.adsModel=I(),this.endSlateModel=j.getInstance(),this.guiModel=U.getInstance(),this.playbackModel=B.getInstance(),this.performanceModel=F.getInstance(),this.playlistModel=c.getInstance(),this.bento=_(this),this.timeoutManager=f(this),this.metrics=P(this),this.performanceManager=h(this),this.performanceManager.playerCreationRequested(),!s.isElement(e)){var r;if(r=s.isString(e)?l(e):e,r&&r.length)return s.map(r,function(e){return new Z(e,t,n)});if(r=l("#"+e),r&&r.length)return new Z(r[0],t,n);throw i("error creating player, unable to find:"+e)}if(!e)throw i("player selector or element invalid:"+e);if(!(this instanceof Z))return new Z(e,t,n);this.ready=!1,this.state=null,this.playlistMetadata=null,this.playhead=0,this.absolutePlayhead=0,this.contentElement=null,this.adsElement=null,this.isFullScreen=!1,this.id=s.uniqueId("mtvnPlayer");var a=this.$el=l(e),o="";["spinner","overlay-container","cc-container","608-container","ima-placeholder","learn-more-placeholder","gui","endslate-container","share-modal","placeholder"].forEach(function(e){o+="<div class='edge-"+e+"'></div>"}),a.append(o),this.imaPlaceholder=a.find(".edge-ima-placeholder")[0],this.learnMorePlaceholder=a.find(".edge-learn-more-placeholder")[0],this.configModel=g.getInstance(),this.configModel.pageConfig=t||{},this.configModel.elementConfig=m.getConfigFromElement(a),p.updateConfig(this,this.configModel),this.interstitialModel=z.getInstance(),a.addClass("pjs edge-player"),a.width(this.configModel.config.width).height(this.configModel.config.height),this._eventDispatcher=s.clone(d.Events),this._addListeners(n),this._addListeners(E.CONFIG_LOADED,[Y.onConfigLoaded,H.onConfigLoaded]),this._initPlayerReadyPromise(),this.create()};Z.prototype={currentMetadata:{},EventValidator:b,ShareUtil:D,_initPlayerReadyPromise:function(){var e=this,t=new o(function(t,n){e._resolvePlayerReady=t,e._rejectPlayerReady=n});this.prepared=function(){return t},this.on(E.ERROR,function(t){s.isFunction(e._rejectPlayerReady)&&(e._rejectPlayerReady(t.data),e._resolvePlayerReady=null,e._rejectPlayerReady=null)}),this.on(E.PLAYLIST_READY,function(){r.debug("feed_loaded"),A.triggerGlobalCallbacks(L.FEED_LOADED,{player:e,config:e.config,metadata:e.config.feed})})},_onPlayerPrepared:function(){if(s.isFunction(this._resolvePlayerReady)){r.info("player is ready"),this.ready=!0,this.performanceManager.playerReady();try{this._resolvePlayerReady(this)}catch(e){r.error("Error in callback for player ready promise",e.stack,e)}this._resolvePlayerReady=null,this._rejectPlayerReady=null,this.trigger(E.READY),r.debug("player ready callback"),A.triggerGlobalCallbacks(L.PLAYER_READY,this)}},_setCcModule:function(){this.config.useQuickTimePlayerOnIphone&&(Q=O),this.isLive()&&(this.guiModel.ccStyleSheet=u.appendStyle(),this.config.jsHLSEnabled?Q=u.insertCss(this.guiModel.ccStyleSheet,"::cue","")?this.isMobilePlatform||l.browser.firefox?w:k:w:this.config.flashHLSEnabled?Q=R:this.isMobilePlatform||(Q=M))},create:function(){var e,t;s.bindAll(this,"module","play","initializeModules"),this.moduleManager||(this.moduleManager=new T({player:this,controller:this,config:this.configModel.config,deviceType:l.os})),this.isMobilePlatform=l.os.phone||l.os.tablet,this.isMobilePlatform||this.$el.prepend(l("<div id='fw_placeholder' />")),A.registerPlayerInstance(this),e=this.module(v),e.once(E.PLACEHOLDER_PLAY_REQUESTED,this.play),this.module(y),t=new W(this),t.render(),p.loadConfig(this),this.once(E.CONFIG_LOADED,this.initializeModules)},module:function(e,t){if(s.isObject(e)&&(t=e),s.contains(X,t)&&!this.configModel.configHasLoaded)throw i("illegal API call before player config is ready: "+t.NAME);return this.moduleManager.apply(this,arguments)},initializeModules:function(){var e=this;s.each(X,function(e){this.module(e)},this),o.all([V.checkAutoPlay(this),q.loadItem(this,this.playlistModel.currentIndex)]).then(function(){e._onPlayerPrepared(),e._setCcModule(),e.customizeCC(),G.initialize(e),e.playbackModel.isAutoPlayEnabled?(r.info("modules initialized and isAutoPlayEnabled, play"),e.play()):(e.module(y).deferErrorSlates(),e.module(v).show(e.guiModel.placeholderImageUrl))})},activate:function(){return this.performanceManager.playRequested(),this.trigger(E.PLAY_REQUESTED),this.playbackModel.renderer.isActivated||(this.adsElement.play(),this.playbackModel.renderer.activate(),this.module(v).hide(),K.showInterstitial(this)),this.prepared()},play:function(){this.activate().then(function(e){r.info("play"),e.playbackManager.play(e)})},pause:function(){this.prepared().then(function(e){r.info("pause"),e.playbackManager.pause(e)})},replay:function(){this.activate().then(function(e){r.info("replay"),e.playbackManager.replay(e)})},mute:function(){return V.mute(this)},unmute:function(){return V.unmute(this)},playIndex:function(e){u.isInteger(e)||(r.error("playIndex called with non integer argument: ",e),e=parseInt(e),isNaN(e)&&(e=0)),this.activate().then(function(t){r.info("playIndex",e),t.playbackManager.playIndex(t,e)})},playFromStart:function(){this.activate().then(function(e){r.info("playFromStart"),e.playbackManager.setStartTime(e,0),e.playbackManager.playIndex(e,0)})},volume:function(e){return V.volume(this,e)},setVolume:function(e){return this.volume(e)},seek:function(e){return this.playbackManager.seek(this,e)},isSeeking:function(){return V.isSeeking(this)},isPaused:function(){return this.playbackManager.isPaused(this)},getEmbedCode:function(){return this.ShareUtil.getEmbedCode(this.configModel.config,this.playlistMetadata.items[0],this.$el)},onSocialShare:function(e){G.onSocialShare(this,e)},onEmbed:function(){this.guiModel.shareModalView?this.guiModel.shareModalView.openModal({title:"Embed",message:this.getEmbedCode()}):r.warn("onEmbed is unavailable in chromeless mode")},onCopy:function(){var e=this.playlistMetadata.link;this.guiModel.shareModalView&&e?this.guiModel.shareModalView.openModal({title:"Copy Link",message:e}):r.warn("onCopy is unavailable")},goFullScreen:function(){return this.module(S).goFullScreen()},exitFullScreen:function(){return this.module(S).exitFullScreen()},goLive:function(){this.prepared().then(function(e){r.info("goLive"),e.playbackManager.goLive(e)})},resetAdMetadata:function(){return this.currentMetadata=s.extend({isAd:!0},l.extend(!0,{},this.adsModel.adMetadata)),this.currentMetadata},getContentMetadata:function(){return this.playlistModel.metadata.items[this.playlistModel.currentIndex]},getAdMetadata:function(){return this.adsModel.adMetadata},getPlaylistMetadata:function(){return this.playlistModel.metadata},isLive:function(){return void 0!==this.playlistModel.currentItem.mediaGen?this.playlistModel.currentItem.mediaGen.isLive:void 0},isDVR:function(){return void 0!==this.playlistModel.currentItem.mediaGen?this.playlistModel.currentItem.mediaGen.isDVR:void 0},isAdBreak:function(){return this.adsModel.isAdBreak},isHTML5Player:function(){return V.isHTML5Player(this)},isCCOn:function(){return x.get(x.KEYS.CC_ON)},enableCC:function(){x.set(x.KEYS.CC_ON,!0),this.toggleCC()},disableCC:function(){x.set(x.KEYS.CC_ON,!1),this.toggleCC()},toggleCC:function(){this.prepared().then(function(e){e.module(Q).onToggleCc()})},customizeCC:function(e){J.updateUserPreferences(e),this.prepared().then(function(e){e.module(Q).onCCSettings(J.translateToCss())})},getBandwidth:function(){return this.playbackModel.renderer.getBandwidth(this)},getBandwidthMin:function(){return this.playbackModel.renderer.getBandwidthMin(this)},getBandwidthMax:function(){return this.playbackModel.renderer.getBandwidthMax(this)},getBandwidthAvg:function(){return this.playbackModel.renderer.getBandwidthAvg(this);
},showMessage:function(e){this.module(y).showMessage(e)},showOverlays:function(){this.module(C).showOverlays()},hideOverlays:function(){this.module(C).hideOverlays()},onBentoReady:function(e){this.trigger(E.BENTO_LOADED,{target:this,type:E.BENTO_LOADED,data:e})},on:function(e,t,n){if(s.isString(e)){if(!s.isFunction(t))throw i("adding "+e+" with callback that is not a function");e=this.EventValidator.fixEventName(e),this.EventValidator.checkEventName(e),this._eventDispatcher.on(e,t,n)}},off:function(e,t,n){s.isString(e)&&(e=this.EventValidator.fixEventName(e),this.EventValidator.checkEventName(e)),this._eventDispatcher.off(e,t,n)},one:function(e,t,n){var i=this,r=function(a){i.off(e,r,n),t(a)};this.on(e,r,n)},trigger:function(e,t){if(!e)throw i("event triggered without type.");var n=this._eventDispatcher._events;s.isObject(n)&&A.processEvent(n[e],{target:this,data:t,type:e})},_addListeners:function(e,t){r.debug("addListeners",e,t),s.isString(e)&&(e=s.object([e],[t])),s.each(e,function(e,t){e=s.isArray(e)?e:[e],s.each(e,function(e){this.on(t,e)},this)},this)},addCssBreakpoints:function(e,t){G.addCssBreakpoints(this,e,t)},parseCssBreakpoints:function(e){G.parseCssBreakpoints(this,e)},onAdClick:function(){this.trigger(E.BENTO_AD_CLICKED)},destroy:function(e){r.info("destroy",e),this.trigger(E.PLAYER_DESTROY),this.module(v).off(E.PLACEHOLDER_PLAY_REQUESTED),this.performanceManager.destroy(),e=e||{},s.invoke(this.moduleManager.all(),"destroy"),this.off(),this.$el&&!e.leaveElement&&this.$el.remove(),this.$el=null,this.playerTarget=null,this.contentElement=null,this.adsElement=null,this.element=null,this.imaPlaceholder=null,A.removePlayerInstance(this.id)}},Z.prototype.bind=Z.prototype.on,Z.prototype.once=Z.prototype.one,Z.prototype.unbind=Z.prototype.off,e.exports=Z},function(e,t,n){(function(t){!function(n){function i(){}function r(e,t){return function(){e.apply(t,arguments)}}function a(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],c(e,this)}function o(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?s:l)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void l(t.promise,e)}s(t.promise,i)}))}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void c(r(n,t),e)}e._state=1,e._value=t,d(e)}catch(t){l(e,t)}}function l(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)o(e,e._deferreds[t]);e._deferreds=null}function u(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function c(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,l(t,e))})}catch(e){if(n)return;n=!0,l(t,e)}}var h=setTimeout;a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(i);return o(this,new u(e,t,n)),n},a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){function i(a,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){i(a,e)},n)}t[a]=o,0===--r&&e(t)}catch(e){n(e)}}if(0===t.length)return e([]);for(var r=t.length,a=0;a<t.length;a++)i(a,t[a])})},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var i=0,r=e.length;r>i;i++)e[i].then(t,n)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){h(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},a._setImmediateFn=function(e){a._immediateFn=e},a._setUnhandledRejectionFn=function(e){a._unhandledRejectionFn=e},"undefined"!=typeof e&&e.exports?e.exports=a:n.Promise||(n.Promise=a)}(this)}).call(t,n(20).setImmediate)},function(e,t,n){(function(e,i){function r(e,t){this._id=e,this._clearFn=t}var a=n(21).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,l={},d=0;t.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=d++,i=arguments.length<2?!1:s.call(arguments,1);return l[n]=!0,a(function(){l[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete l[e]}}).call(t,n(20).setImmediate,n(20).clearImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(e){if(c===clearTimeout)return clearTimeout(e);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){g&&f&&(g=!1,f.length?p=f.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=r(o);g=!0;for(var t=p.length;t;){for(f=p,p=[];++m<t;)f&&f[m].run();m=-1,t=p.length}f=null,g=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var u,c,h=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(e){c=i}}();var f,p=[],g=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||g||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=d,h.addListener=d,h.once=d,h.off=d,h.removeListener=d,h.removeAllListeners=d,h.emit=d,h.prependListener=d,h.prependOnceListener=d,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){var i,r;!function(a,o){i=[n(1),n(5),t],r=function(e,t,n){a.Backbone=o(a,n,e,t)}.apply(t,i),!(void 0!==r&&(e.exports=r))}(this,function(e,t,n,i){var r=e.Backbone,a=[],o=(a.push,a.slice);a.splice;t.VERSION="1.1.2",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(e,t,n){if(!d(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,i){if(!d(this,"once",e,[t,i])||!t)return this;var r=this,a=n.once(function(){r.off(e,a),t.apply(this,arguments)});return a._callback=t,this.on(e,a,i)},off:function(e,t,i){var r,a,o,s,l,u,c,h;if(!this._events||!d(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events=void 0,this;for(s=e?[e]:n.keys(this._events),l=0,u=s.length;u>l;l++)if(e=s[l],o=this._events[e]){if(this._events[e]=r=[],t||i)for(c=0,h=o.length;h>c;c++)a=o[c],(t&&t!==a.callback&&t!==a.callback._callback||i&&i!==a.context)&&r.push(a);r.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!d(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&u(n,t),i&&u(i,arguments),this},stopListening:function(e,t,i){var r=this._listeningTo;if(!r)return this;var a=!t&&!i;i||"object"!=typeof t||(i=this),e&&((r={})[e._listenId]=e);for(var o in r)e=r[o],e.off(t,i,this),(a||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,d=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),o=0,s=a.length;s>o;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},u=function(e,t){var n,i=-1,r=e.length,a=t[0],o=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,o);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,a,o,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},c={listenTo:"on",listenToOnce:"once"};n.each(c,function(e,t){s[t]=function(t,i,r){var a=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return a[o]=t,r||"object"!=typeof i||(r=this),t[e](i,r,this),this}}),s.bind=s.on,s.unbind=s.off,n.extend(t,s);var h=t.Model=function(e,t){var i=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var r,a,o,s,l,d,u,c;if(null==e)return this;if("object"==typeof e?(a=e,i=t):(a={})[e]=t,i||(i={}),!this._validate(a,i))return!1;o=i.unset,l=i.silent,s=[],d=this._changing,this._changing=!0,d||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(r in a)t=a[r],n.isEqual(c[r],t)||s.push(r),n.isEqual(u[r],t)?delete this.changed[r]:this.changed[r]=t,o?delete c[r]:c[r]=t;if(!l){s.length&&(this._pending=i);for(var h=0,f=s.length;f>h;h++)this.trigger("change:"+s[h],this,c[s[h]],i)}if(d)return this;if(!l)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,i=!1,r=this._changing?this._previousAttributes:this.attributes;for(var a in e)n.isEqual(r[a],t=e[a])||((i||(i={}))[a]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},B(this,e),this.sync("read",this,e)},save:function(e,t,i){var r,a,o,s=this.attributes;if(null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t,i=n.extend({validate:!0},i),r&&!i.wait){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;r&&i.wait&&(this.attributes=n.extend({},s,r)),void 0===i.parse&&(i.parse=!0);var l=this,d=i.success;return i.success=function(e){l.attributes=s;var t=l.parse(e,i);return i.wait&&(t=n.extend(r||{},t)),n.isObject(t)&&!l.set(t,i)?!1:(d&&d(l,e,i),void l.trigger("sync",l,e,i))},B(this,i),a=this.isNew()?"create":i.patch?"patch":"update","patch"===a&&(i.attrs=r),o=this.sync(a,this,i),r&&i.wait&&(this.attributes=s),o},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&r(),i&&i(t,n,e),t.isNew()||t.trigger("sync",t,n,e)},this.isNew())return e.success(),!1;B(this,e);var a=this.sync("delete",this,e);return e.wait||r(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||N();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];n.each(f,function(e){h.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var p=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};n.extend(p.prototype,s,{model:h,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,m))},remove:function(e,t){var i=!n.isArray(e);e=i?[e]:n.clone(e),t||(t={});var r,a,o,s;for(r=0,a=e.length;a>r;r++)s=e[r]=this.get(e[r]),s&&(delete this._byId[s.id],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,t.silent||(t.index=o,s.trigger("remove",s,this,t)),this._removeReference(s,t));return i?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var i=!n.isArray(e);e=i?e?[e]:[]:n.clone(e);var r,a,o,s,l,d,u,c=t.at,f=this.model,p=this.comparator&&null==c&&t.sort!==!1,m=n.isString(this.comparator)?this.comparator:null,v=[],y=[],E={},A=t.add,b=t.merge,T=t.remove,S=!p&&A&&T?[]:!1;for(r=0,a=e.length;a>r;r++){if(l=e[r]||{},o=l instanceof h?s=l:l[f.prototype.idAttribute||"id"],d=this.get(o))T&&(E[d.cid]=!0),b&&(l=l===s?s.attributes:l,t.parse&&(l=d.parse(l,t)),d.set(l,t),p&&!u&&d.hasChanged(m)&&(u=!0)),e[r]=d;else if(A){if(s=e[r]=this._prepareModel(l,t),!s)continue;v.push(s),this._addReference(s,t)}s=d||s,!S||!s.isNew()&&E[s.id]||S.push(s),E[s.id]=!0}if(T){for(r=0,a=this.length;a>r;++r)E[(s=this.models[r]).cid]||y.push(s);y.length&&this.remove(y,t)}if(v.length||S&&S.length)if(p&&(u=!0),this.length+=v.length,null!=c)for(r=0,a=v.length;a>r;r++)this.models.splice(c+r,0,v[r]);else{S&&(this.models.length=0);var R=S||v;for(r=0,a=R.length;a>r;r++)this.models.push(R[r])}if(u&&this.sort({silent:!0}),!t.silent){for(r=0,a=v.length;a>r;r++)(s=v[r]).trigger("add",s,this,t);(u||S&&S.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,r=this.models.length;r>i;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null!=e?this._byId[e]||this._byId[e.id]||this._byId[e.cid]:void 0},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,r=t.success;return t.success=function(e,n){t.wait&&i.add(e,t),r&&r(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof h)return e;t=t?n.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(v,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=["groupBy","countBy","sortBy","indexBy"];n.each(y,function(e){p.prototype[e]=function(t,i){var r=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,r,i)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},A=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(n.isFunction(i)||(i=this[e[t]]),i){var r=t.match(A),a=r[1],o=r[2];i=n.bind(i,this),a+=".delegateEvents"+this.cid,""===o?this.$el.on(a,i):this.$el.on(a,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className"));var i=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,r){var a=S[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:a,dataType:"json"};if(r.url||(o.url=n.result(i,"url")||N()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(o.contentType="application/json",o.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),r.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){o.type="POST",r.emulateJSON&&(o.data._method=a);var s=r.beforeSend;r.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),s?s.apply(this,arguments):void 0}}"GET"===o.type||r.emulateJSON||(o.processData=!1),"PATCH"===o.type&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=r.xhr=t.ajax(n.extend(o,r));return i.trigger("request",i,l,r),l};var T=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),S={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var R=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,M=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(R.prototype,s,{initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var a=this;return t.history.route(e,function(n){var o=a._extractParameters(e,n);a.execute(r,o),a.trigger.apply(a,["route:"+i].concat(o)),a.trigger("route",i,o),t.history.trigger("route",a,i,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(C,"\\$&").replace(k,"(?:$1)?").replace(w,function(e,t){return t?e:"([^/?]+)"}).replace(M,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null})}});var L=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,_=/^\/+|\/+$/g,P=/msie [\w.]+/,D=/\/$/,x=/#.*$/;L.started=!1,n.extend(L.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(D,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(I,"")},start:function(e){if(L.started)throw new Error("Backbone.history has already been started");L.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),r=document.documentMode,a=P.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);if(this.root=("/"+this.root+"/").replace(_,"/"),a&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(i)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var s=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&s.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),L.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!L.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(x,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new L;var O=function(e,t){var i,r=this;i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t);var a=function(){this.constructor=i};return a.prototype=r.prototype,i.prototype=new a,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};h.extend=p.extend=R.extend=E.extend=L.extend=O;var N=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}};return t})},function(e,t){e.exports={getInstance:function(){return{mediaGenRetryCount:0,tveAuthErrorCount:0,metadata:{items:[]},loadedSeamlessMediaGen:!1,currentIndex:0,currentPlayingIndex:NaN,currentItem:{ready:!1},monolithicFullEpisode:!1}}}},function(e,t,n){var i=n(2).getLogger("performance-manager"),r=n(1),a=n(3),o=n(25),s=n(6),l=n(26),d=n(36),u=n(12),c={PLAY_REQUESTED:"playRequested",CONFIG_REQUESTED:"requestConfig"};e.exports=function(e){function t(e,t){void 0===t&&(t=a.getTiming()),y[e]=Math.round(t)}var n,h,f,p,g,m,v=e,y={},E={},A={mediaGenRequested:"requestMediaGen",mediaGenReceived:"receivedMediaGen",configRequested:c.CONFIG_REQUESTED,configReceived:"receivedConfig"},b=!0;return n=o(e),{getBeaconManager:function(){return n},getCurrentAd:function(){return h},getMilestoneName:function(e){return A[e]||e},getMilestones:function(){i.debug("timings",y,E);for(var e in E){var t=E[e];y[this.getMilestoneName(e+"Requested")]=t[d.STATES.EXECUTED],y[this.getMilestoneName(e+"Received")]=t[d.STATES.RESOLVED]}return y},setSplitTestNode:function(e){n.setSplitTestNode(e)},fireErrorBeacon:function(e){n.fireErrorBeacon(e)},registerTimings:function(e,t){i.trace("registerTimings",e,t),void 0!==t&&(E[e]=t)},stallStarted:function(){i.info("stall started"),n.stallStarted()},stallEnded:function(){i.info("stall ended"),n.stallEnded()},registerTimeoutError:function(e){i.debug("registerTimeoutError errorBeaconData: ",e),n.registerTimeoutError(e)},registerTimeout:function(e,t){e.catch(this.registerTimeoutError.bind(this,t))},userPause:function(){n.userPause()},userResume:function(){n.userResume()},onMediaEnd:function(){t("mediaEnd"),n.onMediaEnd()},playerCreationRequested:function(){t("playerCreationRequested")},parsingFeed:function(){t("requestFeed")},parsedFeed:function(){f=v.adsModel.isReady,t("receivedFeed")},playerReady:function(){n.playerReady(),t("playerReady")},bentoReady:function(e){t("bentoReady",e)},adManifestRequested:function(e){n.adManifestRequested(),t("requestAdManifest",e)},adManifestReady:function(e){t("receivedAdManifest",e)},adBlockerStatus:function(){t("adBlockerStatus")},playRequested:function(){void 0===y[c.PLAY_REQUESTED]&&(n.playRequested(),v.playbackModel.isAutoPlayEnabled?y[c.PLAY_REQUESTED]=this.getMilestones()[c.CONFIG_REQUESTED]:t(c.PLAY_REQUESTED))},waitingForAdBreak:function(e){e||(p=!!v.adsModel.isReady,g=!!v.adsModel.adManifestRequested,m=!!v.adsModel.adManifestReady)},adBreakStarted:function(e){var i={bentoTimeout:!!e,bentoReadyAfterFeedLoaded:!f,waitedOnBentoReady:!p,waitedOnAdRequest:!g,waitedOnAdReady:!m};n.adBreakStarted(i),b=!0,t("adBreakStarted")},bentoRequestingAdPlay:function(){n.adPlayRequested(),t("adPlayRequested")},adStarted:function(e){b&&(b=!1,t("adPlayStarted")),h=e,n.adStarted()},adEnded:function(){},adSkipped:function(e,t){i.debug("skipped ad "+e),n.adSkipped(),void 0!==t&&null!==t&&n.fireErrorBeacon({code:u.AD_PLAYBACK_ERROR,level:t.level,message:t.message,httpStatusCode:t.httpStatusCode,url:t.url})},preloadContentRequest:function(){t("preloadContentRequested")},adBreakEnded:function(){t("adBreakCompleted"),n.adBreakEnded()},adBreakTerminated:function(e){var a;t("adBreakTerminated"),n.adBreakEnded(),r.isObject(e)&&(a=r.pick(e,"level","message","httpStatusCode","url"),a.code=u.AD_PLAYBACK_ERROR,a.level>l.WARN&&(i.warn("adBreakTerminated called with unexpected error level. Downgrading to SeverityLevels.WARN"),a.level=l.WARN),n.fireErrorBeacon(a))},adBreakSkipped:function(){t("adBreakSkipped")},adBreakTimeout:function(e){n.adBreakTimeout(e)},contentPlayRequested:function(){t("contentPlayRequest"),n.contentPlayRequested()},setContentSource:function(){t("setContentSource")},manifestLoaded:function(){t("manifestLoaded")},contentStarted:function(r){i.info("contentStarted "+r),t("contentStarted"),n.contentStarted(r),e.trigger(s.PERFORMANCE,y),y={}},destroy:function(){n.destroy()}}}},function(e,t,n){var i=n(2).getLogger("beacon-manager"),r=n(1),a=n(3),o=n(6),s=n(12),l=n(26),d=n(27),u=n(38),c=n(40),h=n(45),f=n(46),p=n(47),g=n(41),m=n(31),v=n(36),y=n(34),E=n(48),A=/^(.+:.+:.+:.+):(.+)$/;e.exports=function(e){function t(e){var t={sessionId:z,playId:K,mgid:I(),contentId:Y.config.uri};return void 0!==j&&j.get().then(function(t){e.extendBeaconData({identity:{vuid:t}})}).catch(function(e){i.debug("VUID receiver rejected.",e),e.name!==v.ERRORS.INITIALIZATION&&(e.code=e.name===y.ERRORS.PARSE?s.PARSE_ERROR:s.REQUEST_ERROR,e.level=l.INFO,P(e))}),t}function n(){var e={segmentPlayId:W,segmentId:null};return void 0!==Y.getContentMetadata()&&(e.segmentId=Y.getContentMetadata().rss.guid),void 0!==V&&(e.previousSegmentId=V),void 0!==H&&(e.previousSegmentPlayId=H),e}function b(){var e={geo:Y.config.geo,type:Y.config.network,timezone:Y.config.timezone,name:Y.config.name,bwKbps:a.parseIntOrNull(Y.config.bw),avgBandwidthKbps:Y.performanceModel.avgBandwidthKbps};return e}function T(){var e=/^(.*\/\/[^\/]+)/,t=Y.configModel.config.feedWithQueryParams?e.exec(Y.configModel.config.feedWithQueryParams)[1]:null,n={feedURL:Y.configModel.config.feedWithQueryParams,feedServer:t,franchise:_(),itemCount:Y.playlistModel.metadata.items.length};return n}function S(){var e={type:Y.configModel.config.type,contentType:Y.configModel.config.contentType,useMediaGenFromFeed:Y.configModel.config.useMediaGenFromFeed,group:Y.configModel.config.group,isDesktop:!Y.isMobilePlatform,jsHLSEnabled:!!Y.configModel.config.jsHLSEnabled,autoPlay:Y.configModel.config.autoPlay,seamlessCounterStrike:Y.configModel.config.seamlessCounterStrike,seamlessEnabled:Y.configModel.config.seamlessEnabled},t=Y.playlistModel.currentItem.mediaGen;return t&&t.isLive&&(e.contentType="live"),
e}function R(){var e={playerVersion:EdgePlayer.version};return e}function k(){var e={src:Y.currentMetadata.src,mediaGenUrl:m.getMediaGenUrlForBeacons(Y),mediGenAuthRequired:Y.config.mediaGenAuthCheck,ovp:Y.playlistModel.loadedSeamlessMediaGen?"seamless":null},t=Y.playlistModel.currentItem.mediaGen;return t&&(e.live=t.isLive,e.cdn=t.rendition.cdn,e.dvr=t.isDVR),a.preserveDefinedValues(e)}function w(){var e=Y.configModel.config;j=new E(e.userApiBrandId,e.userApiAppId),Y.performanceManager.registerTimings("vuid",j.loaderTimings);var i=t(O),a=t(D);i.config=S(),i.ver=R(),i.network=b(),i.feed=T(),i.content=k(),O.extendBeaconData(i),O.playerReady(),r.extend(a,n()),a.ver=R(),a.network=b(),a.config=S(),a.content=k(),D.extendBeaconData(a),L(),M(),C()}function M(){var e=t(N);r.extend(e,n()),e.ver=R(),e.network=b(),e.feed=T(),e.config=S(),e.content=k(),N.extendBeaconData(e)}function C(){var e=t(B);r.extend(e,n()),e.ver=R(),e.network=b(),e.feed=T(),e.config=S(),e.content=k(),B.extendBeaconData(e)}function L(){var e=t(x);r.extend(e,n()),e.config=S(),e.content=k(),e.ver=R(),e.network=b(),e.feed=T(),x.extendBeaconData(e),x.isInitiated=!0}function I(){return A.exec(Y.config.uri)[1]}function _(){var e=Y.getContentMetadata();return e?e.rss.group.category.franchise:null}function P(e){var t=r.clone(e);x.isInitiated||L(),e.code!==s.CONFIG_ERROR_MESSAGE&&(x.fireError(e),t.playId=K),e.level>=l.ERROR&&(F.stopMonitor(),Y.trigger(o.ERROR,t))}var D,x,O,N,B,F,U,G,j,H,V,Y=e,z=g.get(g.KEYS.PLAYBACK_SESSION),K=a.generateId(),W=a.generateId();return D=d(e),O=u(e),x=c(e),N=h(e),B=f(e),F=p(),G={videoPlaybackBeaconManager:D,videoStartTimeBeaconManager:O,videoErrorBeaconManager:x,videoMidrollBeaconManager:N,videoAdsStartedBeaconManager:B},(void 0===z||null===z)&&(z=a.generateId(),g.set(g.KEYS.PLAYBACK_SESSION,z,!0)),{_getBaseBeaconData:t,_getContentBeaconData:k,getPlayId:function(){return K},getSegmentPlayId:function(){return W},getPreviousSegmentPlayId:function(){return H},getMgid:I,getPreviousSegmentId:function(){return V},getManager:function(e){return G[e]},getUpdateMonitor:function(){return F},fireErrorBeacon:P,stallStarted:function(){i.info("stall started"),D.stallStarted()},stallEnded:function(){i.info("stall ended"),D.stallEnded()},registerTimeoutError:function(e){void 0===e.level&&(e.level=l.WARN),void 0===e.code&&(e.code=s.REQUEST_ERROR),void 0===e.message&&(e.message="High "+e.phase+" latency"),P(e)},setSplitTestNode:function(e){void 0!==e&&void 0!==e.splitTests&&e.splitTests.length>0&&(x.extendBeaconData(e),D.extendBeaconData(e),O.extendBeaconData(e),N.extendBeaconData(e),B.extendBeaconData(e))},performUpdate:function(e){var t=Y.metrics.getCurrentRenditionIndex();t!==U&&("undefined"!=typeof U&&D.renditionChange(U,t),U=t),e%10==0&&D.triggerHeartbeat()},userPause:function(){F.pauseMonitor()},userResume:function(){F.resumeMonitor()},onMediaEnd:function(){F.stopMonitor(),V=Y.getContentMetadata().rss.guid,H=W,W=a.generateId()},playerReady:function(){F.registerCallback(this.performUpdate),w()},playRequested:function(){O.playRequested(K),N.playRequested(K),B.playRequested(K)},contentStarted:function(e){i.info("contentStarted"+e),this.checkMidroll()||O.contentStarted(),D.contentStarted(),F.startMonitor()},checkMidroll:function(){return O.canFire()?void 0:(N.contentStarted(W,H,V),!0)},contentPlayRequested:function(){Y.playlistModel.monolithicFullEpisode&&this.checkMidroll()&&F.startMonitor()},adManifestRequested:function(){O.adManifestRequested(),N.adManifestRequested(),B.adManifestRequested()},adBreakStarted:function(e){F.pauseMonitor(),O.adBreakStarted(e),N.adBreakStarted(e)},adPlayRequested:function(){O.adPlayRequested(),N.adPlayRequested(),B.adPlayRequested()},adStarted:function(){O.adStarted(),N.adStarted(),B.adStarted(W)},adSkipped:function(){O.adSkipped(),N.adSkipped(),B.adSkipped()},adBreakEnded:function(){N.adBreakEnded()},adBreakTimeout:function(e){O.adBreakTimeout(e)},destroy:function(){F.stopMonitor()}}}},function(e,t){e.exports={FATAL:60,ERROR:50,WARN:40,INFO:30,DEBUG:20,TRACE:10}},function(e,t,n){var i=n(2).getLogger("video-playback-beacon-manager"),r=n(4).window,a=n(1),o=n(3),s=n(6),l=n(28),d=n(29),u=n(30),c=n(14),h=n(31),f=n(32);e.exports=function(e){function t(){var e=null;return v.metrics.getCurrentRendition()&&(e=Math.round(v.metrics.getCurrentRendition().bitrate/1e3)),e}function n(){var e,t=v.metrics.getRenditions();return L.length=0,a.isArray(t)&&t.forEach(function(t){e={bitrate:Math.round(t.bitrate/1e3),width:t.width},L.push(e)}),L}function p(){var e=v.adsModel.adManifestMetadata,i=/^(.*\/\/[^\/]+)/,s=v.configModel.config.feedWithQueryParams?i.exec(v.configModel.config.feedWithQueryParams)[1]:null,d=function(e,t){return e.bitrate-t.bitrate},u=function(e,t){return e.width-t.width},c=h.getMediaGenUrlForBeacons(v);if(L=n(),A=b=T=t(),S=v.metrics.getBufferLength(),a.extend(y,{phase:l.PLAYBACK_START}),y.pmt.type=v.configModel.config.type,y.pmt.contentType=y.pmt.contentType||v.configModel.config.contentType,y.pmt.useMediaGenFromFeed=v.configModel.config.useMediaGenFromFeed,y.pmt.group=v.configModel.config.group,y.pmt.isDesktop=!v.isMobilePlatform,y.pmt.jsHLSEnabled=!!v.configModel.config.jsHLSEnabled,y.pmt.autoPlay=v.configModel.config.autoPlay,"undefined"!=typeof r.Bento&&(y.ver.bentoVersion=r.Bento.version),y.urls={configUrl:v.configModel.configUrl,feedUrl:v.configModel.config.feedWithQueryParams,feedServer:s,mediaGenUrl:c,src:v.currentMetadata.src},a.isObject(e)&&(a.extend(y.ads,e),y.ads.networkId=o.parseIntOrNull(y.ads.networkId)),a.isArray(L)&&L.length>0){var f=L.sort(u);y.packaging={renditionsCount:L.length,renditionsMaxKbps:Math.round(L.sort(d)[L.length-1].bitrate),renditionsMinKbps:Math.round(L.sort(d)[0].bitrate),renditionsMaxWidth:f[L.length-1].width,renditionsMinWidth:f[0].width,has1080p:f[L.length-1].width>=1920,renditionMaxFrameRate:null}}y.playback.upshiftsLast=0,y.playback.upshiftsSegmentTotal=0,y.playback.downshiftsLast=0,y.playback.downshiftsSegmentTotal=0,y.playback.rebufferDurationSegmentTotalMs=0,y.playback.rebufferDurationLastMs=0,y.playback.rebufferEventsLast=0,y.playback.rebufferEventsSegmentTotal=0,y.playback.framesDroppedLast=0,y.playback.framesDroppedSegmentTotal=0,y.playback.bufferSizeMs=null,y.playback.bufferSizeKb=null,y.playback.bufferedLastKb=null,y.playback.bufferedMaxKb=null}var g,m,v=e,y={},E=0,A=null,b=null,T=null,S=null,R=0,k=!1,w=Date.now(),M=0,C=!1,L=[];return y.playback={},y.pmt={},y.ads=u(),y.packaging=null,{extendBeaconData:function(e){a.extend(y,e)},getBeaconData:function(){return y},triggerHeartbeat:function(){var e=y.playback,n=v.metrics.getDroppedFrames()-e.framesDroppedSegmentTotal,i=v.metrics.getCurrentMaxCappedRendition();void 0===m&&(m=v.performanceManager.getBeaconManager()),y.segmentId=v.getContentMetadata().rss.guid,y.segmentPlayId=m.getSegmentPlayId(),y.beaconCount=E,y.epochTime=Date.now(),y.network.avgBandwidthKbps=v.performanceModel.avgBandwidthKbps,S<v.metrics.getBufferLength()&&(S=v.metrics.getBufferLength()),k&&(w>g?(e.rebufferDurationLastMs=Date.now()-w,e.rebufferDurationSegmentTotalMs+=Date.now()-w):(e.rebufferDurationLastMs+=Date.now()-g,e.rebufferDurationSegmentTotalMs+=Date.now()-g)),y.packaging&&(-1!==i?(y.packaging.attainableRenditionCount=i+1,y.packaging.attainableRenditionMaxKbps=L[i].bitrate,y.packaging.attainableRenditionMaxWidth=L[i].width):(y.packaging.attainableRenditionCount=L.length,y.packaging.attainableRenditionMaxKbps=T,y.packaging.attainableRenditionMaxWidth=y.packaging?y.packaging.renditionsMaxWidth:-1)),e.displayHeight=v.metrics.getDisplayHeight(),e.displayWidth=v.metrics.getDisplayWidth(),e.isFullscreen=v.isFullScreen,e.startRenditionKbps=A,e.minRenditionKbps=b,e.maxRenditionKbps=T,e.lastRenditionKbps=t(),e.measuredBwKbps=v.metrics.getBandwidth(),e.bufferedLastMs=v.metrics.getBufferLength(),e.bufferedMaxMs=S,e.framesDroppedLast=n,e.framesDroppedSegmentTotal+=v.metrics.getDroppedFrames(),e.mediaDurationMs=Math.round(1e3*v.playlistModel.currentItem.duration),e.mediaViewedMs=R,e.mediaPlayheadMaxMs=Math.round(1e3*v.playhead),e.segmentIndex=v.getContentMetadata().index,void 0!==v.adsModel&&(y.ads.adBlockerDetected=!!v.adsModel.adBlockerDetected),this.fireBeacon(),y.playback.rebufferDurationLastMs=0,y.playback.rebufferEventsLast=0,y.playback.upshiftsLast=0,y.playback.downshiftsLast=0,w=Date.now(),E++},fireBeacon:function(){i.info("videoPlaybackBeaconManager: fireBeacon"),f.send(y,d.PLAYBACK)},stallStarted:function(){k=!0,g=Date.now(),y.playback.rebufferEventsSegmentTotal++,y.playback.rebufferEventsLast++},stallEnded:function(){k&&(k=!1,w>g?(y.playback.rebufferDurationLastMs+=Date.now()-w,y.playback.rebufferDurationSegmentTotalMs+=Date.now()-w):(y.playback.rebufferDurationLastMs+=Date.now()-g,y.playback.rebufferDurationSegmentTotalMs+=Date.now()-g))},onPlayhead:function(e){if(!C){var t=e.data-M;1>t&&t>0&&(R+=Math.floor(1e3*t)),M=e.data}},onPlayerState:function(e){C=e.data===c.SEEKING},contentStarted:function(){p(),v.on(s.PLAYHEAD_UPDATE,this.onPlayhead),v.on(s.STATE_CHANGE,this.onPlayerState),this.triggerHeartbeat(),y.phase=l.PLAYBACK_CONTINUE},renditionChange:function(e,t){var n=L[t];i.info("rendition changed to: "+n.bitrate),t>e?(y.playback.upshiftsLast++,y.playback.upshiftsSegmentTotal++):(y.playback.downshiftsLast++,y.playback.downshiftsSegmentTotal++),n.bitrate<b&&(b=n.bitrate),n.bitrate>T&&(T=n.bitrate)},destroy:function(){v=null}}}},function(e,t){e.exports={CONFIG:"config",FEED:"feed",MEDIAGEN:"mediagen",ADS:"ads",OTHER:"other",LOAD_CONTENT:"loadContent",PLAYBACK_START:"playbackStart",PLAYBACK_CONTINUE:"playbackContinue",TVEAUTH:"tveauth"}},function(e,t){e.exports={MIDROLL:"videoMidroll",PLAYBACK:"videoPlayback",VIDEO_START_TIME:"videoStartTime",ADS_STARTED:"videoAdsStarted",ERROR:"videoError"}},function(e,t){e.exports=function(){return{adServer:null,networkId:null,profileId:null,siteSectionId:null,preloadAdManifest:null,campaignId:null,containsVpaid:null,containsVast:null,containsThirdParty:null,adBreak:null}}},function(e,t,n){var i=n(4).window,r=/.*mtvnservices-d\.mtvi\.com/,a=/.*mtvnservices-q\.mtvi\.com/,o="LIVE";r.test(document.domain)?o="DEV":a.test(document.domain)&&(o="QA"),e.exports={PMT_PRODUCTION:"//media.mtvnservices.com/pmt/e1/access/",PMT_STAGING:"//media.mtvnservices-q.mtvi.com/pmt/e1/access/",PMT_CONFIG:"index.html?uri=",PMT_PLACEHOLDER:"placeholder.html?uri=",PMT_CONFIG_TYPE:"&configtype=edge",DEFAULT_FORMAT:"json",DEFAULT_METHOD:"hls",DEFAULT_DELIVERY_METHOD:"5",getMediaGenUrl:function(e,t){var n=e.configModel.config;return t=this.removeParam(t,"device"),t=this.appendParam(t,"format",this.DEFAULT_FORMAT),t=this.appendParam(t,"acceptMethods",this.DEFAULT_METHOD),n.updatedHlsDelivery&&(t=this.appendParam(t,"deliveryMethodVersion",this.DEFAULT_DELIVERY_METHOD)),e.playlistModel.isSeamlessEnabled&&(t=this.appendParam(t,"SMCRuuids",this.getSegmentUuids(e))),e.configModel.runTimeConfig.usedMediaGenUrl=t,this.fixProtocol(t)},getMediaGenUrlForBeacons:function(e){var t=e.configModel.config,n=e.configModel.runTimeConfig.usedMediaGenUrl||t.mediaGen;return e.playlistModel.isSeamlessEnabled&&(n=t.seamlessMediaGen),this.fixProtocol(n)},getConfigUrl:function(e,t,n){var i;return e.configModel.config.configUrl?i=e.configModel.config.configUrl:(i=this.getPmtServiceUrl(e)+this.PMT_CONFIG+t+this.PMT_CONFIG_TYPE,n&&(i+="&ref="+n)),this.fixProtocol(i)},fixProtocol:function(e){if("string"!=typeof e)return e;var t=i.location.protocol;return e=e.replace(/^\/\//,t+"//"),"https:"===t&&(e=e.replace(/^https?:/,"https:")),e},getPmtServiceUrl:function(e){return e.configModel.config.useStaging?this.PMT_STAGING:this.PMT_PRODUCTION},getEnvironment:function(){return o},appendParam:function(e,t,n){var i=new RegExp("(\\?|\\&)"+t+"=.*?(?=(&|$))"),r=/\?.+$/,a=e;return a=i.test(e)?e.replace(i,"$1"+t+"="+n):r.test(e)?e+"&"+t+"="+n:e+"?"+t+"="+n},removeParam:function(e,t){var n=new RegExp("([?&])"+t+"(=[^&]*)?(&|$)","g");return e.replace(n,"$1").replace(/[?&]$/,"")},getSegmentUuids:function(e){var t=e.configModel.config.feed.items;return t?t.map(function(e){return e.rss.guid.split(":").pop()}).join():null}}},function(e,t,n){var i=n(2).getLogger("megabeacon-sender"),r=n(33),a=n(34),o=n(31),s=n(37),l={DEV:"vidperf-dev",QA:"vidperf-qa",LIVE:"vidperf"},d=l[o.getEnvironment()],u="https://mb.mtvnservices.com/data/collect/v1/?__t="+d+"&__mb_addHeader=true",c={send:function(e,t){var n={events:[{client:"edgeplayer",beaconType:t,beaconVersion:r[t],data:e}]},o=s(n,t);o.valid?i.debug("Validation succeeded"):o.errors.forEach(function(e){i.warn("Validation error: "+e,e.instance)});var l=new a({url:u,type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify(n)});i.debug("Sending beacon",t),l.send().then(function(e){"success"===e.status?i.debug("Beacon has been successfully sent"):i.error("Beacon has failed",e)}).catch(function(e){i.error("Beacon has failed",e)})}};e.exports=c},function(e,t){e.exports={videoMidroll:"0.1.0",videoPlayback:"0.1.4",videoStartTime:"1.1.4",videoAdsStarted:"0.2.0",videoError:"0.1.1"}},function(e,t,n){var i=n(2).getLogger("base-loader"),r=n(5),a=n(35),o=n(36),s={ABORT:"BaseLoaderRequestAbortError",TIMEOUT:"BaseLoaderTimeoutError",REQUEST:"BaseLoaderRequestError",PARSE:"BaseLoaderResponseParsingError"},l=o.extend({constructor:function(e){i.debug("BaseLoader",e);var t={timings:e.timings};e.timeout instanceof a&&(t.timeout=e.timeout,e.timeout=void 0),o.call(this,t),this._ajaxSettings=e},_execute:function(){r.ajax(r.extend({success:this._onSuccess.bind(this),error:this._onError.bind(this)},this._ajaxSettings))},_onSuccess:function(){this.resolve.apply(this,arguments)},_onError:function(e,t,n){i.debug("AJAX error",t,n,e),n=null!==n&&void 0!==n?". Cause: "+n:"";var r;switch(t){case"timeout":r=new Error("Request timeout exceeded"),r.name=s.TIMEOUT;break;case"parsererror":r=new Error("Parsing error"+n),r.name=s.PARSE;break;case"abort":r=new Error("Request aborted"+n),r.name=s.ABORT;break;default:r=new Error("Request error"+n),r.name=s.REQUEST,r.httpStatusCode=e.status}r.xhr=e,r.url=this._ajaxSettings.url,this.reject(r)}});l.prototype.send=l.prototype.get,l.prototype.load=l.prototype.get,l.ERRORS=s,e.exports=l},function(e,t,n){var i=n(2).getLogger("timeout-promise"),r=n(4).window,a=r.Promise||n(19),o=n(3),s={TIMEOUT:"TimeoutPromiseError",INITIALIZATION:"TimeoutPromiseInitializationError"},l=function(e){var t,n,l,d=new a(function(e,t){n=e,l=t});if(this.start=function(){return e&&!t&&(i.debug("start",e),t=r.setTimeout(function(){var e=new Error("Operation timeout exceeded");e.name=s.TIMEOUT,l(e)},e)),d},this.stop=function(){return t&&(i.debug("stop",e),r.clearTimeout(t),e=void 0,t=void 0,n()),d},this.catch=d.catch.bind(d),void 0===e)n();else if(!o.isInteger(e)||0>=e){var u=new Error("Timeout value must be positive integer");u.name=s.INITIALIZATION,l(u)}else i.debug("created",e)};l.ERRORS=s,e.exports=l},function(e,t,n){var i=n(2).getLogger("base-receiver"),r=n(4).window,a=r.Promise||n(19),o=n(35),s=n(22).Model.extend,l=n(3),d={EXECUTED:"executed",RESOLVED:"resolved",REJECTED:"rejected"},u={INITIALIZATION:"BaseReceiverInitializationError"},c=function(e){var t=this;this._options=e||{},this.timings=this._options.timings||{};for(var n in this.timings)this.timings[n]=void 0;this._promise=new a(function(e,n){t.resolve=function(){e.apply(null,arguments),this._finalize(d.RESOLVED)},t.reject=function(e){this.timings[d.EXECUTED]||e.name!==Error.prototype.name||(e.name=u.INITIALIZATION),n.apply(null,arguments),this._finalize(d.REJECTED)}}),this._options.timeout instanceof o?this.timeout=this._options.timeout:(this.timeout=new o(this._options.timeout),this.timeout.catch(this.reject.bind(this))),this._promise.catch(function(e){t.timings[d.EXECUTED]||i.debug("Rejected inside constructor",e)})};c.prototype={get:function(){return this.timings[d.EXECUTED]||this.timings[d.RESOLVED]||this.timings[d.REJECTED]||(this._execute.apply(this,arguments),this._setTiming(d.EXECUTED),this.timeout.start()),this._promise},_execute:function(){this.reject(new Error("._execute() method must be implemented"))},_setTiming:function(e){this.timings[e]=l.getTiming()},_finalize:function(e){this.timeout.stop(),this._setTiming(e)}},c.extend=s,c.STATES=d,c.ERRORS=u,e.exports=c},function(e,t){e.exports=function(){return{valid:!0}}},function(e,t,n){var i=n(2).getLogger("video-start-time-beacon-manager"),r=n(4).window,a=n(1),o=n(3),s=n(28),l=n(29),d=n(30),u=n(39),c=n(31),h=n(32);e.exports=function(e){function t(e){var t={durationMs:e.durationMs,isVpaid:e.isVpaid,isVast:e.isVast,isThirdParty:e.isThirdParty,adId:String(e.adId),creativeId:e.creativeId,creativeRenditionId:e.creativeRenditionId,desiredBitrate:e.desiredBitrateKbps,actualBitrate:e.actualBitrateKbps,renditionsMinKbps:e.renditionsMinKbps,renditionsMaxKbps:e.renditionsMaxKbps,renditionLevels:e.renditionCount};return o.preserveDefinedValues(t)}var n=e,f={},p=r.performance?r.performance.navigation:null;return f.ads=d(),f.device=u(),f.container={},f.urls={},f.phase=s.LOAD_CONTENT,{extendBeaconData:function(e){a.extend(f,e)},getBeaconData:function(){return f},canFire:function(){return!0},playerReady:function(){null!==p&&(f.container.navigationType=p.type,f.container.redirectCount=p.redirectCount),f.urls={configURL:n.configModel.configUrl}},playRequested:function(e){f.playId=e},adPlayRequested:function(){var e=n.adsModel.adBreakMetadata;f.ads.adBreak=[],a.extend(f.ads,o.preserveNullableValues({campaignId:e.campaignId,containsVpaid:e.containsVpaid,containsVast:e.containsVast,containsThirdParty:e.containsThirdParty})),a.each(e.ads,function(e){f.ads.adBreak.push(t(e))}),i.debug("adPlayRequested",f.ads)},adManifestRequested:function(){var e=n.adsModel.adManifestMetadata;a.isObject(e)&&(f.ads.adServer=e.adServer,f.ads.networkId=e.networkId,f.ads.profileId=e.profileId,f.ads.siteSectionId=e.siteSectionId,f.ads.preloadAdManifest=e.preloadAdManifest),o.preserveNullableValues(f.ads),i.debug("adManifestRequested",f.ads)},adBreakStarted:function(e){f.flags=o.preserveDefinedValues({bentoTimeout:e.bentoTimeout,bentoReadyAfterFeedLoaded:e.bentoReadyAfterFeedLoaded,waitedOnAdRequest:e.waitedOnAdRequest,waitedOnAdResponse:e.waitedOnAdResponse,waitedOnBentoReady:e.waitedOnBentoReady})},adStarted:function(){var e,r=n.performanceManager.getCurrentAd();a.each(f.ads.adBreak,function(n,i){n.adId===String(r.adId)&&(e=t(r),void 0===f.ads.adBreak[i]?f.ads.adBreak[i]=e:a.extend(f.ads.adBreak[i],e))}),i.debug("adStarted",f.ads.adBreak)},adSkipped:function(){void 0===f.ads.adSkippedCount&&(f.ads.adSkippedCount=0),f.ads.adSkippedCount++,i.debug("adSkipped",f.ads.adSkippedCount)},adBreakTimeout:function(e){i.debug("adBreakTimeout",e),f.ads.adTimeout=!0,f.ads.adTimeoutPhase=e},contentStarted:function(){var e=n.performanceManager.getMilestones();i.debug("contentStarted",e),f.milestones=o.preserveDefinedValues(e),f.urls.mediaGenURL=c.getMediaGenUrlForBeacons(n),void 0!==n.adsModel&&(f.ads.initialAdBlockerStatus=n.adsModel.initialAdBlockerStatus,f.ads.adBlockerDetected=n.adsModel.reportedAdBlockerStatus),"undefined"!=typeof r.Bento&&(f.ver.bentoVersion=r.Bento.version),this.sendVideoStartTimeBeacon(),this.disableBeacon()},sendVideoStartTimeBeacon:function(){f.urls.src=n.currentMetadata.src,i.debug("sendVideoStartTimeBeacon",f),h.send(f,l.VIDEO_START_TIME)},disableBeacon:function(){for(var e in this)this.hasOwnProperty(e)&&(this[e]=a.noop)}}}},function(e,t,n){var i=n(5),r=i.os.phone||i.os.tablet?"mobile":"desktop",a="unknown";i.browser.chrome?a="chrome":i.browser.firefox?a="firefox":i.browser.safari?a="safari":i.browser.ie&&(a="ie"),e.exports=function(){return{manufacturer:navigator.vendor,hardware:navigator.platform,deviceType:r,os:a,osVersion:i.browser.version}}},function(e,t,n){var i=n(2).getLogger("video-error-beacon-manager"),r=n(4).window,a=n(1),o=n(3),s=n(31),l=n(41),d=n(28),u=n(26),c=n(29),h=n(39),f=n(32);e.exports=function(e){var t,n=e,p=[],g=[],m={};return m.device=h(),m.content={},m.config={},{extendBeaconData:function(e){a.extend(m,e)},getBeaconData:function(){return m},_isSpammyError:function(e){var t=!1;return a.contains(p,e.url)||(p.push(e.url),t=!0),a.contains(g,e.message)||(g.push(e.message),t=!0),!t},fireError:function(e){var h,p={},g=n.adsModel.adManifestMetadata,v=n.adsModel.adBreakMetadata,y=n.adsModel.adMetadata;if("string"==typeof e.url&&e.url.length>0&&(h=e.url),h&&e.level<u.ERROR&&this._isSpammyError(e))return void i.debug("fireError: not sending duplicate non-fatal error: ",e);if(void 0===t&&(t=n.performanceManager.getBeaconManager()),a.extend(p,m),p.phase=void 0!==e.phase?e.phase:d.OTHER,p.sessionId=l.get(l.KEYS.PLAYBACK_SESSION),p.playId=t.getPlayId(),p.segmentPlayId=t.getSegmentPlayId(),p.mgid=t.getMgid(),p.contentId=n.configModel.config.uri,p.configUrl=n.configModel.configUrl,p.network.avgBandwidthKbps=n.performanceModel.avgBandwidthKbps,void 0!==n.configModel.config.feedWithQueryParams){p.content.mediaGenUrl=s.getMediaGenUrlForBeacons(n),p.config.type=n.configModel.config.type,p.config.contentType=p.config.contentType||n.configModel.config.contentType,p.config.useMediaGenFromFeed=n.configModel.config.useMediaGenFromFeed,p.config.group=n.configModel.config.group,p.config.isDesktop=!n.isMobilePlatform,p.config.jsHLSEnabled=!!n.configModel.config.jsHLSEnabled,p.config.autoPlay=n.configModel.config.autoPlay;var E=/^(.*\/\/[^\/]+)/,A=E.exec(n.configModel.config.feedWithQueryParams),b=n.configModel.config.feedWithQueryParams&&null!==A?E.exec(n.configModel.config.feedWithQueryParams)[1]:null;p.feed={},p.feed.feedUrl=n.configModel.config.feedWithQueryParams,p.feed.feedServer=b}var T=n.currentMetadata;(!a.isObject(T)||!a.isObject(T.rss)&&a.isObject(n.playlistMetadata)&&Array.isArray(n.playlistMetadata.items))&&(T=n.playlistMetadata.items[0]),void 0!==T&&void 0!==T.rss&&(p.segmentId=T.rss.guid,T.rss.group&&T.rss.group.category&&(p.feed.franchise=T.rss.group.category.franchise)),a.isObject(n.currentMetadata)&&(p.content.src=n.currentMetadata.src),p.ver={},p.ad={},p.ver.playerVersion=EdgePlayer.version,"undefined"!=typeof r.Bento&&(p.ver.bentoVersion=r.Bento.version),a.isObject(g)&&(p.ad.adServer=g.adServer,p.ad.networkId=g.networkId,p.ad.profileId=g.profileId,p.ad.siteSectionId=g.siteSectionId,p.ad.preloadAdManifest=g.preloadAdManifest),a.isObject(v)&&(p.ad.campaignId=v.campaignId,p.ad.containsVpaid=v.containsVpaid,p.ad.containsVast=v.containsVast,p.ad.containsThirdParty=v.containsThirdParty),a.isObject(y)&&(p.ad.isVpaid=y.isVpaid,p.ad.isVast=y.isVast,p.ad.isThirdParty=y.isThirdParty,p.ad.adId=String(y.adId),p.ad.creativeId=y.creativeId,p.ad.creativeRenditionId=y.creativeRenditionId),void 0!==n.adsModel&&(p.ad.adBlockerDetected=!!n.adsModel.adBlockerDetected),p.error={code:e.code,level:e.level,message:e.message},h&&(p.error.url=h),o.isInteger(e.httpStatusCode)&&(p.error.httpStatusCode=e.httpStatusCode),f.send(p,c.ERROR)}}}},function(e,t,n){var i=n(2).getLogger("user-settings-manager"),r=n(1),a=n(17),o=n(42),s=12096e5,l={NAME:"UserSettingsManager",KEYS:{AVG_BANDWIDTH:"avgBandwidth",CC_ON:"ccOn",CC_PREFS:"ccPrefs",VERIFIED_AGE:"verifiedAge",VOLUME:"volume",MUTED:"muted",PLAYBACK_SESSION:"playbackSession",WATCH_HISTORY:"watchHistory",VUID:"vuid",AD_BLOCKER_STATUS:"adBlocker"},storage:void 0,sessionStorage:void 0,userSettingsModel:void 0,initialize:function(){this.storage=a.checkStorage("localStorage"),this.sessionStorage=a.checkStorage("sessionStorage"),this.userSettingsModel=o.getInstance(),this.refreshFromStorage()},getStorage:function(e){var t=this.storage;return e&&(t=this.sessionStorage),t},getItem:function(e,t){return this.getStorage(t).getItem(this.prefix(e))},setItem:function(e,t,n){"string"!=typeof t&&(t=JSON.stringify(t)),i.trace("setItem",e,t),this.getStorage(n).setItem(this.prefix(e),t)},removeItem:function(e,t){this.getStorage(t).removeItem(this.prefix(e))},refreshFromStorage:function(){var e=this.getItem(this.KEYS.CC_PREFS),t=this.getItem(this.KEYS.WATCH_HISTORY),n=parseFloat(this.getItem(this.KEYS.VOLUME));if(r.isString(e)&&!r.isUndefined(e)&&"undefined"!==e&&(this.userSettingsModel.ccPrefs=JSON.parse(e)),r.isString(t)&&t)try{this.userSettingsModel.watchHistory=JSON.parse(t)}catch(e){i.error("watchHistory parsing error")}isNaN(n)||(this.userSettingsModel.volume=n),this.userSettingsModel.muted="true"===this.getItem(this.KEYS.MUTED),this.userSettingsModel.ccOn="true"===this.getItem(this.KEYS.CC_ON),this.userSettingsModel.playbackSession=this.getItem(this.KEYS.PLAYBACK_SESSION,!0),this.userSettingsModel[this.KEYS.VUID]=this.getItem(this.KEYS.VUID),this.userSettingsModel.adBlocker=null!==this.getItem(this.KEYS.AD_BLOCKER_STATUS)?"true"===this.getItem(this.KEYS.AD_BLOCKER_STATUS):null},get:function(e){return this.userSettingsModel[e]},set:function(e,t,n){i.trace("set",e,t),(this.userSettingsModel[e]!==t||r.isObject(t))&&(a.triggerOnAllPlayers(EdgePlayer.Events.SETTING_CHANGED,{setting:e,value:t}),this.userSettingsModel[e]=t,this.persist(e,t,n))},persist:function(e,t,n){this.setItem(e,t,n)},saveExpiringValue:function(e,t,n){void 0===n&&(n=s);var i={value:t,timestamp:(new Date).getTime()+n};return this.persist(e,JSON.stringify(i)),t},getExpiringValue:function(e){var t=JSON.parse(this.getItem(e));return t&&(new Date).getTime()<t.timestamp?t.value:void this.removeItem(e)},prefix:function(e){return"edgeplayer-"+e}};l.initialize(),e.exports=l},function(e,t,n){var i=n(43);e.exports={getInstance:function(){return{ccOn:!1,ccPrefs:{},volume:i.DEFAULT_VOLUME_LEVEL,muted:!1,adBlocker:null}}}},function(e,t,n){var i=n(44);e.exports={FLASH_CALLBACKS_OBJECT_PREFIX:"_mtvnPlayerFlashGlobalCallbacks",FLASH_OBJECT_ID_PREFIX:"FlashVideo",DEFAULT_VOLUME_LEVEL:.7,CC_CUSTOMIZATION_OPTIONS:i,DEFAULT_CC_SETTINGS:{fontStyle:"monospacedSans",fontSize:"medium",fontColor:"white",fontOpacity:1,backgroundColor:"black",backgroundOpacity:.5,windowColor:"black",windowOpacity:0}}},function(e,t){e.exports={fontStyle:{monospaced:{label:"Monospaced Serif",css:"font-family: 'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace !important;"},proportional:{label:"Proportional Serif",css:"font-family: 'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif !important;"},monospacedSans:{label:"Monospaced Sans Serif",css:"font-family: 'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace !important;"},proportionalSans:{label:"Proportional Sans Serif",css:"font-family: 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif !important;"},casual:{label:"Casual",css:"font-family: 'Comic Sans MS', Impact, Handlee, fantasy !important;"},cursive:{label:"Cursive",css:"font-family: 'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', 'Segoe Script', cursive !important;"},smallCaps:{label:"Small Capitals",css:"font-family: 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif !important; font-variant: small-caps;"}},fontSize:{small:{label:"Small",css:"font-size: 75%;"},medium:{label:"Medium",css:"font-size: 100%;"},big:{label:"Big",css:"font-size: 150%;"},large:{label:"Large",css:"font-size: 200%;"}},color:{white:{css:"#fff"},black:{css:"#000"},red:{css:"#f00"},green:{css:"#0f0"},blue:{css:"#00f"},yellow:{css:"#ff0"},magenta:{css:"#f0f"},cyan:{css:"#0ff"}},opacity:[0,.25,.5,.75,1]}},function(e,t,n){var i=n(2).getLogger("video-midroll-beacon-manager"),r=n(4).window,a=n(1),o=n(3),s=n(29),l=n(30),d=n(39),u=n(31),c=n(32);e.exports=function(e){function t(e){var t={durationMs:e.durationMs,isVpaid:e.isVpaid,isVast:e.isVast,isThirdParty:e.isThirdParty,adId:String(e.adId),creativeId:e.creativeId,creativeRenditionId:e.creativeRenditionId,desiredBitrate:e.desiredBitrateKbps,actualBitrate:e.actualBitrateKbps,renditionsMinKbps:e.renditionsMinKbps,renditionsMaxKbps:e.renditionsMaxKbps,renditionLevels:e.renditionCount};return o.preserveDefinedValues(t)}var n=e,h={},f=!1;return h.ads=l(),h.device=d(),h.content={src:"",mediaGenUrl:""},{extendBeaconData:function(e){a.extend(h,e)},getBeaconData:function(){return h},playRequested:function(e){h.playId=e},adPlayRequested:function(){var e=n.adsModel.adBreakMetadata;h.ads.adBreak=[],a.extend(h.ads,o.preserveDefinedValues({campaignId:e.campaignId,containsVpaid:e.containsVpaid,containsVast:e.containsVast,containsThirdParty:e.containsThirdParty})),a.each(e.ads,function(e){h.ads.adBreak.push(t(e))}),i.debug("adPlayRequested",h.ads)},adManifestRequested:function(){var e=n.adsModel.adManifestMetadata;a.isObject(e)&&(h.ads.adServer=e.adServer,h.ads.networkId=e.networkId,h.ads.profileId=e.profileId,h.ads.siteSectionId=e.siteSectionId,h.ads.preloadAdManifest=e.preloadAdManifest),o.preserveDefinedValues(h.ads),i.debug("adManifestRequested",h.ads)},adBreakStarted:function(e){h.flags=o.preserveDefinedValues({bentoTimeout:e.bentoTimeout,bentoReadyAfterFeedLoaded:e.bentoReadyAfterFeedLoaded,waitedOnAdRequest:e.waitedOnAdRequest,waitedOnAdResponse:e.waitedOnAdResponse,waitedOnBentoReady:e.waitedOnBentoReady})},adStarted:function(){var e,r=n.performanceManager.getCurrentAd();a.each(h.ads.adBreak,function(n,i){n.adId===String(r.adId)&&(e=t(r),void 0===h.ads.adBreak[i]?h.ads.adBreak[i]=e:a.extend(h.ads.adBreak[i],e))}),i.debug("adStarted",h.ads.adBreak)},adSkipped:function(){void 0===h.ads.adSkippedCount&&(h.ads.adSkippedCount=0),h.ads.adSkippedCount++,f=!0,i.debug("adSkipped",h.ads.adSkippedCount)},adBreakTimeout:function(e){i.debug("adBreakTimeout",e),h.ads.adTimeout=!0,h.ads.adTimeoutPhase=e},adBreakEnded:function(){f=!0},contentStarted:function(e,t,a){if(f){f=!1,i.debug("contentStarted getMilestones");var s=n.performanceManager.getMilestones();i.debug("contentStarted",s),h.milestones=o.preserveDefinedValues(s),h.segmentPlayId=e,h.segmentId=n.getContentMetadata().rss.guid,h.previousSegmentPlayId=t,h.previousSegmentId=a,h.network.avgBandwidthKbps=n.performanceModel.avgBandwidthKbps,void 0!==n.adsModel&&(h.ads.adBlockerDetected=!!n.adsModel.adBlockerDetected),"undefined"!=typeof r.Bento&&(h.ver.bentoVersion=r.Bento.version),this.sendVideoMidrollBeacon(),h.ads.adSkippedCount=0}},sendVideoMidrollBeacon:function(){h.content.src=n.currentMetadata.src,h.content.mediaGenUrl=u.getMediaGenUrlForBeacons(n),i.debug("sendVideoMidrollBeacon",h),c.send(h,s.MIDROLL)}}}},function(e,t,n){var i=n(2).getLogger("video-ads-started-beacon-manager"),r=n(4).window,a=n(1),o=n(3),s=n(29),l=n(30),d=n(39),u=n(31),c=n(32);e.exports=function(e){function t(e){var t={durationMs:e.durationMs,isVpaid:e.isVpaid,isVast:e.isVast,isThirdParty:e.isThirdParty,adId:String(e.adId),creativeId:e.creativeId,creativeRenditionId:e.creativeRenditionId,desiredBitrate:e.desiredBitrateKbps,actualBitrate:e.actualBitrateKbps,renditionsMinKbps:e.renditionsMinKbps,renditionsMaxKbps:e.renditionsMaxKbps,renditionLevels:e.renditionCount};return o.preserveDefinedValues(t)}var n=e,h={},f=!1;return h.ads=l(),h.device=d(),h.content={},h.milestones={},{extendBeaconData:function(e){a.extend(h,e)},getBeaconData:function(){return h},playRequested:function(e){h.playId=e},adPlayRequested:function(){var e=n.adsModel.adBreakMetadata;h.ads.adBreak=[],a.extend(h.ads,o.preserveDefinedValues({campaignId:e.campaignId,containsVpaid:e.containsVpaid,containsVast:e.containsVast,containsThirdParty:e.containsThirdParty})),a.each(e.ads,function(e){h.ads.adBreak.push(t(e))})},adManifestRequested:function(){var e=n.adsModel.adManifestMetadata;a.isObject(e)&&(h.ads.adServer=e.adServer,h.ads.networkId=e.networkId,h.ads.profileId=e.profileId,h.ads.siteSectionId=e.siteSectionId,h.ads.preloadAdManifest=e.preloadAdManifest),o.preserveDefinedValues(h.ads)},adSkipped:function(){void 0===h.ads.adSkippedCount&&(h.ads.adSkippedCount=0),h.ads.adSkippedCount++},adStarted:function(e){if(!f){f=!0;var i,s=n.performanceManager.getMilestones(),l=n.performanceManager.getCurrentAd();a.each(h.ads.adBreak,function(e,n){e.adId===String(l.adId)&&(i=t(l),void 0===h.ads.adBreak[n]?h.ads.adBreak[n]=i:a.extend(h.ads.adBreak[n],i))}),void 0!==n.adsModel&&(h.ads.adBlockerDetected=!!n.adsModel.adBlockerDetected),h.milestones=o.preserveDefinedValues(s),h.segmentPlayId=e,h.segmentId=n.playlistModel.currentItem.rss.guid,
h.content.src=n.currentMetadata.src,h.content.mediaGenUrl=u.getMediaGenUrlForBeacons(n),h.network.avgBandwidthKbps=n.performanceModel.avgBandwidthKbps,"undefined"!=typeof r.Bento&&(h.ver.bentoVersion=r.Bento.version),this.sendVideoAdsStartedBeacon(),h.ads.adSkippedCount=0}},sendVideoAdsStartedBeacon:function(){i.debug("sendVideoAdsStartedBeacon",h),c.send(h,s.ADS_STARTED)}}}},function(e,t){e.exports=function(){var e,t,n,i=1e3,r=[],a=0;return{startMonitor:function(n){isNaN(n)&&(n=i);var r=this,a=function(n){n.performUpdate(),e=Date.now()+i,clearTimeout(t),t=window.setTimeout(a,i,n)};t=window.setTimeout(a,n,r),e=Date.now()+i},performUpdate:function(){a++,r.forEach(function(e){e(a)})},pauseMonitor:function(){void 0!==t&&(n=e-Date.now(),clearTimeout(t))},resumeMonitor:function(){this.startMonitor(n)},stopMonitor:function(){void 0!==t&&clearTimeout(t)},registerCallback:function(e){r.push(e)},getCurrentTick:function(){return a}}}},function(e,t,n){var i=n(2).getLogger("vuid-receiver"),r=n(3),a=n(36),o=n(34),s=n(41),l=n(31),d=n(49),u={DEV:"http://vip-auth-qa.elasticbeanstalk.com",QA:"http://vip-auth-qa.elasticbeanstalk.com",LIVE:"https://auth.id.viacom.com"},c=u[l.getEnvironment()],h=2e3,f=a.extend({constructor:function(e,t){return a.call(this),"string"!=typeof e||"string"!=typeof t?void this.reject(new Error("brandId and appId must be provided in order to request VUID")):(this._brandId=e,this._appId=t,void(this.loaderTimings={}))},_loadVuid:function(e,t){var n=new o({url:c+"/v1/auth/gen?appId="+encodeURIComponent(this._brandId+"-"+this._appId),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({userProvidedData:{idType:e,idValue:t}}),timeout:h,timings:this.loaderTimings});return i.debug("VUID requested",this._brandId,this._appId,e,t),n.load()},_execute:function(){function e(e){return a._loadVuid("mcvid",e)}function t(e){return i.debug("MID receiver rejected.",e),a._loadVuid("webUuid",r.generateId())}var n=s.get(s.KEYS.VUID);if("string"==typeof n)return i.debug("VUID is already stored",n),void this.resolve(n);var a=this;d.get().then(e,t).then(function(e){var t=e.brandProfileId;i.debug("VUID received",t),s.set(s.KEYS.VUID,t),a.resolve(t)}).catch(function(e){a.reject(e)})}});e.exports=f},function(e,t,n){var i=n(2).getLogger("mid-receiver"),r=n(36),a=n(50),o=2e3,s=r.extend({constructor:function(){r.call(this,{timeout:o})},_execute:function(){var e=this;a.get().then(function(t){if("function"!=typeof t.getMarketingCloudVisitorID){var n="Adobe Marketing Cloud Visitor ID is not supported by Bento prior 1.9.3 version";return void e.reject(new Error(n))}var r=t.getMarketingCloudVisitorID();i.debug("Adobe Marketing Cloud Visitor ID received",r),"string"==typeof r?e.resolve(r):e.reject(new Error("Adobe Marketing Cloud Visitor ID is invalid"))}).catch(function(t){i.debug("Bento receiver rejected.",t),e.reject(new Error("Bento is not available"))})}});e.exports=new s},function(e,t,n){var i=n(4).window,r=n(36),a=r.extend({_execute:function(){"object"==typeof i.Bento&&this.resolve(i.Bento)}});e.exports=new a},function(e,t,n){var i=n(2).getLogger("timeout-manager"),r=n(52),a=n(28),o=n(12);e.exports=function(e){function t(){c&&(clearTimeout(c),c=null)}function n(){h&&(clearTimeout(h),h=null)}function s(){return S.isMobilePlatform?"mobile":"desktop"}function l(e){i.warn("adBreakTimeout: "+e);var l=R[e][s()],d=S.config.adTimeouts.softAdFailover,u="undefined"!=typeof Bento&&Bento.supports&&Bento.supports.edgeAdTimeoutFailoverEvent;"number"==typeof S.config.adTimeouts[e]&&(l=S.config.adTimeouts[e]),n(),t(),S.performanceManager.registerTimeoutError({phase:a.ADS,code:d?o.AD_REQUEST_TIMEOUT:o.AD_REQUEST_HARD_TIMEOUT,message:"Ad timeout waiting on: "+e}),S.performanceManager.adBreakTimeout(e),e===EdgePlayer.Timeouts.AD_BREAK_START||e===EdgePlayer.Timeouts.AGGREGATE||!d&&u?(i.debug("adBreakTimeout: failover on "+e),r.adBreakTimeout(S,e,l)):i.debug("adBreakTimeout: waiting for ads")}function d(e){i.debug("setAdBreakTimeout: "+e);var n=R[e][s()];"number"==typeof S.config.adTimeouts[e]&&(n=S.config.adTimeouts[e]),t(),c=setTimeout(l,n,e)}function u(){n();var e=R[EdgePlayer.Timeouts.AGGREGATE][s()];"number"==typeof S.config.adTimeouts[EdgePlayer.Timeouts.AGGREGATE]&&(e=S.config.adTimeouts[EdgePlayer.Timeouts.AGGREGATE]),h=setTimeout(l,e,EdgePlayer.Timeouts.AGGREGATE)}var c,h,f=1e4,p=11e3,g=3e3,m=3e3,v=4e3,y=4e3,E=3e3,A=5e3,b=2500,T=4e3,S=e,R={};return R[EdgePlayer.Timeouts.AGGREGATE]={desktop:f,mobile:p},R[EdgePlayer.Timeouts.AD_BREAK_START]={desktop:g,mobile:m},R[EdgePlayer.Timeouts.AD_PLAY_REQUEST]={desktop:v,mobile:y},R[EdgePlayer.Timeouts.AD_STARTED]={desktop:E,mobile:A},R[EdgePlayer.Timeouts.INTRA_AD]={desktop:b,mobile:T},{waitingForAdBreakStarted:function(){i.debug("waitingForAdBreakStarted"),d(EdgePlayer.Timeouts.AD_BREAK_START),u()},adBreakStarted:function(){i.debug("adBreakStarted"),d(EdgePlayer.Timeouts.AD_PLAY_REQUEST)},adPlayRequest:function(){i.debug("adPlayRequest"),d(EdgePlayer.Timeouts.AD_STARTED)},adStarted:function(){i.debug("adStarted"),t(),n()},adEnded:function(){i.debug("adEnded"),d(EdgePlayer.Timeouts.INTRA_AD)},adSkipped:function(){i.debug("adSkipped"),d(EdgePlayer.Timeouts.AD_STARTED)},adBreakEnded:function(){i.debug("adBreakEnded"),t(),n()},adBreakTerminated:function(){i.debug("adBreakTerminated"),t(),n()},adBreakSkipped:function(){i.debug("adBreakSkipped"),t(),n()},adBlockerDetected:function(){i.debug("adBlockerDetected"),t(),n()}}}},function(e,t,n){var i=n(2).getLogger("ads-manager"),r=n(1),a=n(3),o=n(6),s=n(15),l={onConfigLoaded:function(e){var t=e.target;(t.configModel.config.scoundrelMode||t.playlistModel.isSeamlessEnabled)&&(t.adsModel.skipAdRequests=!0,t.adsModel.adCuePoints=[]),this.monitorCuePoints(t)},getAdBreakType:function(e,t){var n;return n=void 0!==t?s.MID_ROLL:e.adsModel.isPostRoll?s.POST_ROLL:s.PRE_ROLL},bentoReady:function(e){i.info("bentoReady"),e.playbackModel.waitingForBento&&(e.playbackModel.waitingForBento=!1,e.playbackManager.play(e))},onPlayRequest:function(e){return e.adsModel.isReady?void(e.adsModel.isAdBreak?(i.info("playRequest during adBreak"),e.trigger(o.BENTO_RESUME_REQUESTED)):this.requestAd(e)):(i.info("play: Bento's not ready yet"),e.playbackModel.waitingForBento=!0,void e.timeoutManager.waitingForAdBreakStarted())},requestAd:function(e,t){if(e.adsModel.isReady){if(e.adsModel.skipAdRequests)return void e.performanceManager.adBreakSkipped();e.adsModel.adBreakType=this.getAdBreakType(e,t),i.info("requesting adBreakType: "+e.adsModel.adBreakType+" cuePointIndex: "+t),e.performanceManager.waitingForAdBreak(e.adsModel.isPostRoll),e.timeoutManager.waitingForAdBreakStarted(),e.adsModel.waitingForAdBreak=!0,e.playbackModel.pausedBeforeAdBreak=e.isPaused(),e.trigger(o.BENTO_WAITING_FOR_AD_BREAK,{adBreakType:e.adsModel.adBreakType,cuePointIndex:t,currentIndex:e.playlistModel.currentIndex,hasContentEnd:e.adsModel.isPostRoll})}},adBreakStarted:function(e){i.info("adBreakStarted"),e.adsModel.isAdBreak=!0,e.adsModel.waitingForAdBreak=!1,e.trigger(o.BENTO_AD_BREAK_STARTED,e.adsModel.adBreakMetadata),this.setVideoEventsForAds(e)},adBreakEnded:function(e){i.info("adBreakEnded"),this.endAdBreak(e,!0),this.resetAdMetadata(e)},endAdBreak:function(e,t){var n=e.playbackManager;e.adsModel.isAdBreak=!1,e.playbackModel.renderer.resetEvents(),e.trigger(o.BENTO_AD_BREAK_ENDED),e.adsModel.isPostRoll?this.postRollEnded(e):t?n.playItem(e):n.play(e)},skipAdBreak:function(e){i.info("adBreakSkipped"),e.adsModel.waitingForAdBreak=!1,e.adsModel.isPostRoll?this.postRollEnded(e):e.playbackManager.playItem(e)},setAdManifestMetadata:function(e,t){t=r.extend({},t),a.isNumber(t.networkId)&&(t.networkId=String(t.networkId)),e.adsModel.adManifestMetadata=t},setAdBreakMetadata:function(e,t){t=r.extend({},t),Array.isArray(t.ads)&&t.ads.length>0&&this.setAdMetadata(e,t.ads[0]),e.adsModel.adBreakMetadata=t},setAdMetadata:function(e,t){t=r.extend({},t),e.adsModel.adMetadata=t},resetAdMetadata:function(e){e.adsModel.adMetadata=null},adStarted:function(e,t){this.setAdMetadata(e,t),e.trigger(o.BENTO_AD_STARTED,e.adsModel.adMetadata),e.adsModel.adMetadata&&(e.resetAdMetadata(),e.trigger(o.METADATA,e.currentMetadata))},adPaused:function(e){e.trigger(o.BENTO_AD_PAUSED)},adResumed:function(e){e.trigger(o.BENTO_AD_RESUMED)},adBreakTerminated:function(e){i.info("adBreakTerminated"),this.endAdBreak(e),this.resetAdMetadata(e)},setVideoEventsForAds:function(e){e.playbackModel.renderer.activeEvents=["timeupdate","click","playing","pause"],e.playbackModel.renderer.undelegateEvents(),e.playbackModel.renderer.delegateEvents()},adBreakTimeout:function(e,t,n){i.warn("adBreakTimeout"),e.playbackModel.waitingForBento=!1,e.adsModel.waitingForAdBreak=!1,e.trigger(o.BENTO_AD_BREAK_TIMEOUT,{phase:t,delay:n}),this.endAdBreak(e,!0)},pause:function(e){i.info("pause"),e.trigger(o.BENTO_PAUSE_REQUESTED)},onMediaEnd:function(e){i.info("onMediaEnd"),e.playbackModel.skipPostRoll?(e.playbackModel.skipPostRoll=!1,e.playbackManager.play(e)):r.defer(this.checkForPostRoll.bind(this),e)},onSeek:function(e,t){var n,i=e.adsModel.adCuePoints,a=this;e.adsModel.adCuePointMonitoring&&(e.adsModel.adCuePointMonitoring=!1),e.playlistModel.monolithicFullEpisode&&r.isArray(i)&&i.length>0&&r.some(i,function(i,r){if(i.time>e.playhead&&i.time<t||i.time<e.playhead&&i.time>t){if(n=r,e.playhead>t)return!0}else t<i.time&&t>i.time-2&&a.onOffsetCuePointReached(e,i,r)}),void 0!==n&&this.requestAd(e,n)},checkForPostRoll:function(e){e.adsModel.isAdBreak||(e.adsModel.skipAdRequests||!e.adsModel.isReady?(i.info("skip postroll"),e.playbackModel.skipPostRoll=!1,this.postRollEnded(e)):(e.adsModel.isPostRoll=!0,this.requestAd(e)))},postRollEnded:function(e){i.info("postRollEnded"),e.adsModel.isPostRoll=!1,e.playbackModel.seekedToEnd?e.playbackManager.endPlaylist(e):(i.info("play next and don't wait for freewheel"),e.playbackManager.playNext(e))},monitorCuePoints:function(e){var t,n=e.adsModel.adCuePoints,a=this;e.playlistModel.monolithicFullEpisode&&r.isArray(n)&&n.length>0&&r.each(n,function(n,r){t=Math.floor(n.time-2),i.info("monitor adCuePoints",o.PLAYHEAD_UPDATE+":"+t),e.on(o.PLAYHEAD_UPDATE+":"+t,function(){a.onOffsetCuePointReached(e,n,r)})})},onOffsetCuePointReached:function(e,t,n){i.info("onOffsetCuePointReached");var r=this;e.adsModel.adCuePointMonitoring=!0,e.on(o.PLAYHEAD_UPDATE,function a(s){i.debug("monitoring playhead for cuePoint",s.data);var l=s.data;t.time>=l-.1&&t.time<=l+1&&(i.info("adCuePoint reached"),r.requestAd(e,n),e.adsModel.adCuePointMonitoring=!1),e.adsModel.adCuePointMonitoring||e.off(o.PLAYHEAD_UPDATE,a)})}};r.bindAll(l,"onConfigLoaded"),e.exports=l},function(e,t,n){var i=n(2).getLogger("config-manager"),r=n(4).window,a=n(5),o=n(3),s=n(6),l=n(12),d=n(28),u=n(26),c=n(31),h=n(34),f=n(54),p=n(55),g=n(41),m=n(56);e.exports={loadConfig:function(e){var t=e.configModel;t.configUrl=c.getConfigUrl(e,t.config.uri,t.config.ref);var n=new f({url:t.configUrl});e.performanceManager.registerTimings("config",n.timings),e.performanceManager.registerTimeout(n.timeout,{phase:d.CONFIG,url:t.configUrl}),i.info("Requesting Config:",t.configUrl),n.load().then(this.configLoaded.bind(this,e),this.onError.bind(this,e))},onError:function(e,t){var n={code:l.REQUEST_ERROR,phase:d.CONFIG,level:u.ERROR,message:t.message,httpStatusCode:t.httpStatusCode,receivedData:t.receivedData,url:t.url};t.name===f.ERRORS.ERROR_MESSAGE?(n.imageMessage=t.imageMessage,n.code=l.CONFIG_ERROR_MESSAGE):t.name===h.ERRORS.PARSE&&(n.code=l.PARSE_ERROR),e.performanceManager.fireErrorBeacon(n)},configLoaded:function(e,t){var r=n(62),a=n(79),o=n(80),l=n(82),d=n(87),u=e.configModel;u.pmtConfig=t,this.updateConfig(e,u),i.info("Config Loaded:",e.id,u.config),u.config.useSegmentedScrubber?(i.debug("Using segmented playbackManager"),e.playbackManager=d):(i.debug("Using monolithic playbackManager"),e.playbackManager=l),u.config.placeholderImageUrl?e.guiModel.placeholderImageUrl=u.config.placeholderImageUrl:u.config.feed&&u.config.feed.image&&u.config.feed.image.url&&(e.guiModel.placeholderImageUrl=u.config.feed.image.url),r.createRenderer(e),a(e),o.onConfigLoaded(e),e.playbackManager.onConfigLoaded(e),this.loadPlaylistItems(e),u.configHasLoaded=!0,e.trigger(s.CONFIG_LOADED,{target:e,data:e.config})},loadPlaylistItems:function(e){o.isInteger(e.configModel.runTimeConfig.startIndex)?e.playlistModel.currentIndex=e.configModel.runTimeConfig.startIndex:(e.playlistModel.currentIndex=e.configModel.config.startIndex,e.configModel.runTimeConfig.startTime=void 0),m.onFeed(e)},updateConfig:function(e){var t=e.configModel,n=!1;if(t.configHasLoaded)throw new Error("Config has already been finalized");t.config=a.extend(!0,{},t.defaultConfig,t.pmtConfig,t.elementConfig,t.pageConfig);var o=p(),s=o.getTestConfig(t.config);if(e.performanceManager.setSplitTestNode(o.createBeaconNode(s)),t.config=a.extend(!0,t.config,s,t.runTimeConfig),void 0!==t.pageConfig.useSegmentedScrubber?n=t.pageConfig.useSegmentedScrubber:"episode"===t.config.contentType&&(n=!0),e.playlistModel.monolithicFullEpisode&&(n=!0),t.config.useSegmentedScrubber=n,t.config.ssid||(e.isMobilePlatform?t.config.ssid=t.config.freewheelSiteSection:t.config.ssid=t.config.freewheelFlashSiteSection),t.config.dai||(t.config.dai={euid:g.get(g.KEYS.PLAYBACK_SESSION),ssus:!0}),(t.config.forceMute||g.get(g.KEYS.MUTED))&&(e.playbackModel.isMuted=!0),a.browser.safari||e.isMobilePlatform&&!t.config.jsHLSEnabledAndroid)i.info("using Html5 player"),t.config.jsHLSEnabled=!1,t.config.flashHLSEnabled=!1;else if(t.config.jsHLSEnabled||t.config.jsHLSEnabledAndroid){var l=r.MediaSource||r.WebKitMediaSource,d=l&&"function"==typeof l.isTypeSupported&&l.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');t.config.jsHLSEnabled=!0,d||(i.info("Media Source Extensions API is not supported. Falling back to flash polyfill or native html5"),t.config.jsHLSEnabled=!1,t.config.flashHLSEnabled=!e.isMobilePlatform)}e.isMobilePlatform&&Array.isArray(t.config.share)&&(t.config.share=t.config.share.filter(function(e){return"embed"!==e.id})),a.os.iphone?(parseInt(a.os.version.match(/^(\d+)\..+$/)[1])<10&&(t.config.useQuickTimePlayerOnIphone=!0),t.config.useQuickTimePlayerOnIphone&&(t.config.useNativeControls=!0)):t.config.useQuickTimePlayerOnIphone=!1,e.config=a.extend(!0,{},t.config)}}},function(e,t,n){var i=n(2).getLogger("config-loader"),r=n(35),a=n(34),o=2e3,s={ERROR_MESSAGE:"ConfigLoaderErrorMessageError"},l=a.extend({constructor:function(e){i.debug("ConfigLoader",e),e.timeout=new r(o),a.call(this,e)},_onSuccess:function(e){i.debug("config loaded",e);var t;(void 0!==e.errorSlateURL||void 0!==e.errorSlateMessage)&&(e.errorSlateURL?(t=new Error(e.errorSlateMessage||"Config error image"),t.imageMessage=e.errorSlateURL):e.errorSlateMessage&&(t=new Error(e.errorSlateMessage)),t.name=s.ERROR_MESSAGE),t?(t.receivedData=e,t.url=this._ajaxSettings.url,this.reject(t)):a.prototype._onSuccess.apply(this,arguments)}});l.ERRORS=s,e.exports=l},function(e,t,n){var i=n(2).getLogger("split-test-manager"),r=n(1);e.exports=function(){var e,t=function(e){return Math.random()<e/100};return{getTestConfig:function(n){if(void 0===n||void 0===n.splitTests||n==={})return{};e=n.splitTests;var a=e.reduce(function(e,n){var a=t(n.bias);if(a)if(i.debug("Including split test: "+n.testId),r.isArray(n.configProperties))for(var o=0;o<n.configProperties.length;o++)for(var s in n.configProperties[o])e[s]=n.configProperties[o][s];else if(r.isObject(n.configProperties))for(var s in n.configProperties)e[s]=n.configProperties[s];return void 0!==n&&void 0!==n.testId&&(e[n.testId]=a),e},{});return a},createBeaconNode:function(t){if(void 0===e)return{};var n=e.map(function(e){var n=[];if(r.isArray(e.configProperties))n=e.configProperties.map(function(e){for(var t in e)e[t]=e[t].toString();return e});else if(r.isObject(e.configProperties))for(var i in e.configProperties){var a={};a[i]=e.configProperties[i].toString(),n.push(a)}return{testId:e.testId,configProperties:n,enabled:t[e.testId]}});return{splitTests:n}}}}},function(e,t,n){var i=n(2).getLogger("playlist-manager"),r=n(4).window,a=r.Promise||n(19),o=n(1),s=n(5),l=n(6),d=n(12),u=n(28),c=n(26),h=n(31),f=n(57),p=n(22),g=n(34),m=n(58),v=n(3),y={onFeed:function(e){var t=e.configModel.config.feed;i.info("onFeed",t),e.performanceManager.parsingFeed();var n;if(!o.isObject(t)||o.isEmpty(t)?n=new Error("No feed in config"):(o.isEmpty(t.items)||o.isEmpty(t.items[0]))&&(n=new Error("No items in feed")),n)throw e.performanceManager.fireErrorBeacon({code:d.PARSE_ERROR,phase:u.FEED,level:c.ERROR,message:n.message}),n;this.processMetadata(e,e.configModel.config),e.playlistModel.metadata=e.configModel.config.feed,e.config.feed=s.extend(!0,{},e.configModel.config.feed),e.playlistMetadata=s.extend(!0,{},e.playlistModel.metadata),e.currentMetadata=s.extend(!0,{},e.getContentMetadata()),e.performanceManager.parsedFeed(),i.info("playlist is ready"),e.trigger(l.PLAYLIST_READY),(e.adsModel.adBlockerDetected&&e.configModel.config.seamlessCounterStrike&&e.configModel.config.seamlessMediaGen||e.configModel.config.seamlessEnabled)&&(e.playlistModel.isSeamlessEnabled=!0),e.playlistModel.isSeamlessEnabled&&(e.playlistMetadata.items=e.playlistMetadata.items.slice(0,1))},loadItem:function(e,t){return i.debug("loadItem",e.id,t),this.preloadItem(e,t).then(function(t){return e.playlistModel.currentItem=t,e.currentMetadata=s.extend(!0,{},t),e.trigger(l.PLAYLIST_ITEM_READY,t),t},function(e){return a.reject(e)})},preloadItem:function(e,t){var n=this.getItemAt(e,t);if(!n.promise){var r=this.formulateMediaGen(e,n),o=this;n.promise=new a(function(t,a){var s;e.config.mediaGenAuthCheck&&(s={eventEmitter:e,mgid:n.rss.guid}),i.debug("preloadItem",e.id,n,s);var l=new m(r,s);l.get().then(function(e){n.mediaGen=e,n.src=e.rendition.src,n.ready=!0,i.debug("item ready",n),t(n)},function(t){t.url=r,a(o.onMediaGenError(e,t))}),e.performanceManager.registerTimings("mediaGen",l.loaderTimings),e.performanceManager.registerTimings("authToken",l.tveAuthTimings),e.performanceManager.registerTimeout(l.mediaGenTimeout,{phase:u.MEDIAGEN,url:r}),e.performanceManager.registerTimeout(l.tveAuthTimeout,{phase:u.TVEAUTH})})}return n.promise},formulateMediaGen:function(e,t){var n=e.config.mediaGen,r=t.rss.guid;return e.configModel.config.seamlessMediaGen&&e.playlistModel.isSeamlessEnabled?(e.playlistModel.loadedSeamlessMediaGen=!0,n=e.configModel.config.seamlessMediaGen,i.info("load SEAMLESS mediaGen",n),e.trigger(l.SEAMLESS_MODE),"episode"===e.config.contentType&&(r=e.config.uri)):e.config.useMediaGenFromFeed?(n=t.rss.group.content,i.info("load mediaGen from feed",n)):i.info("load mediaGen from config",n),n=h.getMediaGenUrl(e,n),n=f.process(n,f.buildTemplateData(e,t,{uri:r,franchise:t.rss.group.category.franchise}))},onMediaGenError:function(e,t){var n={code:d.REQUEST_ERROR,phase:u.MEDIAGEN,level:c.ERROR,message:t.message,httpStatusCode:t.httpStatusCode,url:t.url};return t.name===m.ERRORS.MEDIAGEN_ERROR?n.code=d.MEDIAGEN_ERROR_MESSAGE:t.name===g.ERRORS.PARSE&&(n.code=d.PARSE_ERROR),e.performanceManager.fireErrorBeacon(n),t},onIndexChange:function(e){e.trigger(l.INDEX_CHANGE,e.playlistModel.currentIndex)},setIndex:function(e,t){return t>e.playlistMetadata.items.length-1?!1:t!==e.playlistModel.currentIndex&&t>=0?(e.playlistModel.currentIndex=t,e.playlistModel.currentItem=e.playlistMetadata.items[t],this.onIndexChange(e),!0):!1},getItemAt:function(e,t){var n=e.playlistMetadata.items;if(0>t||t>n.length-1)throw new Error("Playlist index "+t+" is out of range [0-"+n.length+"]");return n[t]},getIndexByMgid:function(e,t){var n=-1,i=o.find(e.playlistMetadata.items,function(e){return n++,e.rss.guid===t});return void 0!==i?n:-1},getPrevious:function(e){return e.playlistModel.hasPrevious()?e.playlistMetadata.items[e.playlistModel.currentIndex-1]:void 0},getNext:function(e){return this.hasNext(e)?e.playlistMetadata.items[e.playlistModel.currentIndex+1]:void 0},previous:function(e){return this.setIndex(e,e.playlistModel.currentIndex-1)},next:function(e){return this.setIndex(e,e.playlistModel.currentIndex+1)},hasNext:function(e){return e.playlistModel.currentIndex<e.playlistMetadata.items.length-1},hasPrevious:function(e){return e.playlistModel.currentIndex>0},getIndexByPlayhead:function(e,t){var n=0,i=-1;return o.some(e.playlistMetadata.items,function(e,r){return t<=n+e.duration?(i=r,!0):void(n+=e.duration)}),i},validateAdCuePoints:function(e,t,n){function i(e){return!(!v.isNumber(e.time)||e.time<=0||e.time>n)}function r(e){return e.time}var a=o(t.filter(i)).uniq(r);return a.length!==t.length&&e.performanceManager.fireErrorBeacon({level:c.WARN,code:d.PARSE_ERROR,phase:u.FEED,message:"adCuePoints array contains invalid values: "+JSON.stringify(t)+" Full Duration: "+n}),a},setAdCuePoints:function(e,t){if(o.isArray(t.feed.items)){var n=t.feed.items[0],i=n.group||n.rss.group,r=i.category.adCuePoints;if(e.playlistModel.monolithicFullEpisode=!1,o.isArray(r))e.adsModel.adCuePoints=this.validateAdCuePoints(e,r,n.duration),"episode"===t.contentType&&(e.playlistModel.monolithicFullEpisode=!0);else{var a=0;e.adsModel.adCuePoints=o.map(t.feed.items,function(e){var t=e.duration+a;return a=t,{time:t,positionType:"break"}}).slice(0,-1)}}},processMetadata:function(e,t){void 0!==t&&void 0!==t.feed&&(this.setAdCuePoints(e,t),t.feed.items=o.map(t.feed.items,function(e,n){var i="",r={index:n,duration:e.duration,rss:{mediaGen:{}}};return o.extend(r.rss,e),i="playlist"!==t.contentType||t.useSegmentedScrubber?t.feed.title:e.title,r.artistName=r.rss.group.category.artist||"",r.mediaTitle=i,r}))}};o.extend(y,p.Events),e.exports=y},function(e,t,n){var i=n(1),r=function(){var e=function(e){return e.replace(/\{{1,}/g,"{{").replace(/\}{1,}/g,"}}").replace(/\{uri\./,"{uriParts.").replace(/\{{2,}/g,"{{data.")};return{INTERPOLATE:/\{\{(.+?)\}\}/g,process:function(t,n,a){return i.isString(t)?i.template(e(t),{interpolate:r.INTERPOLATE})({data:n}):(i(t).each(function(o,s){(!a||i.contains(a,s))&&i.isString(o)&&-1!==o.indexOf("{")&&(t[s]=i.template(e(o),{interpolate:r.INTERPOLATE})({data:n}))}),t)},buildTemplateData:function(e,t,n){var r=i.extend({},e.config,n),a=r.uri.split(":");return r.uriParts={namespace:a[3],id:a[4]},r.currentMetadata=t,r.metadata=e.currentMetadata?e.currentMetadata.rss:null,r.playlistMetadata=e.playlistMetadata,r.player=e,r.app={width:r.width,height:r.height},r}}}();e.exports=r},function(e,t,n){var i=n(2).getLogger("media-gen-receiver"),r=n(1),a=n(35),o=n(36),s=n(34),l=n(59),d=n(60),u=n(61),c={NOT_FOUND:"not_found",TVE_AUTH_FAILED:"auth_failed_tve"},h={TVE_AUTH_FAILED:"MediaGenReceiverTveAuthFailedError",MEDIAGEN_ERROR:"MediaGenReceiverMediaGenError"},f=2e3,p=2e3,g=3,m=1,v=o.extend({_mediaGenRetryCount:0,_tveAuthRetryCount:0,constructor:function(e,t){o.call(this),this._url=e,this._tveAuth=t,this.loaderTimings={},this.tveAuthTimings={},this.mediaGenTimeout=new a(p),this.tveAuthTimeout=new a(f)},_loadMediaGen:function(e){var t=new d({url:this._url,timings:this.loaderTimings,timeout:this.mediaGenTimeout});if(this._tveAuth){this._tveAuth.timeout=this.tveAuthTimeout,this._tveAuth.timings=this.tveAuthTimings;var n=new l(this._tveAuth);return n.get(e).then(t.load.bind(t))}return t.load()},_execute:function(e){var t=this;this._loadMediaGen(e).then(this._processMediaGenStatus.bind(this)).catch(function(e){if(e.name===s.ERRORS.REQUEST){var n=e.xhr.response;try{n=JSON.parse(n),n.message&&(e.message="Request error. Cause: "+n.message)}catch(e){}}t.reject(e)})},_processMediaGenStatus:function(e){var t=u.parseMediaGen(r.clone(e));if(i.debug("processMediaGen",t),t.success===!0)return void this.resolve(t);var n;switch(t.code){case c.TVE_AUTH_FAILED:n=this._tveAuth&&this._tveAuthRetryCount++<m;break;case c.NOT_FOUND:n=this._mediaGenRetryCount++<g}if(n)this._execute(t);else{var a=new Error(t.message);a.name=h.MEDIAGEN_ERROR,a.statusCode=t.code,this.reject(a)}}});v.ERRORS=h,e.exports=v},function(e,t,n){var i=n(2).getLogger("tve-auth-token-receiver"),r=n(36),a=n(11),o=r.extend({constructor:function(e){r.call(this,{timeout:e.timeout,timings:e.timings}),this._eventEmitter=e.eventEmitter,this._mgid=e.mgid},_execute:function(e){var t=this;e&&(i.info("TVE auth failed, retry request"),this._eventEmitter.trigger(a.MEDIAGEN_AUTH_CHECK_ERROR,{code:e.code,message:e.message})),i.debug("Fire WAITING_ON_MEDIAGEN_AUTH_CHECK event",this._mgid),this._eventEmitter.trigger(a.WAITING_ON_MEDIAGEN_AUTH_CHECK,{mgid:this._mgid,callback:function(e,n){i.info("TVE auth callback",e,n),t.resolve({token:e,provider:n})}})}});e.exports=o},function(e,t,n){var i=n(2).getLogger("media-gen-loader"),r=n(1),a=n(34),o=n(31),s=a.extend({load:function(e){if(void 0!==e){i.debug("tveAuthToken",e.token,e.provider);var t=this._ajaxSettings;e.token&&(t.crossDomain=!0,t.contentType="application/json",t.headers={"X-VIA-TVE-MEDIATOKEN":e.token}),void 0!==e.provider&&(t.url=o.appendParam(t.url,"tveprovider",e.provider))}return i.debug("mediagen requested",this._ajaxSettings),a.prototype.load.call(this)},_onSuccess:function(e,t,n){if(i.debug("mediagen loaded",e),r.isObject(e.package))a.prototype._onSuccess.apply(this,arguments);else{var o=new Error("Invalid MediaGen - Content Type: "+n.getResponseHeader("content-type"));o.name=a.ERRORS.PARSE,this.reject(o)}}});e.exports=s},function(e,t,n){var i=n(1),r={parseMediaGen:function(e){var t={},n=null;return null===e.package||null===e.package.video?(t.code=0,t.message="Invalid MediaGen - No video node",t.success=!1,t):(t.version=e.package.version,t.beacons=[],t.overlay=[],t.transcript=[],i.isArray(e.package.video.item)?n=e.package.video.item[0]:i.isObject(e.package.video.item)&&(n=e.package.video.item),null!==n?(n=this.fixMediaGenLeadingAts(n),t.isLive="true"===n.live||n.live===!0,t.isDVR="true"===n.dvr||n.dvr===!0,t.transcript=this.parseTranscript(n),t.beacons=this.parseBeacons(n),t.rendition=this.parseRendition(n),i.isEmpty(t.rendition)?(t.code=n.code,t.message=n.text,t.success=!1):t.success=!0):(t.code=0,t.message="Invalid MediaGen - No Video Item",t.success=!1),e.package.video.item&&e.package.video.item.length>1&&(t.overlay=this.parseOverlay(e.package.video.item.slice(1,e.package.video.item.length))),t)},parseRendition:function(e){var t=[];return i.isArray(e.rendition)?t=e.rendition[0]:i.isObject(e.rendition)&&(t=e.rendition),t=this.fixMediaGenLeadingAts(t)},parseTranscript:function(e){var t=[];return i.isArray(e.transcript)?t=e.transcript:i.isObject(e.transcript)&&t.push(this.fixMediaGenLeadingAts(e.transcript,!0)),t},parseOverlay:function(e){for(var t=[],n=0;n<e.length;n++)"overlay"===e[n].placement&&t.push(e[n]);return t},parseBeacons:function(e){var t=[];return i.isArray(e.beacon)?t=e.beacon:i.isObject(e.beacon)&&t.push(e.beacon),t},fixMediaGenLeadingAts:function(e,t){return Object.keys(e).reduce(function(n,a){var o=a.replace(/^@/,"");return i.isObject(e[a])&&t&&(e[a]=r.fixMediaGenLeadingAts(e[a],t)),n[o]=e[a],n},{})}};e.exports=r},function(e,t,n){var i=n(2).getLogger("video-manager"),r=n(4).window,a=r.Promise||n(19),o=n(1),s=n(3),l=n(41),d=n(6),u=n(14),c=n(63),h=n(64),f=n(69),p=n(72),g=n(73),m=n(74),v=n(5),y=n(77),E=n(78),A=n(12),b=31536e6,T={canplaythrough:"canplay",pause:"paused"},S={state:d.STATE_CHANGE,end:d.MEDIA_END,playhead:d.PLAYHEAD_UPDATE,volume:d.VOLUME_CHANGE,id3:d.ID3};e.exports={SEAMLESS_BUFFER_SIZE:24e3,playStateValues:o.values(u),getRendererType:function(e){var t;return t=e.configModel.config.jsHLSEnabled?m.Player:e.configModel.config.flashHLSEnabled?f.Player:v.os.ios&&!v.os.ipad?-1!==v.os.version.indexOf("8.1")?g.Player:p.Player:h.Player},createRenderer:function(e){var t=e.configModel.config,n=this.getRendererType(e);e.adsElement=h.Player.createElement("edge-player-ads-element",{playsinline:!t.useQuickTimePlayerOnIphone,muted:e.playbackModel.isMuted}).prependTo(e.$el)[0];var r=e.playbackModel.renderer=new n({controls:t.useNativeControls,playsinline:!t.useQuickTimePlayerOnIphone,muted:e.playbackModel.isMuted,volume:l.get(l.KEYS.VOLUME),hlsSettings:t.httpstreaming,$container:e.$el});e.contentElement=r.el,i.debug("adsElement and contentElement created");var a=new E(r);a.avgBandwidth=l.getExpiringValue(l.KEYS.AVG_BANDWIDTH),this.updateAvgBandwidth(e,a.avgBandwidth),i.debug("recent bandwidth",a.avgBandwidth),this.configureVideo(e),e.playlistModel.isSeamlessEnabled?r.setMaxBufferSize(this.SEAMLESS_BUFFER_SIZE/1e3):(e.playbackModel.dynamicBufferExt=new y(r),e.on(d.SEAMLESS_MODE,e.playbackModel.dynamicBufferExt.disable))},checkAutoPlay:function(e){return new a(function(t){function n(n){e.playbackModel.isAutoPlayEnabled=n,r.remove(),t()}if(e.configModel.config.autoPlay&&!e.isMobilePlatform){var r=h.Player.createElement().prependTo(e.$el);r[0].src="data:audio/mp3;base64, //sYxAAAAAABpAAAAAAAADSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sYxD2AAAABpAAAAAAAADSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sYxHsAAAABpAAAAAAAADSAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";var o=r[0].play();o instanceof a?o.then(function(){i.debug("autoplay is allowed by browser"),n(!0)},function(e){i.debug("autoplay blocked by browser",e),n(!1)}):(i.debug("no promise, just play"),n(!0))}else t()})},updateAvgBandwidth:function(e,t){t=s.isNumber(t)?Math.round(t):null,e.performanceModel.avgBandwidthKbps=t},play:function(e,t){var n=e.playlistModel.currentItem.src,r=e.playbackModel.renderer,a=e.playlistModel.currentItem.mediaGen;return n?(r.isLive(a.isLive),r.mediastartFired=!0,e.playbackModel.currentSrc===n?i.info("same src."):(i.info("set src",n),e.playbackModel.currentSrc=n,e.performanceManager.setContentSource(),r.setSrc(n)),a.isLive&&!a.isDVR&&e.state?(i.info("call video.goLive()"),r.goLive()):(i.info("call video.play() "),0!==e.playbackModel.focusCurrentTime&&0===r.el.currentTime&&(r.el.currentTime=e.playbackModel.focusCurrentTime,e.playbackModel.focusCurrentTime=0),r.play()),void(t&&this.seek(e,t))):void i.error("no src for playlist item",this.playlist.currentItem)},seek:function(e,t){i.info("seek:",t),e.playbackModel.renderer.seek(t)},persist:function(e,t){switch(e){case"mute":l.set(l.KEYS.MUTED,!0);break;case"unmute":l.set(l.KEYS.MUTED,!1);break;case"volume":var n=t[0];o.isUndefined(n)||l.set(l.KEYS.VOLUME,n)}},sendToVideoModule:function(e,t,n){if(!e.playbackModel.renderer[t])throw t+" not implemented.";return e.playbackModel.renderer[t].apply(e.playbackModel.renderer,n)},volume:function(e,t){return this.persist("volume",[t]),this.sendToVideoModule(e,"volume",[t])},mute:function(e){this.persist("mute"),this.sendToVideoModule(e,"mute"),e.trigger(d.MUTED)},unmute:function(e){this.persist("unmute"),this.sendToVideoModule(e,"unmute"),e.trigger(d.UNMUTED)},isHTML5Player:function(e){return!(e.configModel.config.flashHLSEnabled&&!e.configModel.config.jsHLSEnabled)},isSeeking:function(e){return e.playbackModel.renderer.isSeeking()},goLive:function(e){this.sendToVideoModule(e,"goLive")},configureVideo:function(e){var t=e.playbackModel.renderer,n=this.proxyEvent.bind(this,e);t.on(c.VOLUME,n),t.on(c.END,n),t.on(c.FLASH_PLUGIN_STATUS,n),t.on(c.BUFFERING_WAITING,n),t.on(c.DURATION,n),t.on(c.ID3,n),t.on(c.STATE,this.onState.bind(this,e)),t.on(c.ERROR,this.onVideoError.bind(this,e)),t.on(c.DURATION,this.onDuration.bind(this,e)),t.on(c.PLAYHEAD,this.onPlayhead.bind(this,e)),t.on(c.BUFFERING_WAITING,this.onStalled.bind(this,e)),t.on(c.BUFFERING_WAITING_ENDED,this.onStallEnded.bind(this,e)),t.on(c.CC,this.onCC.bind(this,e)),t.on(c.MANIFEST_LOADED,this.onManifestLoaded.bind(this,e)),t.on(c.FRAGMENT_LOADED,this.onFragmentLoaded.bind(this,e))},onManifestLoaded:function(e){e.performanceManager.manifestLoaded()},onFragmentLoaded:function(e){var t=e.playbackModel.renderer.getBandwidthAvg();t>0&&(this.updateAvgBandwidth(e,t),l.saveExpiringValue(l.KEYS.AVG_BANDWIDTH,t,b));
},onVideoError:function(e,t){var n=e.playbackModel.renderer.getSrc();if(!(e.configModel.config.flashHLSEnabled||n&&n!==location.href))return void i.debug("ignoring video error, video src erroneously set (by freewheel) to "+n);var r=t.data;e.performanceManager.fireErrorBeacon({code:r.type===A.PLUGIN_ERROR?A.PLUGIN_ERROR:A.PLAYBACK_ERROR,level:r.level,message:r.message,url:r.url||n,httpStatusCode:r.httpStatusCode})},onStalled:function(e,t){i.info("onStalled"),e.performanceManager.stallStarted(),this.triggerStateChange(e,t.data)},onStallEnded:function(e){i.info("onStallEnded"),e.performanceManager.stallEnded()},onPlayhead:function(e,t){if(e.playlistModel.currentItem.ready){var n=t.data,i=Math.floor(e.playhead);e.playbackManager.setPlayhead(e,n),e.trigger(d.PLAYHEAD_UPDATE,n),i!==Math.floor(n)&&e.trigger(d.PLAYHEAD_UPDATE+":"+Math.floor(n),n)}},onDuration:function(e,t){var n=e.currentMetadata;if(n&&!isNaN(n.duration)){var i=t.data,r=!1;if(!isNaN(i)&&((Math.abs(n.duration-i)>=1||Math.abs(e.playbackModel.lastDuration-i)>=1)&&(n.duration=i,e.playlistModel.currentItem.duration=i,r=!0),e.playbackModel.lastDuration=n.duration,r||e.playbackModel.updateDuration)){var a=this.getDurations(e);e.playbackModel.updateDuration=!1,e.trigger(d.DURATION_CHANGE,a),this.updateCuePoints(e,a)}}},updateCuePoints:function(e,t){var n=o.reduce(t,function(e,t){return e+t}),i={mediaEndTime:n,ads:e.adsModel.adCuePoints};e.trigger(d.CUE_POINTS_CHANGE,i)},getDurations:function(e){if(!e.playlistMetadata)return[0];if(e.configModel.config.useSegmentedScrubber)return o.map(e.playlistMetadata.items,function(e){return e.duration});var t=e.playlistModel.currentItem;return[t.duration]},onState:function(e,t){i.info("onState: "+t.data);var n=T[t.data]||t.data,r=e.playbackModel.renderer;if(n===u.INITIALIZING){var a=e.playbackModel.renderer.getSrc();if(!a||a===location.href)return void i.info("abort state = INITIALIZING due to freewheel setting the src to location.href")}-1!==this.playStateValues.indexOf(n)&&n!=u.STALLED&&(e.state=n),this.checkMediaStart(e,n),this.triggerStateChange(e,n),n===u.INITIALIZING&&!r.isSeeking()&&e.playlistModel.currentItem.ready&&(i.info("reset playhead to 0"),this.onPlayhead(e,{data:0}))},triggerStateChange:function(e,t){switch(i.info("triggerStateChange:"+t),t){case"abort":case"emptied":case"loading":case"buffering":case u.WAITING:case u.INITIALIZING:case u.SEEKING:e.playbackModel.isBuffering=!0;break;case u.PAUSED:case u.SEEKED:case"canplay":case"canplaythrough":case u.PLAYING:e.playbackModel.isBuffering=!1,this.onStallEnded(e)}e.trigger(d.STATE_CHANGE,t),e.trigger(d.STATE_CHANGE+":"+t,t)},proxyEvent:function(e,t){e.trigger(S[t.type]||t.type,t.data)},checkMediaStart:function(e,t){t!==u.PLAYING||e.adsModel.isAdBreak||e.playlistModel.currentIndex!==e.playlistModel.currentPlayingIndex&&(e.playlistModel.currentPlayingIndex=e.playlistModel.currentIndex,i.info("checkMediaStart() send MEDIA_START for index:"+e.playlistModel.currentPlayingIndex),e.performanceManager.contentStarted(e.playlistModel.currentPlayingIndex),e.trigger(d.MEDIA_START,e.currentMetadata),e.trigger(d.METADATA,e.playlistModel.currentItem))},onCC:function(e,t){e.playbackModel.firedCCAvail||(e.isMobilePlatform&&!e.configModel.config.jsHLSEnabled?i.info("inband 608 captions are available and managed by device accessibility settings"):(e.trigger(d.CC_608_AVAILABLE,!0),e.playbackModel.firedCCAvail=!0)),e.trigger(d.CC,t.data)}}},function(e,t){e.exports={STATE:"state",BUFFERED:"buffered",BUFFERING_WAITING:"bufferStall",BUFFERING_WAITING_ENDED:"bufferStallEnded",DURATION:"duration",VOLUME:"volume",CLICK:"click",END:"end",TIMED_TEXT:"timedText",PLAYHEAD:"playhead",ERROR:"error",CC:"closedcaption",MANIFEST_LOADED:"manifestLoaded",FLASH_PLUGIN_STATUS:"flashPluginStatus",FRAGMENT_LOADED:"fragmentLoaded",FRAGMENT_LOAD_ERROR:"fragmentLoadError",ID3:"id3"}},function(e,t,n){var i=n(2).getLogger("html5"),r=n(1),a=n(5),o=n(3),s=n(65),l=n(67),d=n(63),u=n(14),c=n(12),h=n(26),f=n(68),p={},g=!!navigator.userAgent.match(/android 5.1.1/i)&&!!navigator.userAgent.match(/SM-P605V/i);p.Player=function(){var e=["stalled","ended","timeupdate","click"],t=e.concat(["playing","pause","seeked","waiting","loadstart","emptied","abort","error","suspend","canplay","canplaythrough","durationchange"]);return s.extend({name:"Html5.Player",activeEvents:t.concat(),state:"",playhead:NaN,duration:NaN,callPlayAfterSeek:!1,seekToPosition:void 0,REBUFFER_PLAYHEAD_THRESHOLD:.04,REBUFFER_SEEK_DELAY:.8,initialize:function(){r.bindAll(this,"onSeekReached","checkBuffered","checkDeferredSeek","checkBufferWaiting","onAddTextTrack","parseID3"),this.stateHistory=[],this.lastPlayPosition=0,this.currentPlayPosition=0,this.waitingCheckInterval=300,this.waitingForBuffer=!1,this.checkBufferTimeout=void 0,this.seekThreshold=3,p.Player.__super__.initialize.apply(this,arguments),a.os.tablet||a.os.phone||!a.browser.safari||(this.Html5DesktopSafari=!0,this.el.addTextTrack("captions","ignore","ignore")),this.seeker=new l({el:this.el,Html5DesktopSafari:this.Html5DesktopSafari}),this.el.textTracks.addEventListener("addtrack",this.onAddTextTrack),this.listenTo(this.seeker,l.Events.REACHED,this.onSeekReached)},onAddTextTrack:function(e){var t=e.track,n=this;"metadata"===t.kind&&(t.mode="hidden",t.addEventListener("cuechange",function(e){n.parseID3(e.target.activeCues[0])})),"captions"===t.kind&&"ignore"!==t.language&&(i.debug("CC text track",t),this.triggerEvent(d.CC,t))},render:function(){this.setElement(p.Player.createElement("edge-player-content-element",r.pick(this.options,"controls","playsinline","muted")).prependTo(this.options.$container)),p.Player.__super__.render.apply(this,arguments)},events:function(){var t={};return r.each(r.difference(this.activeEvents,e),function(e){t[e]="onStateChange"}),r.each(r.intersection(e,this.activeEvents),function(e){t[e]=e}),t},resetEvents:function(){this.activeEvents=t.concat(),this.delegateEvents()},remove:function(){return p.Player.__super__.remove.apply(this,arguments),clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),this.checkBufferTimeout=void 0,this.load(),this.eventsHandler&&this.eventsHandler.stopListening(),this.seeker&&this.seeker.stopListening(),this},getErrorMessage:function(){switch(this.el.error.code){case 1:return"Aborted. The fetching process for the media resource was aborted by the user agent at the user's request.";case 2:return"Network Error. A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"Decode Error. An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return'Can not play a video of type "'+this.getVideoType()+'" on this platform.';default:return""}},getVideoType:function(){return this.el.src?this.el.src.split(".").pop():"no src specified."},isSeeking:function(){return this.seeker.isSeeking},seek:function(e){this.seekToPosition=e,this.seekStartPlayhead=r.clone(this.playhead),this.onStateChange({type:"seeking"}),g?(this.deferredSeek=e,this.isPaused()||(this.suppressStateChange=!0,this.playingVolume=this.volume(),this.volume(0))):(clearTimeout(this.checkBufferTimeout),this.checkBufferTimeout=void 0,this.seeker.seek(e,this.duration))},activate:function(){p.Player.__super__.play.apply(this,arguments)},setSrc:function(e){e!==this.getSrc()&&(i.debug("setSrc: "+e),this.stateHistory=[],this.duration=NaN,this.checkBuffered(),p.Player.__super__.setSrc.apply(this,arguments))},preloadContent:function(e,t){i.debug("preloadContent",e,t),this.setSrc(e),t>0&&this.seek(t),this.load()},isLive:function(e){this.live=!!e},getDuration:function(){return this.live?0:s.prototype.getDuration.apply(this)},triggerEvent:function(e,t){this.filterTriggerEvent(e,t)&&p.Player.__super__.triggerEvent.apply(this,arguments)},filterTriggerEvent:function(e,t){var n=!1;if(this.isSeeking()&&"state"===e)switch(t){case u.SEEKED:this.manageSeekedEvent(e);case u.SEEKING:case u.INITIALIZING:case u.WAITING:case u.PAUSED:n=!0;break;case u.PLAYING:n=!0,this.onStateChange({type:u.PLAYING})}else n=!0;return n},manageSeekedEvent:function(e){this.seeker.isSeeking=!1,this.isPaused()?(this.pause(),this.onStateChange({type:"paused"})):(this.trigger(e,{type:e,data:"playing"}),this.onStateChange({type:"playing"})),this.lastSeekPosition=this.seekToPosition,this.seekToPosition=void 0},checkDuration:function(){var e=this.getDuration();this.duration!==e&&(this.duration=e,this.triggerEvent(d.DURATION,this.duration))},checkBuffered:function(){if(this.el.readyState!==f.HAVE_NOTHING){var e=this.el.buffered;if(e&&e.length>0){var t=Math.round(e.end(e.length-1));this.buffered!==t&&(this.triggerEvent(d.BUFFERED,t),this.buffered=t)}}this.live||(this.bufferTimeout=r.delay(this.checkBuffered,250))},checkDeferredSeek:function(){isNaN(this.deferredSeek)?this.suppressStateChange&&(this.volume(this.playingVolume),this.suppressStateChange=!1):(this.currentPlayPosition=this.deferredSeek,this.seeker.seek(this.deferredSeek,this.duration),delete this.deferredSeek,r.delay(this.checkDeferredSeek,this.waitingCheckInterval))},checkBufferWaiting:function(){this.currentPlayPosition=this.el.currentTime;var e=this.currentPlayPosition-this.lastPlayPosition,t=e>this.REBUFFER_PLAYHEAD_THRESHOLD,n=e>-1*this.REBUFFER_PLAYHEAD_THRESHOLD&&e<this.REBUFFER_PLAYHEAD_THRESHOLD,i=this.seeker.isSeeking||this.el.currentTime-this.lastSeekPosition>0&&this.el.currentTime-this.lastSeekPosition<this.REBUFFER_SEEK_DELAY;this.isPaused()||(this.waitingForBuffer||0===this.el.currentTime||i?this.waitingForBuffer&&t&&o.isNumber(this.el.duration)&&(this.live||o.isNumber(this.el.duration))&&(this.triggerEvent(d.STATE,u.PLAYING),this.waitingForBuffer=!1):n&&this.prevIsBufferingState&&(this.waitingForBuffer=!0,this.triggerEvent(d.BUFFERING_WAITING,this.currentPlayPosition)),this.prevIsBufferingState=n),this.lastPlayPosition=this.currentPlayPosition,this.checkBufferTimeout=r.delay(this.checkBufferWaiting,this.waitingCheckInterval)},onSeekReached:function(e){this.processPlayhead(e.data),this.callPlayAfterSeek&&(this.callPlayAfterSeek=!1,this.play())},click:function(){this.triggerEvent(d.CLICK,this.el)},timeupdate:function(e){(!this.seeker.isSeeking||this.options.dontManagePlayhead)&&this.processPlayhead((e.target||e.srcElement).currentTime)},onStateChange:function(e){var t=e.type;t===u.PLAYING&&(this.waitingForBuffer=!this.live&&!o.isNumber(this.el.duration),this.waitingForBuffer&&(t=u.WAITING),void 0===this.checkBufferTimeout&&(this.checkBufferTimeout=r.delay(this.checkBufferWaiting,this.waitingCheckInterval))),(t===u.PLAYING||t===u.PAUSED)&&this.checkDeferredSeek(),t===this.state||this.suppressStateChange||(this.state=t,this.stateHistory.push(t),this.triggerEvent(d.STATE,t),this.triggerEvent(d.STATE+":"+this.state,t)),t===u.ERROR&&this.triggerEvent(d.ERROR,{code:this.el.error.code,message:this.getErrorMessage(),level:h.ERROR,type:c.PLAYBACK_ERROR}),this.checkDuration()},ended:function(){this.duration=NaN,this.seeker.isSeeking=!1,this.lastSeekPosition=void 0,clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),this.bufferTimeout=void 0,this.checkBufferTimeout=void 0,this.triggerEvent(d.END)},processPlayhead:function(e){if(this.duration||this.live){var t=Math.floor(this.playhead);this.playhead=e,this.triggerEvent(d.PLAYHEAD,e),t!==Math.floor(e)&&this.triggerEvent(d.PLAYHEAD+":"+Math.floor(e),e)}},parseID3:function(e){var t={key:e.value.key,data:e.value.data,description:e.value.description,startTime:e.startTime,endTime:e.endTime};this.triggerEvent(d.ID3,t)},getBandwidth:function(){return-1},getBandwidthMin:function(){return-1},getBandwidthMax:function(){return-1},getBandwidthAvg:function(){return-1},getBufferLength:function(){return null},getMaxBufferLength:function(){return null},getRenditions:function(){return null},getCurrentRendition:function(){return null},getMaxAutoLevel:function(){return-1},getFrameDrops:function(){return null},setMaxBufferSize:function(){return null}},{Events:d})}(),p.Player.createElement=function(e,t){var n='preload="metadata" style="position: absolute; width: 100%; height: 100%"',i=r.template('<video class="<%= className %>" <%= attrs %>></video>');return r.each(t,function(e,t){e===!0&&(n+=" "+t)}),a(i({className:e,attrs:n}))},p.Player.prototype.destroy=p.Player.prototype.remove,e.exports=p},function(e,t,n){var i=n(2).getLogger("video-element-wrapper"),r=n(1),a=n(4).window,o=a.Promise||n(19),s=n(3),l=n(66),d=l.extend({isActivated:!1,initialize:function(){d.__super__.initialize.apply(this,arguments),this.$el.on("volumechange",this.onVolumeChange)},render:function(){this.video=this.el},play:function(){var e=this.el.play(),t=this;e instanceof o?e.then(function(){i.debug("play approved by browser"),t.isActivated=!0}).catch(function(e){i.debug("play blocked by browser",e),t.isActivated=!1}):(i.debug("playing without browser interference"),t.isActivated=!0)},pause:function(){this.el.pause()},isPaused:function(){return this.el.paused&&0!=this.el.readyState&&!this.el.ended},goLive:function(){var e=this.el.src;this.el.src=void 0,this.el.src=e,this.play()},isLive:function(e){return e},unmute:function(){d.__super__.unmute.apply(this,arguments),this.el.removeAttribute("muted")},getDuration:function(){var e=this.el.duration;return s.isNumber(e)&&e>1?e:NaN},load:function(){this.el.load()},setSrc:function(e){r.isArray(e)&&(e=e[0].src),this.el.src=e},remove:function(){this.$el.off("volumechange",this.onVolumeChange),d.__super__.remove.apply(this,arguments)}});e.exports=d},function(e,t,n){var i=n(1),r=n(3),a=n(22),o=n(43),s=n(63),l=a.View.extend({initialize:function(e){this.options=e,i.bindAll(this,"onVolumeChange"),this.render(),this.volume(this.options.volume),this.options.muted&&this.mute()},unmute:function(){this.video.muted=!1,0==this.volume()&&this.volume(o.DEFAULT_VOLUME_LEVEL)},mute:function(){this.video.muted=!0},volume:function(e){return r.isNumber(e)&&(this.video.volume=e,e>0&&(this.video.muted=!1)),this.video.muted?0:this.video.volume},getSrc:function(){return this.video.src},onVolumeChange:function(){this.triggerEvent(s.VOLUME,this.volume())},triggerEvent:function(e,t){this.trigger(e,{type:e,data:t})}});e.exports=l},function(e,t,n){var i=n(2).getLogger("seeker"),r=n(1),a=n(22),o=n(68),s=function(e){r.bindAll(this,"seek","checkSeekAccuracy","checkSeekable"),this.el=e.el,this.Html5DesktopSafari=e.Html5DesktopSafari};s.Events={REACHED:"reached"},r.extend(s.prototype,a.Events,{CLOSE_ENOUGH_SEEK:4,isSeeking:!1,timeupdate:function(){},checkSeekAccuracy:function(){Math.abs(this.seekRequest-this.el.currentTime)<this.CLOSE_ENOUGH_SEEK&&(this.el.removeEventListener("timeupdate",this.timeupdate),this.isSeeking=!1)},onSeekNotFail:function(){this.el.removeEventListener("timeupdate",this.timeupdate),this.trigger(s.Events.REACHED,{data:this.seekRequest}),this.timeupdate=r.after(3,this.checkSeekAccuracy),this.el.addEventListener("timeupdate",this.timeupdate,!1)},cancelTimer:function(){clearTimeout(this.timeout)},stopListening:function(){this.el.removeEventListener("timeupdate",this.timeupdate)},seek:function(e,t){var n=this.el,a=n.seekable;if(e=parseFloat(e,10),isNaN(e))return!1;if(this.isSeeking=!0,!isNaN(t)&&e>=t&&(e=t-1),this.seekRequest!==e&&this.cancelTimer(),this.seekRequest=e,a.length>0&&n.readyState!==o.HAVE_NOTHING)if(this.cancelTimer(),e<=a.end(a.length-1))try{n.currentTime=e,this.onSeekNotFail()}catch(t){this.timeout=r.delay(this.seek,250,e)}else this.timeout=r.delay(this.seek,250,e);else this.Html5DesktopSafari?(i.debug("Seeker: Player is Desktop Safari, listen to canplay event to check seekable",a),n.addEventListener("canplay",this.checkSeekable)):this.timeout=r.delay(this.seek,250,e)},checkSeekable:function(){var e=this.el.seekable;e.length>0?(i.debug("Seeker: seekable has been updated and can be seeked, send seek",e),this.seek(this.seekRequest),clearInterval(this.checkSeekableInterval),this.el.removeEventListener("canplay",this.checkSeekable)):(i.debug("Seeker: seekable has not been updated, checking seekable on an interval",e),this.checkSeekableInterval=setInterval(this.checkSeekable,750))}}),e.exports=s},function(e,t){var n={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_FUTURE_DATA:2,HAVE_ENOUGH_DATA:4};e.exports=n},function(e,t,n){var i=n(2).getLogger("flash"),r=n(1),a=n(5),o=n(70),s=n(63),l=n(14),d=n(12),u=n(26),c=n(71),h=n(43),f=n(66),p={polyfillUrl:"//media.mtvnservices.com/edge/polyfill/polyfill-1.4.17.swf",debugPolyfillUrl:"//media.mtvnservices.com/edge/polyfill/polyfill-debug-1.4.17.swf"};p.Player=f.extend({name:"FlashVideo.Player",flasHLSErrorCodes:{0:"OTHER_ERROR",1:"MANIFEST_LOADING_CROSSDOMAIN_ERROR",2:"MANIFEST_LOADING_IO_ERROR",3:"MANIFEST_PARSING_ERROR",4:"FRAGMENT_LOADING_CROSSDOMAIN_ERROR",5:"FRAGMENT_LOADING_ERROR",6:"FRAGMENT_PARSING_ERROR",7:"KEY_LOADING_CROSSDOMAIN_ERROR",8:"KEY_LOADING_ERROR",9:"KEY_PARSING_ERROR",10:"TAG_APPENDING_ERROR",11:"RETRY_MAX_REACHED"},state:"",initialize:function(e){this.seeking=!1,this.paused=!1,this.hlsSettings=e.hlsSettings,r.bindAll(this,"heartbeat","seekStart","seekEnd","onStateChange","onManifestLoaded","onLoaded","onDurationChange","onPlayheadChange","onTimedText","ended","onCCData","onCCCommand","onBufferStall","onBufferStallEnd","onFragmentLoading","onFragmentLoaded","onFragmentLoadEmergency","onError","onWarning","getBandwidth","checkFlashPlugin","isPolyfillLoading","getCallback","resizeElement","sendFlasHlsError","setMaxBufferSize","onID3"),this.methodQueue=[],this.stateHistory=[],this.id=r.uniqueId(h.FLASH_OBJECT_ID_PREFIX),this.flashCallbackRefId=r.uniqueId(h.FLASH_CALLBACKS_OBJECT_PREFIX),window[this.flashCallbackRefId]={},this.preload(),p.Player.__super__.initialize.apply(this,arguments)},render:function(){this.$el.attr("id",this.id).prependTo(this.options.$container),this.makeSwfObject(this.id,this.options);var e=this;this.video={get muted(){return this.isMuted},set muted(t){this.isMuted=t,e.changeVolume()},get volume(){return this.currentVolume},set volume(t){this.currentVolume=t,e.changeVolume()}}},setMaxBufferSize:function(e){this.hlsSettings.hls_maxbufferlength=e,this.message("hlsConfig",this.hlsSettings)},setStartingLevel:function(e){var t=this.getRenditions();this.hlsSettings.hls_startfromlevel=e/(t.length-1),this.message("hlsConfig",this.hlsSettings)},getErrorMessage:function(){return""},isSeeking:function(){return this.seeking},message:function(e){if(this.ready){var t;if(void 0===this.el[e]&&void 0===this.el.heartbeat)t=new Error("Flash polyfill is non-functional (hidden or removed from DOM)");else try{return this.el[e].apply(this.el,r.toArray(arguments).slice(1))}catch(e){e.message="Flash polyfill: "+e.message,t=e}if(void 0!==t)throw t.level=u.WARN,t.type=d.PLUGIN_ERROR,this.triggerEvent(s.ERROR,t),t}else this.methodQueue.push(arguments)},onPlayheadChange:function(e){var t;this.isSeeking()||isNaN(this.duration)||(t=Math.floor(this.playhead),this.playhead=e,this.triggerEvent(s.PLAYHEAD,e),t!==Math.floor(e)&&this.triggerEvent(s.PLAYHEAD+":"+Math.floor(e),e))},onStateChange:function(e){i.debug("onStateChange:",e,this.seeking),(!this.seeking||e!==l.PLAYING&&e!==l.PAUSED)&&(this.paused=e===l.PAUSED,this.state=e,this.stateHistory.push(e),this.triggerEvent(s.STATE,e),this.triggerEvent(s.STATE+":"+e,e))},onDurationChange:function(e){this.duration=Math.round(1e3*e)/1e3,this.duration>0&&this.triggerEvent(s.DURATION,e)},onTimedText:function(e){this.triggerEvent(s.TIMED_TEXT,e)},ended:function(){this.duration=NaN,this.message("stop"),clearTimeout(this.bufferTimeout),this.triggerEvent(s.END)},onLoaded:function(){delete p["tinyPlayerLoaded"+this.id],this.ready=!0,this.seeking=!1,r.each(this.methodQueue,function(e){this.message.apply(this,e)},this),delete this.methodQueue,void 0!==this.hlsSettings?this.message("hlsConfig",this.hlsSettings):this.hlsSettings={},this.el.on("stateChange",this.getCallback("state",this.onStateChange)),this.el.on("durationChange",this.getCallback("duration",this.onDurationChange)),this.el.on("playheadChange",this.getCallback("playhead",this.onPlayheadChange)),this.el.on("timedText",this.getCallback("timedText",this.onTimedText)),this.el.on("mediaEnd",this.getCallback("mediaEnd",this.ended)),this.el.on("seekStart",this.getCallback("seekStart",this.seekStart)),this.el.on("seekEnd",this.getCallback("seekEnd",this.seekEnd)),this.el.on("ccData",this.getCallback("ccData",this.onCCData)),this.el.on("ccCommand",this.getCallback("ccCommand",this.onCCCommand)),this.el.on("bufferStall",this.getCallback("bufferStall",this.onBufferStall)),this.el.on("bufferStallEnd",this.getCallback("bufferStallEnd",this.onBufferStallEnd)),this.el.on("manifestLoaded",this.getCallback("manifestLoaded",this.onManifestLoaded)),this.el.on("error",this.getCallback("error",this.onError)),this.el.on("warning",this.getCallback("warning",this.onWarning)),this.el.on("fragmentLoading",this.getCallback("fragmentLoading",this.onFragmentLoading)),this.el.on("fragmentLoaded",this.getCallback("fragmentLoaded",this.onFragmentLoaded)),this.el.on("fragmentLoadEmergency",this.getCallback("fragmentLoadEmergency",this.onFragmentLoadEmergency)),this.el.on("ID3",this.getCallback("ID3",this.onID3)),void 0!==this.onReadySrc&&(this.setSrc(this.onReadySrc),this.onReadySrc=void 0),this.flashEnabled=!0,this.triggerEvent(s.FLASH_PLUGIN_STATUS,{flashEnabled:this.flashEnabled})},onManifestLoaded:function(){this.isManifestReady=!0,this.triggerEvent(s.MANIFEST_LOADED)},onCCData:function(e){var t=decodeURIComponent(e);this.triggerEvent(s.CC,JSON.parse(t))},onCCCommand:function(e){var t=decodeURIComponent(e);this.triggerEvent(s.CC,JSON.parse(t))},onBufferStall:function(){i.debug("onBufferStall:"),this.triggerEvent(s.BUFFERING_WAITING,this.playhead)},onBufferStallEnd:function(){i.debug("onBufferStallEnd:"),this.triggerEvent(s.BUFFERING_WAITING_ENDED),this.triggerEvent(s.STATE,l.PLAYING)},onError:function(e){i.error("error:",e),e.level=u.ERROR,this.sendFlasHlsError(e)},onWarning:function(e){i.warn("warning:",e),e.level=u.WARN,this.sendFlasHlsError(e)},onID3:function(e){var t={key:e.frameId,data:e.frameData,startTime:e.startTime,description:e.description};this.triggerEvent(s.ID3,t)},sendFlasHlsError:function(e){i.debug("sendFlasHlsError",e);var t,n=e.msg,r=e.url,a=/HTTP status:(\d+)\D*/,o=a.exec(n);o&&o.length>=2&&(t=parseInt(a.exec(n)[1],10)),void 0!==n&&(n=n.split("@")[0]);var l=this.flasHLSErrorCodes[e.code];l&&(n=l+": "+n),11===e.code&&this.message("stop"),this.triggerEvent(s.ERROR,{code:e.code,message:n,level:e.level,url:r,httpStatusCode:t,type:d.PLAYBACK_ERROR})},onFragmentLoading:function(e){i.debug("onFragmentLoading",e)},onFragmentLoaded:function(e){i.debug("onFragmentLoaded",e.id,e.level),this.triggerEvent(s.FRAGMENT_LOADED)},onFragmentLoadEmergency:function(e){i.error("onFragmentLoadEmergency",e),this.triggerEvent(s.FRAGMENT_LOAD_ERROR)},seekStart:function(){this.seeking=!0,this.seekStartPlayhead=this.playhead,this.onStateChange(l.SEEKING)},seekEnd:function(){this.seeking=!1,this.onStateChange(l.SEEKED)},play:function(){this.message("play")},preloadContent:function(e,t){i.debug("preloadContent",e,t),this.isManifestReady=!1,this.message("prebuffer",e),t>0&&this.message("crossSegmentSeek",t)},pause:function(){this.paused=!0,this.message("pause")},changeVolume:function(){this.message("volume",this.volume()),this.onVolumeChange()},resizeElement:function(e){this.el.width=e,this.el.height=e},setSrc:function(e){e&&(this.isManifestReady=!1,this.video.src=e,this.ready?(this.message("load",e),this.seeking=!1,this.onStateChange(l.INITIALIZING)):this.onReadySrc=e)},isPaused:function(){return this.paused},goLive:function(){this.setSrc(this.getSrc())},seek:function(e){this.seeking=!0,this.isManifestReady?(i.debug("seek",e),this.message("seek",e)):(i.debug("crossSegmentSeek",e),this.message("crossSegmentSeek",e))},isLive:function(){},resetEvents:function(){},destroy:function(){this.remove(),o.removeSWF(this.id),window[this.flashCallbackRefId]=null},heartbeat:function(){var e=this.message("heartbeat");return e},getBandwidth:function(){var e=-1;return this.ready&&(e=this.message("getBandwidth")),e},getBandwidthMin:function(){var e=-1;return this.ready&&(e=this.message("getBandwidthMin")),e},getBandwidthMax:function(){var e=-1;return this.ready&&(e=this.message("getBandwidthMax")),e},getBandwidthAvg:function(){var e=-1;return this.ready&&(e=this.message("getBandwidthAvg")),e},getBufferLength:function(){var e=null;return this.ready&&(e=this.message("getBufferLength")),Math.round(1e3*e)},getMaxBufferLength:function(){var e=null;return this.ready&&(e=this.message("getMaxBufferLength")),Math.round(1e3*e)},getRenditions:function(){var e;return this.ready&&(e=this.message("getLevels")),r.isArray(e)?e:[]},getCurrentRendition:function(){var e;return this.ready&&(e=this.message("getCurrentLevel")),e},getMaxAutoLevel:function(){var e;return this.ready&&(e=this.message("getMaxAutoLevel")),e},getFrameDrops:function(){var e;return this.ready&&(e=this.message("getFrameDrops")),e},makeSwfObject:function(){var e=this.options.attributes||{},t={wmode:"opaque",allowFullScreen:!0,allowScriptAccess:"always"},n=this.options.flashVars||{};e.data=p.polyfillUrl,e.width=e.height="0",e.style="position: absolute;",n.objectID=this.id,n.onReady=this.getCallback("loaded",this.onLoaded),t.flashVars=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+e[n]+"&");return t?t.slice(0,-1):""}(n),this.setElement(o.createSWF(e,t,this.id)),r.delay(this.checkFlashPlugin,1e3)},checkFlashPlugin:function(){if(this.resizeElement("100%"),!this.ready&&!this.isPolyfillLoading()){this.flashEnabled=!!this.heartbeat();var e={},t=navigator.mimeTypes["application/x-shockwave-flash"],n=!1;t&&(n=!!t.enabledPlugin),e={flashEnabled:this.flashEnabled,pluginStatus:{flashPluginExists:!!t,enabledPlugin:n,polyfillLoaded:this.flashEnabled,browser:a.browser}},this.triggerEvent(s.FLASH_PLUGIN_STATUS,e),n||this.triggerEvent(s.ERROR,{level:u.ERROR,type:d.PLUGIN_ERROR,message:c.FLASH_PLUGIN_REQUIRED})}},isPolyfillLoading:function(){var e=!1;return"undefined"!=typeof this.el.PercentLoaded&&(e=this.el.PercentLoaded()),e!==!1},getCallback:function(e,t){var n=e+this.id;return window[this.flashCallbackRefId][n]=r.wrap(t,function(t){try{return t.apply(this,Array.prototype.splice.call(arguments,1))}catch(t){i.error('Error in "'+e+'" callback.',t.stack,t)}}),this.flashCallbackRefId+"."+n},preload:function(){a.ajax({url:p.polyfillUrl})},activate:function(){this.isActivated=!0}}),p.Player.prototype.load=p.Player.prototype.setSrc,e.exports=p},function(e,t){var n=function(){function e(){if(!Y){try{var e=B.getElementsByTagName("body")[0].appendChild(v("span"));e.parentNode.removeChild(e)}catch(e){return}Y=!0;for(var t=G.length,n=0;t>n;n++)G[n]()}}function t(e){Y?e():G[G.length]=e}function i(e){if(typeof N.addEventListener!=L)N.addEventListener("load",e,!1);else if(typeof B.addEventListener!=L)B.addEventListener("load",e,!1);else if(typeof N.attachEvent!=L)y(N,"onload",e);else if("function"==typeof N.onload){var t=N.onload;N.onload=function(){t(),e()}}else N.onload=e}function r(){U?a():o()}function a(){var e=B.getElementsByTagName("body")[0],t=v(I);t.setAttribute("type",D);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=L){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),W.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=j.length;if(e>0)for(var t=0;e>t;t++){var n=j[t].id,i=j[t].callbackFn,r={success:!1,id:n};if(W.pv[0]>0){var a=m(n);if(a)if(!E(j[t].swfVersion)||W.wk&&W.wk<312)if(j[t].expressInstall&&l()){var o={};o.data=j[t].expressInstall,o.width=a.getAttribute("width")||"0",o.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(o.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(o.align=a.getAttribute("align"));for(var c={},h=a.getElementsByTagName("param"),f=h.length,p=0;f>p;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(c[h[p].getAttribute("name")]=h[p].getAttribute("value"));d(o,c,n,i)}else u(a),i&&i(r);else b(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(b(n,!0),i){var g=s(n);g&&typeof g.SetVariable!=L&&(r.success=!0,r.ref=g),i(r)}}}function s(e){var t=null,n=m(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=L)t=n;else{var i=n.getElementsByTagName(I)[0];i&&(t=i)}return t}function l(){return!z&&E("6.0.65")&&(W.win||W.mac)&&!(W.wk&&W.wk<312)}function d(e,t,n,i){z=!0,k=i||null,w={success:!1,id:n};var r=m(n);if(r){"OBJECT"==r.nodeName?(S=c(r),R=null):(S=r,R=n),e.id=x,(typeof e.width==L||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==L||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),B.title=B.title.slice(0,47)+" - Flash Player Installation";var a=W.ie&&W.win?"ActiveX":"PlugIn",o="MMredirectURL="+N.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+B.title;if(typeof t.flashvars!=L?t.flashvars+="&"+o:t.flashvars=o,W.ie&&W.win&&4!=r.readyState){var s=v("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function u(e){if(W.ie&&W.win&&4!=e.readyState){var t=v("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=v("div");if(W.win&&W.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(I)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;r>a;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||t.appendChild(i[a].cloneNode(!0))}}return t}function h(e,t,n){var i,r=m(n);if(W.wk&&W.wk<312)return i;if(r)if(typeof e.id==L&&(e.id=n),W.ie&&W.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var s="";for(var l in t)t[l]!=Object.prototype[l]&&(s+='<param name="'+l+'" value="'+t[l]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",H[H.length]=e.id,i=m(e.id)}else{var d=v(I);d.setAttribute("type",D);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?d.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&d.setAttribute(u,e[u]));for(var c in t)t[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&f(d,c,t[c]);r.parentNode.replaceChild(d,r),i=d}return i}function f(e,t,n){var i=v("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(W.ie&&W.win?(t.style.display="none",function(){4==t.readyState?g(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function g(e){var t=m(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=B.getElementById(e)}catch(e){}return t}function v(e){return B.createElement(e)}function y(e,t,n){e.attachEvent(t,n),V[V.length]=[e,t,n]}function E(e){var t=W.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function A(e,t,n,i){if(!W.ie||!W.mac){var r=B.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(M=null,C=null),!M||C!=a){var o=v("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),M=r.appendChild(o),W.ie&&W.win&&typeof B.styleSheets!=L&&B.styleSheets.length>0&&(M=B.styleSheets[B.styleSheets.length-1]),C=a}W.ie&&W.win?M&&typeof M.addRule==I&&M.addRule(e,t):M&&typeof B.createTextNode!=L&&M.appendChild(B.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(K){var n=t?"visible":"hidden";Y&&m(e)?m(e).style.visibility=n:A("#"+e,"visibility:"+n);
}}function T(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=L?encodeURIComponent(e):e}var S,R,k,w,M,C,L="undefined",I="object",_="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",D="application/x-shockwave-flash",x="SWFObjectExprInst",O="onreadystatechange",N=window,B=document,F=navigator,U=!1,G=[r],j=[],H=[],V=[],Y=!1,z=!1,K=!0,W=function(){var e=typeof B.getElementById!=L&&typeof B.getElementsByTagName!=L&&typeof B.createElement!=L,t=F.userAgent.toLowerCase(),n=F.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),a=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],l=null;if(typeof F.plugins!=L&&typeof F.plugins[_]==I)l=F.plugins[_].description,!l||typeof F.mimeTypes!=L&&F.mimeTypes[D]&&!F.mimeTypes[D].enabledPlugin||(U=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof N.ActiveXObject!=L)try{var d=new ActiveXObject(P);d&&(l=d.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]))}catch(e){}return{w3:e,pv:s,wk:a,ie:o,win:i,mac:r}}();(function(){W.w3&&((typeof B.readyState!=L&&"complete"==B.readyState||typeof B.readyState==L&&(B.getElementsByTagName("body")[0]||B.body))&&e(),Y||(typeof B.addEventListener!=L&&B.addEventListener("DOMContentLoaded",e,!1),W.ie&&W.win&&(B.attachEvent(O,function(){"complete"==B.readyState&&(B.detachEvent(O,arguments.callee),e())}),N==top&&!function(){if(!Y){try{B.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),W.wk&&!function(){return Y?void 0:/loaded|complete/.test(B.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))})(),function(){W.ie&&W.win&&window.attachEvent("onunload",function(){for(var e=V.length,t=0;e>t;t++)V[t][0].detachEvent(V[t][1],V[t][2]);for(var i=H.length,r=0;i>r;r++)p(H[r]);for(var a in W)W[a]=null;W=null;for(var o in n)n[o]=null;n=null})}();return{registerObject:function(e,t,n,i){if(W.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,j[j.length]=r,b(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return W.w3?s(e):void 0},embedSWF:function(e,n,i,r,a,o,s,u,c,f){var p={success:!1,id:n};W.w3&&!(W.wk&&W.wk<312)&&e&&n&&i&&r&&a?(b(n,!1),t(function(){i+="",r+="";var t={};if(c&&typeof c===I)for(var g in c)t[g]=c[g];t.data=e,t.width=i,t.height=r;var m={};if(u&&typeof u===I)for(var v in u)m[v]=u[v];if(s&&typeof s===I)for(var y in s)typeof m.flashvars!=L?m.flashvars+="&"+y+"="+s[y]:m.flashvars=y+"="+s[y];if(E(a)){var A=h(t,m,n);t.id==n&&b(n,!0),p.success=!0,p.ref=A}else{if(o&&l())return t.data=o,void d(t,m,n,f);b(n,!0)}f&&f(p)})):f&&f(p)},switchOffAutoHideShow:function(){K=!1},ua:W,getFlashPlayerVersion:function(){return{major:W.pv[0],minor:W.pv[1],release:W.pv[2]}},hasFlashPlayerVersion:E,createSWF:function(e,t,n){return W.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,i){W.w3&&l()&&d(e,t,n,i)},removeSWF:function(e){W.w3&&p(e)},createCSS:function(e,t,n,i){W.w3&&A(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=B.location.search||B.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return T(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return T(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=m(x);e&&S&&(e.parentNode.replaceChild(S,e),R&&(b(R,!0),W.ie&&W.win&&(S.style.display="block")),k&&k(w)),z=!1}}}}();e.exports=n},function(e,t){e.exports={SERVICE_UNAVAILABLE:"Service unavailable.",FLASH_PLUGIN_REQUIRED:"Flash plugin is required to view this content.",PLAYBACK_ERROR:"Sorry, something went wrong. Please try again later."}},function(e,t,n){var i=n(1),r=n(63),a=n(64),o=n(14),s=n(12),l=n(26),d={};d.Player=function(){return a.Player.extend({name:"Html5.iPhone.Player",initialize:function(){i.bindAll(this,"checkPlayheadSeek","checkPlayheadSeekLoop","verifyPlaying"),this.checkBufferOffset=0,this.iphoneSeeking=!1,this.checkPlayheadTimeout=void 0,this.checkPlayheadSeekInterval=300,this.lastPlayheadUpdate=0,this.currentTimeUpdated=0,d.Player.__super__.initialize.apply(this,arguments)},play:function(){this.playOnLoadStart=0===this.el.readyState,d.Player.__super__.play.apply(this,arguments)},remove:function(){return this.undelegateEvents(),this.$el.remove(),this.$el.off("volumechange",this.onVolumeChange),this.stopListening(),clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),clearTimeout(this.checkPlayheadTimeout),this.checkBufferTimeout=void 0,this.load(),this.eventsHandler&&this.eventsHandler.stopListening(),this.seeker&&this.seeker.stopListening(),this},checkPlayheadSeekLoop:function(){this.checkPlayheadSeek(),this.checkPlayheadTimeout=i.delay(this.checkPlayheadSeekLoop,this.checkPlayheadSeekInterval)},triggerEvent:function(e,t){"playhead"===e&&this.checkPlayheadSeek(),this.iphoneSeeking&&"seeking"!==t&&e!==r.END||d.Player.__super__.triggerEvent.apply(this,arguments)},checkBufferWaiting:function(){this.currentPlayPosition=this.el.currentTime;var e=(new Date).getTime(),t=(e-this.checkBufferOffset)/1e3,n=Math.round(100*this.currentPlayPosition)/100,a=Math.round(100*(this.lastPlayPosition+t))/100;if(this.isPaused()||this.iphoneSeeking||(this.waitingForBuffer?this.currentPlayPosition>this.lastPlayPosition+t&&(this.triggerEvent(r.STATE,o.PLAYING),this.waitingForBuffer=!1):a-n>.2&&(this.waitingForBuffer=!0,this.triggerEvent(r.BUFFERING_WAITING,this.currentPlayPosition))),this.iphoneSeeking&&void 0===this.checkPlayingTimeout&&4===this.el.readyState&&!this.el.paused&&!this.el.ended){var s=n-a;s>=0&&5>s?(this.iphoneSeekingPlayCount++,this.iphoneSeekingPlayCount>9&&this.state!==o.PLAYING&&(this.onStateChange({type:"playing"}),this.iphoneSeekingPlayCount=0)):this.iphoneSeekingPlayCount=0}this.lastPlayPosition=this.currentPlayPosition,this.checkBufferTimeout=i.delay(this.checkBufferWaiting,this.waitingCheckInterval),this.checkBufferOffset=e},onStateChange:function(e){var t=e.type;if(e.type===o.INITIALIZING&&(this.el.paused&&this.playOnLoadStart&&this.el.play(),this.playOnLoadStart=!1),t===o.PLAYING&&(this.waitingForBuffer=!1,void 0===this.checkBufferTimeout&&(this.checkBufferOffset=(new Date).getTime(),this.checkBufferTimeout=i.delay(this.checkBufferWaiting,this.waitingCheckInterval)),void 0===this.checkPlayheadTimeout&&(this.currentTimeUpdated=(new Date).getTime(),this.checkPlayheadSeekLoop()),this.iphoneSeeking&&void 0===this.checkPlayingTimeout))return this.checkPlayingTimeout=i.delay(this.verifyPlaying,2e3),void(this.iphoneSeekingPlayCount=0);if(this.iphoneSeeking&&t!==o.ERROR){if(t!==o.SEEKED&&"canplay"!==t&&"canplaythrough"!==t)return;this.iphoneSeeking=!1}t!==this.state&&(this.state=t,this.stateHistory.push(t),this.triggerEvent(r.STATE,t),this.triggerEvent(r.STATE+":"+this.state,t)),t===o.ERROR&&this.triggerEvent(r.ERROR,{code:this.el.error.code,message:this.getErrorMessage(),level:l.ERROR,type:s.PLAYBACK_ERROR}),this.checkDuration()},checkPlayheadSeek:function(){var e=(new Date).getTime(),t=Math.abs(this.el.currentTime-this.lastPlayheadUpdate);t>this.seekThreshold&&(this.iphoneSeeking?void 0!==this.checkPlayingTimeout&&(clearTimeout(this.checkPlayingTimeout),this.checkPlayingTimeout=void 0):(this.seekStartPlayhead=this.lastPlayheadUpdate,this.onStateChange({type:"seeking"}),this.iphoneSeeking=!0),this.iphoneSeekingPlayCount=0),this.lastPlayheadUpdate=this.el.currentTime,this.currentTimeUpdated=e},verifyPlaying:function(){clearTimeout(this.checkPlayingTimeout),this.checkPlayingTimeout=void 0,this.iphoneSeeking=!1,this.playhead=this.el.currentTime,this.triggerEvent(r.STATE,o.PLAYING)},ended:function(){this.duration=NaN,this.seeker.isSeeking=!1,clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),clearTimeout(this.checkPlayheadTimeout),this.checkPlayheadTimeout=void 0,this.triggerEvent(r.END)}},{Events:r})}(),d.Player.prototype.destroy=d.Player.prototype.remove,e.exports=d},function(e,t,n){var i=n(1),r=n(63),a=n(64),o=n(14),s=n(12),l=n(26),d={};d.Player=function(){return a.Player.extend({name:"Html5.iPhone81.Player",initialize:function(){i.bindAll(this,"checkPlayheadSeek","checkPlayheadSeekLoop","verifyPlaying"),this.checkBufferOffset=0,this.iphoneSeeking=!1,this.checkPlayheadTimeout=void 0,this.checkPlayheadSeekInterval=300,this.lastPlayheadUpdate=0,this.currentTimeUpdated=0,d.Player.__super__.initialize.apply(this,arguments)},remove:function(){return this.undelegateEvents(),this.$el.remove(),this.$el.off("volumechange",this.onVolumeChange),this.stopListening(),clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),clearTimeout(this.checkPlayheadTimeout),this.checkBufferTimeout=void 0,this.load(),this.eventsHandler&&this.eventsHandler.stopListening(),this.seeker&&this.seeker.stopListening(),this},checkPlayheadSeekLoop:function(){this.checkPlayheadSeek(),this.checkPlayheadTimeout=i.delay(this.checkPlayheadSeekLoop,this.checkPlayheadSeekInterval)},triggerEvent:function(e,t){"playhead"===e&&this.checkPlayheadSeek(),this.iphoneSeeking&&"seeking"!==t&&e!==r.END||d.Player.__super__.triggerEvent.apply(this,arguments)},checkBufferWaiting:function(){this.currentPlayPosition=this.el.currentTime;var e=(new Date).getTime(),t=(e-this.checkBufferOffset)/1e3,n=Math.round(100*this.currentPlayPosition)/100,a=Math.round(100*(this.lastPlayPosition+t))/100;if(this.isPaused()||this.iphoneSeeking||(this.waitingForBuffer?4===this.el.readyState&&(this.triggerEvent(r.STATE,o.PLAYING),this.seekThreshold=3,this.waitingForBuffer=!1):this.el.readyState<4&&(this.waitingForBuffer=!0,this.triggerEvent(r.BUFFERING_WAITING,this.currentPlayPosition),this.seekThreshold=7)),this.iphoneSeeking&&void 0===this.checkPlayingTimeout&&4===this.el.readyState&&!this.el.paused&&!this.el.ended){var s=n-a;s>=0&&5>s?(this.iphoneSeekingPlayCount++,this.iphoneSeekingPlayCount>9&&this.state!==o.PLAYING&&(this.onStateChange({type:"playing"}),this.iphoneSeekingPlayCount=0)):this.iphoneSeekingPlayCount=0}this.lastPlayPosition=this.currentPlayPosition,this.checkBufferTimeout=i.delay(this.checkBufferWaiting,this.waitingCheckInterval),this.checkBufferOffset=e},onStateChange:function(e){var t=e.type;return t===o.PLAYING&&(this.waitingForBuffer=!1,void 0===this.checkBufferTimeout&&(this.checkBufferOffset=(new Date).getTime(),this.checkBufferTimeout=i.delay(this.checkBufferWaiting,this.waitingCheckInterval)),void 0===this.checkPlayheadTimeout&&(this.currentTimeUpdated=(new Date).getTime(),this.checkPlayheadSeekLoop()),this.iphoneSeeking&&void 0===this.checkPlayingTimeout)?(this.checkPlayingTimeout=i.delay(this.verifyPlaying,2e3),void(this.iphoneSeekingPlayCount=0)):void(this.iphoneSeeking&&t!==o.ERROR||(t!==this.state&&(this.state=t,this.stateHistory.push(t),this.triggerEvent(r.STATE,t),this.triggerEvent(r.STATE+":"+this.state,t)),t===o.ERROR&&this.triggerEvent(r.ERROR,{code:this.el.error.code,message:this.getErrorMessage(),level:l.ERROR,type:s.PLAYBACK_ERROR}),this.checkDuration()))},checkPlayheadSeek:function(){var e=(new Date).getTime(),t=Math.abs(this.el.currentTime-this.lastPlayheadUpdate);t>this.seekThreshold&&(this.iphoneSeeking?void 0!==this.checkPlayingTimeout&&(clearTimeout(this.checkPlayingTimeout),this.checkPlayingTimeout=void 0):(this.seekStartPlayhead=this.lastPlayheadUpdate,this.onStateChange({type:"seeking"}),this.iphoneSeeking=!0),this.iphoneSeekingPlayCount=0),this.lastPlayheadUpdate=this.el.currentTime,this.currentTimeUpdated=e},verifyPlaying:function(){clearTimeout(this.checkPlayingTimeout),this.checkPlayingTimeout=void 0,this.iphoneSeeking=!1,this.playhead=this.el.currentTime,this.triggerEvent(r.STATE,o.PLAYING)},ended:function(){this.duration=NaN,this.seeker.isSeeking=!1,clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),clearTimeout(this.checkPlayheadTimeout),this.checkPlayheadTimeout=void 0,this.triggerEvent(r.END)}},{Events:r})}(),d.Player.prototype.destroy=d.Player.prototype.remove,e.exports=d},function(e,t,n){var i=n(2).getLogger("hls-video"),r=n(75),a=n(1),o=n(63),s=n(64),l=n(14),d=n(12),u=n(26),c=n(76),h={};h.Player=function(){function e(e,t){"https:"===location.protocol&&e.open("GET",t.replace(/^http:/,"https:"),!0)}var t={debug:!1,maxBufferLength:7,maxMaxBufferLength:15,maxBufferHole:2,maxSeekHole:3,capLevelToPlayerSize:!0,startFragPrefetch:!0,autoStartLoad:!1,enableCEA708Captions:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:3,manifestLoadingRetryDelay:500,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:3,levelLoadingRetryDelay:300,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:1e4,fragLoadingMaxRetry:3,fragLoadingRetryDelay:400,fragLoadingMaxRetryTimeout:64e3,xhrSetup:e};return s.Player.extend({name:"Html5.HlsVideo.Player",initialize:function(e){h.Player.__super__.initialize.apply(this,arguments),a.bindAll(this,"onStateChange","onHlsError","onFragmentLoaded","onWaitingTimer","play"),this.hlsSettings=a.extend(t,e.hlsSettings),this.currentSrc,this.isManifestReady=!1,this.isPlayRequested=!1},initializeHlsJs:function(){this.cleanupHlsJs(),this.isEndedFired=!1,this.hls=new r(t),this.stats=new c(this.hls),i.info("initializeHlsJs version",r.version,"options:",t),this.initHlsListeners()},cleanupHlsJs:function(){void 0!==this.hls&&(this.attached=!1,this.stopListeningHls(),this.stats.destroy(),this.hls.destroy())},attachMedia:function(e){function t(a,o){i.debug("attachMedia onMediaAttached ",o),n.off(r.Events.MEDIA_ATTACHED,t),s.attached=!0,e()}var n=this.hls,o=this.el,s=this;a.isFunction(e)&&(e=e.bind(this),n.on(r.Events.MEDIA_ATTACHED,t)),n.attachMedia(o)},loadSource:function(e,t){function n(e,t){i.debug("loadSource onManifestParsed",t),s.off(r.Events.MANIFEST_PARSED,n),l.isManifestReady=!0,l.triggerEvent(o.MANIFEST_LOADED),s.startLoad(l.seekingRequested),delete l.seekingRequested,l.isPlayRequested&&(i.debug("loadSource play requested"),l.isPlayRequested=!1,l.play())}function a(){s.on(r.Events.MANIFEST_PARSED,n),s.loadSource(e)}this.initializeHlsJs();var s=this.hls,l=this;this.currentSrc=e,this.isManifestReady=!1,t?this.attachMedia(a):a()},onFragmentLoaded:function(){this.triggerEvent(o.FRAGMENT_LOADED)},onLevelSwitch:function(e,t){i.debug("onLevelSwitch ",t)},onFpsDrop:function(e,t){i.debug("onFpsDrop ",t)},onFpsDropLevelCapping:function(e,t){i.debug("onFpsDropLevelCapping ",t)},listenToHls:function(e,t){this.hls.on(e,t),this.hlsListeners[e]=this.hlsListeners[e]||[],this.hlsListeners[e].push(t)},stopListeningHls:function(){a.each(this.hlsListeners,function(e,t){for(;e.length;)this.hls.off(t,e.pop())},this)},initHlsListeners:function(){this.hlsListeners={},this.listenToHls(r.Events.LEVEL_SWITCH,this.onLevelSwitch),this.listenToHls(r.Events.FPS_DROP,this.onFpsDrop),this.listenToHls(r.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping),this.listenToHls(r.Events.FRAG_LOADED,this.onFragmentLoaded),this.listenToHls(r.Events.ERROR,this.onHlsError)},onHlsError:function(e,t){i.debug("onHlsError",t);var n,a=t.details,s=t.url;if(t.type&&(a=t.type+": "+a),t.reason&&(a+=": "+t.reason),void 0===s&&(t.context?s=t.context.url:t.frag&&(s=t.frag.baseurl)),void 0!==t.response&&(n=t.response.code,t.response.text&&(a+=": "+t.response.text)),t.fatal)switch(t.type){case r.ErrorTypes.NETWORK_ERROR:i.error("HLS.js NETWORK_ERROR: ",t);break;case r.ErrorTypes.MEDIA_ERROR:i.error("HLS.js MEDIA_ERROR: ",t),this.hls.recoverMediaError(),t.fatal=!1;break;default:this.hls.destroy()}else"bufferStalledError"!==t.details||this.seeker.isSeeking||this.triggerEvent(o.BUFFERING_WAITING,this.el.currentTime);this.triggerEvent(o.ERROR,{type:d.PLAYBACK_ERROR,level:t.fatal?u.ERROR:u.WARN,message:a,url:s,httpStatusCode:n})},setSrc:function(e){this.currentSrc!==e?(i.debug("setSrc:",e),this.loadSource(e,!0)):(i.debug("setSrc same source: play"),this.play())},preloadContent:function(e,t){i.debug("preloadContent",e,t),this.loadSource(e),t>0&&this.seek(t)},play:function(){this.attached?this.isManifestReady?s.Player.__super__.play.apply(this,arguments):(i.debug("play manifest is not ready to play"),this.isPlayRequested=!0):this.attachMedia(this.play)},goLive:function(){this.hls&&(this.hls.liveSyncPosition&&(this.el.currentTime=this.hls.liveSyncPosition),this.play())},seek:function(e){this.isManifestReady?(i.debug("seek",e),h.Player.__super__.seek.apply(this,arguments)):(i.debug("seek manifest is not ready to seek:",e),this.seekingRequested=e)},remove:function(){return this.cleanupHlsJs(),h.Player.__super__.remove.apply(this,arguments)},onStateChange:function(e){var t=e.type;return t===l.WAITING?void(this.waitingTimeout=a.delay(this.onWaitingTimer,300)):(this.waitingTimeout&&t!==l.STALLED&&(clearTimeout(this.waitingTimeout),this.waitingTimeout=null),i.debug("onStateChange  "+t),t!==this.state&&(this.state=t,this.stateHistory.push(t),this.triggerEvent(o.STATE,t),this.triggerEvent(o.STATE+":"+this.state,t)),t===l.ERROR&&(i.debug("Error: code:"+this.el.error.code+" message: "+this.getErrorMessage()),this.triggerEvent(o.ERROR,{code:this.el.error.code,message:this.getErrorMessage(),level:u.ERROR,type:d.PLAYBACK_ERROR})),void this.checkDuration())},processPlayhead:function(e){h.Player.__super__.processPlayhead.apply(this,arguments),e!==this.duration||this.live||this.ended()},ended:function(){this.isEndedFired||(this.isEndedFired=!0,this.duration=NaN,this.seeker.isSeeking=!1,this.currentSrc=void 0,clearTimeout(this.bufferTimeout),clearTimeout(this.checkBufferTimeout),clearTimeout(this.checkPlayheadTimeout),clearTimeout(this.waitingTimeout),this.waitingTimeout=null,this.checkPlayheadTimeout=void 0,this.cleanupHlsJs(),this.triggerEvent(o.END))},onWaitingTimer:function(){clearTimeout(this.waitingTimeout),this.waitingTimeout=null,this.triggerEvent(o.STATE,l.WAITING),this.triggerEvent(o.STATE+":"+l.WAITING,l.WAITING)},isPaused:function(){var e=!1;return this.hls&&(e=this.el.paused&&!this.el.ended),e},setMaxBufferSize:function(e){this.hls?this.hls.config.maxMaxBufferLength=e:t.maxMaxBufferLength=e},setStartingLevel:function(e){i.debug("setStartingLevel  "+e),this.hls.startLevel=e},getStat:function(e,t){return this.stats?this.stats[e]():t},getBandwidth:function(){return this.getStat("getBandwidth",-1)},getBandwidthMin:function(){return this.getStat("getBandwidthMin",-1)},getBandwidthMax:function(){return this.getStat("getBandwidthMax",-1)},getBandwidthAvg:function(){return this.getStat("getBandwidthAvg",-1)},getCurrentRendition:function(){return this.getStat("getCurrentRendition",null)},getFrameDrops:function(){return this.getStat("getFrameDrops",null)},getRenditions:function(){var e=this.getStat("getRenditions",[]);return a.isArray(e)?e:[]},getBufferLength:function(){var e=this.el.buffered,t=0;if(void 0===e||0===e.length)return 0;if(0===this.playhead||isNaN(this.playhead))t=e.end(0)-e.start(0);else for(var n=0;n<e.length;n++)this.playhead>=e.start(n)&&this.playhead<e.end(n)&&(t=e.end(n)-this.playhead);return Math.round(1e3*t)},getMaxBufferLength:function(){return Math.round(1e3*this.hls.config.maxMaxBufferLength)},getMaxAutoLevel:function(){var e=this.hls.autoLevelCapping;return e}},{Events:o})}(),h.Player.prototype.destroy=h.Player.prototype.remove,e.exports=h},function(e,t){!function(n,i){"object"==typeof t&&"object"==typeof e?e.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof t?t.Hls=i():n.Hls=i()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=7)}([function(e,t,n){"use strict";function i(){}function r(e,t){return t="["+e+"] > "+t}function a(e){var t=self.console[e];return t?function(){for(var n=arguments.length,i=Array(n),a=0;n>a;a++)i[a]=arguments[a];i[0]&&(i[0]=r(e,i[0])),t.apply(self.console,i)}:i}function o(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];n.forEach(function(t){d[t]=e[t]?e[t].bind(e):a(t)})}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l={trace:i,debug:i,log:i,warn:i,info:i,error:i},d=l,u=function(e){if(e===!0||"object"===("undefined"==typeof e?"undefined":s(e))){o(e,"debug","log","info","warn","error");try{d.log()}catch(e){d=l}}else d=l},c=d},function(e,t,n){"use strict";t.a={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCH:"hlsLevelSwitch",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCH:"hlsAudioTrackSwitch",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"}},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return r});var i={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(){i(this,e)}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128?!0:!1},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128?!0:!1},e.getID3Data=function(t,n){for(var i=n,r=0;e.isHeader(t,n);){r+=10;var a=e._readSize(t,n+6);r+=a,e.isFooter(t,n+10)&&(r+=10),n+=r}return r>0?t.subarray(i,i+r):void 0},e._readSize=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},e.getTimeStamp=function(t){for(var n=e.getID3Frames(t),i=0;i<n.length;i++){var r=n[i];if(e.isTimeStampFrame(r))return e._readTimeStamp(r)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var n=String.fromCharCode(t[0],t[1],t[2],t[3]),i=e._readSize(t,4),r=10;return{type:n,size:i,data:t.subarray(r,r+i)}},e.getID3Frames=function(t){for(var n=0,i=[];e.isHeader(t,n);){var r=e._readSize(t,n+6);n+=10;for(var a=n+r;a>n+8;){var o=e._getFrameData(t.subarray(n)),s=e._decodeFrame(o);s&&i.push(s),n+=o.size+10}e.isFooter(t,n)&&(n+=10)}return i},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var n=e._utf8ArrayToStr(t.data),i=new Uint8Array(t.data.subarray(n.length+1));return{key:t.type,info:n,data:i.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:a}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var n=1,i=e._utf8ArrayToStr(t.data.subarray(n));n+=i.length+1;var r=e._utf8ArrayToStr(t.data.subarray(n));return{key:t.type,info:i,data:r}}var a=e._utf8ArrayToStr(t.data);return{key:t.type,data:a}},e._utf8ArrayToStr=function(e){for(var t=void 0,n=void 0,i="",r=0,a=e.length;a>r;){var o=e[r++];switch(o>>4){case 0:return i;case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(o);break;case 12:case 13:t=e[r++],i+=String.fromCharCode((31&o)<<6|63&t);break;case 14:t=e[r++],n=e[r++],i+=String.fromCharCode((15&o)<<12|(63&t)<<6|(63&n)<<0)}}return i},e}();t.a=r},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,l,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(n=this._events[e],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),d=n.slice(),r=d.length,l=0;r>l;l++)d[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,o,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){!function(t){var n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),t=t.trim(),!t){if(!n.alwaysNormalize)return e;var r=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");return r.path=o.normalizePath(r.path),o.buildURLFromParts(r)}var a=this.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=this.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=i.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var d={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(d.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var u=s.path,c=u.substring(0,u.lastIndexOf("/")+1)+a.path;d.path=o.normalizePath(c)}else d.path=s.path,a.params||(d.params=s.params,a.query||(d.query=s.query));return null===d.path&&(d.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(d)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(r,"");e.length!==(e=e.replace(a,"")).length;);
return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}(this)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,n,i){var r,a,o,s,l,d=navigator.userAgent.toLowerCase(),u=i,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return r=((192&t[n+2])>>>6)+1,a=(60&t[n+2])>>>2,a>c.length-1?void e.trigger(Event.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+a}):(s=(1&t[n+2])<<2,s|=(192&t[n+3])>>>6,N.b.log("manifest codec:"+i+",ADTS data:type:"+r+",sampleingIndex:"+a+"["+c[a]+"Hz],channelConfig:"+s),/firefox/i.test(d)?a>=6?(r=5,l=new Array(4),o=a-3):(r=2,l=new Array(2),o=a):-1!==d.indexOf("android")?(r=2,l=new Array(2),o=a):(r=5,l=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&a>=6?o=a-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(a>=6&&1===s||/vivaldi/i.test(d))||!i&&1===s)&&(r=2,l=new Array(2)),o=a)),l[0]=r<<3,l[0]|=(14&a)>>1,l[1]|=(1&a)<<7,l[1]|=s<<3,5===r&&(l[1]|=(14&o)>>1,l[2]=(1&o)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:c[a],channelCount:s,codec:"mp4a.40."+r,manifestCodec:u})}function l(e,t){return 255===e[t]&&240===(246&e[t+1])}function d(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return t+1<e.length&&l(e,t)?!0:!1}function h(e,t){if(t+1<e.length&&l(e,t)){var n=d(e,t),i=n;t+5<e.length&&(i=u(e,t));var r=t+i;if(r===e.length||r+1<e.length&&l(e,r))return!0}return!1}function f(e,t,n,i,r){if(!e.samplerate){var a=s(t,n,i,r);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,N.b.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function p(e){return 9216e4/e}function g(e,t,n,i,r){var a,o,s,l=e.length;return a=d(e,t),o=u(e,t),o-=a,o>0&&l>=t+a+o?(s=n+i*r,{headerLength:a,frameLength:o,stamp:s}):void 0}function m(e,t,n,i,r){var a=p(e.samplerate),o=g(t,n,i,r,a);if(o){var s=o.stamp,l=o.headerLength,d=o.frameLength,u={unit:t.subarray(n+l,n+l+d),pts:s,dts:s};return e.samples.push(u),e.len+=d,{sample:u,length:d+l}}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var C=n(1),L=n(2),I=function(){function e(t,n){i(this,e),this.subtle=t,this.aesIV=n}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),_=I,P=function(){function e(t,n){r(this,e),this.subtle=t,this.key=n}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),D=P,x=function(){function e(){a(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;4>i;i++)n[i]=t.getUint32(4*i);return n},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],c=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;256>g;g++)128>g?h[g]=g<<1:h[g]=g<<1^283;for(g=0;256>g;g++){var m=p^p<<1^p<<2^p<<3^p<<4;m=m>>>8^255&m^99,e[f]=m,t[m]=f;var v=h[f],y=h[v],E=h[y],A=257*h[m]^16843008*m;i[f]=A<<24|A>>>8,r[f]=A<<16|A>>>16,a[f]=A<<8|A>>>24,o[f]=A,A=16843009*E^65537*y^257*v^16843008*f,l[m]=A<<24|A>>>8,d[m]=A<<16|A>>>16,u[m]=A<<8|A>>>24,c[m]=A,f?(f=v^h[h[h[E^v]]],p^=h[h[p]]):f=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a=this.ksRows=4*(r+6+1),o=void 0,s=void 0,l=this.keySchedule=new Uint32Array(a),d=this.invKeySchedule=new Uint32Array(a),u=this.sBox,c=this.rcon,h=this.invSubMix,f=h[0],p=h[1],g=h[2],m=h[3],v=void 0,y=void 0;for(o=0;a>o;o++)r>o?v=l[o]=t[o]:(y=v,o%r===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y],y^=c[o/r|0]<<24):r>6&&o%r===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[255&y]),l[o]=v=(l[o-r]^y)>>>0);for(s=0;a>s;s++)o=a-s,y=3&s?l[o]:l[o-4],4>s||4>=o?d[s]=y:d[s]=f[u[y>>>24]]^p[u[y>>>16&255]]^g[u[y>>>8&255]]^m[u[255&y]],d[s]=d[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,n){for(var i,r,a=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,l=this.invSubMix,d=l[0],u=l[1],c=l[2],h=l[3],f=this.uint8ArrayToUint32Array_(n),p=f[0],g=f[1],m=f[2],v=f[3],y=new Int32Array(e),E=new Int32Array(y.length),A=void 0,b=void 0,T=void 0,S=void 0,R=void 0,k=void 0,w=void 0,M=void 0,C=void 0,L=void 0,I=void 0,_=void 0,P=this.networkToHostOrderSwap;t<y.length;){for(C=P(y[t]),L=P(y[t+1]),I=P(y[t+2]),_=P(y[t+3]),R=C^o[0],k=_^o[1],w=I^o[2],M=L^o[3],i=4,r=1;a>r;r++)A=d[R>>>24]^u[k>>16&255]^c[w>>8&255]^h[255&M]^o[i],b=d[k>>>24]^u[w>>16&255]^c[M>>8&255]^h[255&R]^o[i+1],T=d[w>>>24]^u[M>>16&255]^c[R>>8&255]^h[255&k]^o[i+2],S=d[M>>>24]^u[R>>16&255]^c[k>>8&255]^h[255&w]^o[i+3],R=A,k=b,w=T,M=S,i+=4;A=s[R>>>24]<<24^s[k>>16&255]<<16^s[w>>8&255]<<8^s[255&M]^o[i],b=s[k>>>24]<<24^s[w>>16&255]<<16^s[M>>8&255]<<8^s[255&R]^o[i+1],T=s[w>>>24]<<24^s[M>>16&255]<<16^s[R>>8&255]<<8^s[255&k]^o[i+2],S=s[M>>>24]<<24^s[R>>16&255]<<16^s[k>>8&255]<<8^s[255&w]^o[i+3],i+=3,E[t]=P(A^p),E[t+1]=P(S^g),E[t+2]=P(T^m),E[t+3]=P(b^v),p=C,g=L,m=I,v=_,t+=4}return E.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),O=x,N=n(0),B=function(){function e(t,n){o(this,e),this.observer=t,this.config=n,this.logEnabled=!0;try{var i=crypto?crypto:self.crypto;this.subtle=i.subtle||i.webkitSubtle}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,n,i){var r=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(N.b.log("JS AES decrypt"),this.logEnabled=!1);var a=this.decryptor;a||(this.decryptor=a=new O),a.expandKey(t),i(a.decrypt(e,0,n))}else{this.logEnabled&&(N.b.log("WebCrypto AES decrypt"),this.logEnabled=!1);var o=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new D(o,t)),this.fastAesKey.expandKey().then(function(a){var s=new _(o,n);s.decrypt(e,a).catch(function(a){r.onWebCryptoError(a,e,t,n,i)}).then(function(e){i(e)})}).catch(function(a){r.onWebCryptoError(a,e,t,n,i)})}},e.prototype.onWebCryptoError=function(e,t,n,i,r){this.config.enableSoftwareAES?(N.b.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,n,i,r)):(N.b.error("decrypting error : "+e.message),this.observer.trigger(Event.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}(),F=B,U=n(3),G=function(){function e(t,n,i){v(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,i=U.a.getID3Data(e,0);if(i&&void 0!==U.a.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);n>t;t++)if(h(e,t))return N.b.log("ADTS sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=this._audioTrack,a=U.a.getID3Data(e,0),o=90*U.a.getTimeStamp(a),s=0,l=o,d=e.length,u=a.length,h=[{pts:l,dts:l,data:a}];d-1>u;)if(c(e,u)&&d>u+5){f(r,this.observer,e,u,r.manifestCodec);var p=m(r,e,u,o,s);if(!p){N.b.log("Unable to parse AAC frame");break}u+=p.length,l=p.sample.pts,s++}else U.a.isHeader(e,u)?(a=U.a.getID3Data(e,u),h.push({pts:l,dts:l,data:a}),u+=a.length):u++;this.remuxer.remux(r,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}(),j=G,H=Math.pow(2,32)-1,V=function(){function e(t,n){y(this,e),this.observer=t,this.remuxer=n}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,n,i,r){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t),o={};a.audio&&a.video?o.audiovideo={container:"video/mp4",codec:n+","+i,initSegment:r?t:null}:(a.audio&&(o.audio={container:"audio/mp4",codec:n,initSegment:r?t:null}),a.video&&(o.video={container:"video/mp4",codec:i,initSegment:r?t:null})),this.observer.trigger(C.a.FRAG_PARSING_INIT_SEGMENT,{tracks:o})}else n&&(this.audioCodec=n),i&&(this.videoCodec=i)},e.probe=function(t){if(t.length>=8){var n=e.bin2str(t.subarray(4,8));return["moof","ftyp","styp"].indexOf(n)>=0}return!1},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var n=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return 0>n?4294967296+n:n},e.writeUint32=function(e,t,n){e.data&&(t+=e.start,e=e.data),e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n},e.findBox=function(t,n){var i,r,a,o,s,l,d,u=[];if(t.data?(l=t.start,o=t.end,t=t.data):(l=0,o=t.byteLength),!n.length)return null;for(i=l;o>i;)r=e.readUint32(t,i),a=e.bin2str(t.subarray(i+4,i+8)),d=r>1?i+r:o,a===n[0]&&(1===n.length?u.push({data:t,start:i+8,end:d}):(s=e.findBox({data:t,start:i+8,end:d},n.slice(1)),s.length&&(u=u.concat(s)))),i=d;return u},e.parseInitSegment=function(t){var n=[],i=e.findBox(t,["moov","trak"]);return i.forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var r=i.data[i.start],a=0===r?12:20,o=e.readUint32(i,a),s=e.findBox(t,["mdia","mdhd"])[0];if(s){r=s.data[s.start],a=0===r?12:20;var l=e.readUint32(s,a),d=e.findBox(t,["mdia","hdlr"])[0];if(d){var u=e.bin2str(d.data.subarray(d.start+8,d.start+12)),c={soun:"audio",vide:"video"}[u];c&&(n[o]={timescale:l,type:c},n[c]={timescale:l,id:o})}}}}),n},e.getStartDTS=function(t,n){var i,r,a;return i=e.findBox(n,["moof","traf"]),r=[].concat.apply([],i.map(function(n){return e.findBox(n,["tfhd"]).map(function(i){var r,a,o;return r=e.readUint32(i,4),a=t[r].timescale||9e4,o=e.findBox(n,["tfdt"]).map(function(t){var n,i;return n=t.data[t.start],i=e.readUint32(t,4),1===n&&(i*=Math.pow(2,32),i+=e.readUint32(t,8)),i})[0],o/a})})),a=Math.min.apply(null,r),isFinite(a)?a:0},e.offsetStartDTS=function(t,n,i){e.findBox(n,["moof","traf"]).map(function(n){return e.findBox(n,["tfhd"]).map(function(r){var a=e.readUint32(r,4),o=t[a].timescale||9e4;e.findBox(n,["tfdt"]).map(function(t){var n=t.data[t.start],r=e.readUint32(t,4);if(0===n)e.writeUint32(t,4,r-i*o);else{r*=Math.pow(2,32),r+=e.readUint32(t,8),r-=i*o;var a=Math.floor(r/(H+1)),s=Math.floor(r%(H+1));e.writeUint32(t,4,a),e.writeUint32(t,8,s)}})})})},e.prototype.append=function(t,n,i,r){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),a=this.initData);var o=void 0,s=this.initPTS;if(void 0===s){var l=e.getStartDTS(a,t);this.initPTS=s=l-n,this.observer.trigger(C.a.INIT_PTS_FOUND,{initPTS:s})}e.offsetStartDTS(a,t,s),o=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,o,i,r,t)},e.prototype.destroy=function(){},e}(),Y=V,z={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,n,i,r){if(!(n+24>t.length)){var a=this.parseHeader(t,n);if(a&&n+a.frameLength<=t.length){var o=10368e4/a.sampleRate,s=i+r*o,l={unit:t.subarray(n,n+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(l),e.len+=a.frameLength,{sample:l,length:a.frameLength}}}},parseHeader:function(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3,o=!!(2&e[t+2]);if(1!==n&&0!==r&&15!==r&&3!==a){var s=3===n?3-i:3===i?3:4,l=1e3*z.BitratesMap[14*s+r-1],d=3===n?0:2===n?1:2,u=z.SamplingRateMap[3*d+a],c=o?1:0,h=e[t+3]>>6===3?1:2,f=3===i?(3===n?12:6)*l/u+c<<2:(3===n?144:72)*l/u+c|0;return{sampleRate:u,channelCount:h,frameLength:f}}},isHeaderPattern:function(e,t){return 255===e[t]&&224===(224&e[t+1])&&0!==(6&e[t+1])},isHeader:function(e,t){return t+1<e.length&&this.isHeaderPattern(e,t)?!0:!1},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var n=4,i=this.parseHeader(e,t),r=n;i&&i.frameLength&&(r=i.frameLength);var a=t+r;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},K=z,W=function(){function e(t){E(this,e),this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;return e>32&&N.b.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!==(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,n,i=8,r=8;for(t=0;e>t;t++)0!==r&&(n=this.readEG(),r=(i+n+256)%256),i=0===r?i:r},e.prototype.readSPS=function(){var e,t,n,i,r,a,o,s,l,d=0,u=0,c=0,h=0,f=this.readUByte.bind(this),p=this.readBits.bind(this),g=this.readUEG.bind(this),m=this.readBoolean.bind(this),v=this.skipBits.bind(this),y=this.skipEG.bind(this),E=this.skipUEG.bind(this),A=this.skipScalingList.bind(this);if(f(),e=f(),t=p(5),v(3),n=f(),E(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=g();if(3===b&&v(1),E(),E(),v(1),m())for(s=3!==b?8:12,l=0;s>l;l++)m()&&A(6>l?16:64)}E();var T=g();if(0===T)g();else if(1===T)for(v(1),y(),y(),i=g(),l=0;i>l;l++)y();E(),v(1),r=g(),a=g(),o=p(1),0===o&&v(1),v(1),m()&&(d=g(),u=g(),c=g(),h=g());var S=[1,1];if(m()&&m()){var R=f();switch(R){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[f()<<8|f(),f()<<8|f()]}}return{width:Math.ceil(16*(r+1)-2*d-2*u),height:(2-o)*(a+1)*16-(o?2:4)*(c+h),pixelRatio:S}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),q=W,X=function(){function e(t,n,i,r){A(this,e),this.decryptdata=i,this.discardEPB=r,this.decrypter=new F(t,n)}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,n,i){var r=e[t].unit,a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length),s=this;this.decryptBuffer(o,function(a){a=new Uint8Array(a),r.set(a,16),i||s.decryptAacSamples(e,t+1,n)})},e.prototype.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,n,i),!i)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<=e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var n=0,i=32;i<=e.length-16;i+=160,n+=16)e.set(t.subarray(n,n+16),i);return e},e.prototype.decryptAvcSample=function(e,t,n,i,r,a){var o=this.discardEPB(r.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){r.data=l.getAvcDecryptedUnit(o,s),a||l.decryptAvcSamples(e,t,n+1,i)})},e.prototype.decryptAvcSamples=function(e,t,n,i){for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.length<=48||1!==a.type&&5!==a.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,n,i,a,o),!o)return}}}},e}(),Q=X,J=function(){function e(t,n,i,r){b(this,e),this.observer=t,this.config=i,this.typeSupported=r,this.remuxer=n,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new Q(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(e){return e.length>=564&&71===e[0]&&71===e[188]&&71===e[376]?!0:!1},e.prototype.resetInitSegment=function(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack={container:"video/mp2t",type:"video",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:0},this._audioTrack={container:"video/mp2t",type:"audio",id:-1,inputTimeScale:9e4,duration:i,sequenceNumber:0,samples:[],len:0,isAAC:!0},this._id3Track={type:"id3",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this._txtTrack={type:"text",id:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0},this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=t,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(e,t,n,i){var r,a,o,s,l,d,u=e.length,c=!1;this.contiguous=n;var h=this.pmtParsed,f=this._avcTrack,p=this._audioTrack,g=this._id3Track,m=f.id,v=p.id,y=g.id,E=this._pmtId,A=f.pesData,b=p.pesData,T=g.pesData,S=this._parsePAT,R=this._parsePMT,k=this._parsePES,w=this._parseAVCPES.bind(this),M=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),_=this._parseID3PES.bind(this);for(u-=u%188,r=0;u>r;r+=188)if(71===e[r]){if(a=!!(64&e[r+1]),o=((31&e[r+1])<<8)+e[r+2],s=(48&e[r+3])>>4,s>1){if(l=r+5+e[r+4],l===r+188)continue}else l=r+4;switch(o){case m:a&&(A&&(d=k(A))&&w(d,!1),A={data:[],size:0}),A&&(A.data.push(e.subarray(l,r+188)),A.size+=r+188-l);break;case v:a&&(b&&(d=k(b))&&(p.isAAC?M(d):I(d)),b={data:[],size:0}),b&&(b.data.push(e.subarray(l,r+188)),b.size+=r+188-l);break;case y:a&&(T&&(d=k(T))&&_(d),T={data:[],size:0}),T&&(T.data.push(e.subarray(l,r+188)),T.size+=r+188-l);break;case 0:a&&(l+=e[l]+1),E=this._pmtId=S(e,l);break;case E:a&&(l+=e[l]+1);var P=R(e,l,this.typeSupported.mpeg===!0||this.typeSupported.mp3===!0,null!=this.sampleAes);m=P.avc,m>0&&(f.id=m),v=P.audio,v>0&&(p.id=v,p.isAAC=P.isAAC),y=P.id3,y>0&&(g.id=y),c&&!h&&(N.b.log("reparse from beginning"),c=!1,r=-188),h=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(C.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});A&&(d=k(A))?(w(d,!0),f.pesData=null):f.pesData=A,b&&(d=k(b))?(p.isAAC?M(d):I(d),p.pesData=null):(b&&b.size&&N.b.log("last AAC PES packet truncated,might overlap between fragments"),p.pesData=b),T&&(d=k(T))?(_(d),g.pesData=null):g.pesData=T,null==this.sampleAes?this.remuxer.remux(p,f,g,this._txtTrack,t,n,i):this.decryptAndRemux(p,f,g,this._txtTrack,t,n,i)},e.prototype.decryptAndRemux=function(e,t,n,i,r,a,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,n,i,r,a,o)})}else this.decryptAndRemuxAvc(e,t,n,i,r,a,o)},e.prototype.decryptAndRemuxAvc=function(e,t,n,i,r,a,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,n,i,r,a,o)})}else this.remuxer.remux(e,t,n,i,r,a,o)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,n,i){var r,a,o,s,l={audio:-1,avc:-1,id3:-1,isAAC:!0};for(r=(15&e[t+1])<<8|e[t+2],a=t+3+r-4,o=(15&e[t+10])<<8|e[t+11],t+=12+o;a>t;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!i){N.b.log("unkown stream type:"+e[t]);break}case 15:-1===l.audio&&(l.audio=s);break;case 21:-1===l.id3&&(l.id3=s);break;case 219:if(!i){N.b.log("unkown stream type:"+e[t]);break}case 27:-1===l.avc&&(l.avc=s);break;case 3:case 4:n?-1===l.audio&&(l.audio=s,l.isAAC=!1):N.b.log("MPEG audio found, not supported in this browser for now");break;case 36:N.b.warn("HEVC stream type found, not supported for now");break;default:N.b.log("unkown stream type:"+e[t])}t+=((15&e[t+3])<<8|e[t+4])+5}return l},e.prototype._parsePES=function(e){var t,n,i,r,a,o,s,l,d,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var h=new Uint8Array(c[0].length+c[1].length);h.set(c[0]),h.set(c[1],c[0].length),c[0]=h,c.splice(1,1)}if(t=c[0],i=(t[0]<<16)+(t[1]<<8)+t[2],1===i){if(r=(t[4]<<8)+t[5],r&&r>e.size-6)return null;n=t[7],192&n&&(s=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,s>4294967295&&(s-=8589934592),64&n?(l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,l>4294967295&&(l-=8589934592),s-l>54e5&&(N.b.warn(Math.round((s-l)/9e4)+"s delta between PTS and DTS, align them"),s=l)):l=s),a=t[8],d=a+9,e.size-=d,o=new Uint8Array(e.size);for(var f=0,p=c.length;p>f;f++){t=c[f];var g=t.byteLength;if(d){if(d>g){d-=g;continue}t=t.subarray(d),g-=d,d=0}o.set(t,u),u+=g}return r&&(r-=a+3),{data:o,pts:s,dts:l,len:r}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var n=t.samples,i=n.length;!this.config.forceKeyFrameOnDiscontinuity||e.key===!0||t.sps&&(i||this.contiguous)?(e.id=i,n.push(e)):t.dropped++}e.debug.length&&N.b.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var n,i,r,a=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=!1,d=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),h=function(e,t,n,i){return{key:e,pts:t,dts:n,units:[],debug:i}};e.data=null,d&&s.length&&!o.audFound&&(c(d,o),d=this.avcSample=h(!1,e.pts,e.dts,"")),s.forEach(function(t){switch(t.type){case 1:i=!0,d||(d=a.avcSample=h(!0,e.pts,e.dts,"")),l&&(d.debug+="NDR "),d.frame=!0;var s=t.data;if(u&&s.length>4){var f=new q(s).readSliceType();(2===f||4===f||7===f||9===f)&&(d.key=!0)}break;case 5:i=!0,d||(d=a.avcSample=h(!0,e.pts,e.dts,"")),l&&(d.debug+="IDR "),d.key=!0,d.frame=!0;break;case 6:i=!0,l&&d&&(d.debug+="SEI "),n=new q(a.discardEPB(t.data)),n.readUByte();for(var p=0,g=0,m=!1,v=0;!m&&n.bytesAvailable>1;){p=0;do v=n.readUByte(),p+=v;while(255===v);g=0;do v=n.readUByte(),g+=v;while(255===v);if(4===p&&0!==n.bytesAvailable){m=!0;var y=n.readUByte();if(181===y){var E=n.readUShort();if(49===E){var A=n.readUInt();if(1195456820===A){var b=n.readUByte();if(3===b){var T=n.readUByte(),S=n.readUByte(),R=31&T,k=[T,S];for(r=0;R>r;r++)k.push(n.readUByte()),k.push(n.readUByte()),k.push(n.readUByte());a._insertSampleInOrder(a._txtTrack.samples,{type:3,pts:e.pts,bytes:k})}}}}}else if(g<n.bytesAvailable)for(r=0;g>r;r++)n.readUByte()}break;case 7:if(i=!0,u=!0,l&&d&&(d.debug+="SPS "),!o.sps){n=new q(t.data);var w=n.readSPS();o.width=w.width,o.height=w.height,o.pixelRatio=w.pixelRatio,o.sps=[t.data],o.duration=a._duration;var M=t.data.subarray(1,4),C="avc1.";for(r=0;3>r;r++){var L=M[r].toString(16);L.length<2&&(L="0"+L),C+=L}o.codec=C}break;case 8:i=!0,l&&d&&(d.debug+="PPS "),o.pps||(o.pps=[t.data]);break;case 9:i=!1,o.audFound=!0,d&&c(d,o),d=a.avcSample=h(!1,e.pts,e.dts,l?"AUD ":"");break;case 12:i=!1;break;default:i=!1,d&&(d.debug+="unknown NAL "+t.type+" ")}if(d&&i){var I=d.units;I.push(t)}}),t&&d&&(c(d,o),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var n=e.length;if(n>0){if(t.pts>=e[n-1].pts)e.push(t);else for(var i=n-1;i>=0;i--)if(t.pts<e[i].pts){e.splice(i,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e=this.avcSample,t=void 0;if(!e||0===e.units.length){var n=this._avcTrack,i=n.samples;e=i[i.length-1]}if(e){var r=e.units;t=r[r.length-1]}return t},e.prototype._parseAVCNALu=function(e){var t,n,i,r,a,o=0,s=e.byteLength,l=this._avcTrack,d=l.naluState||0,u=d,c=[],h=-1;for(-1===d&&(h=0,a=31&e[0],d=0,o=1);s>o;)if(t=e[o++],d)if(1!==d)if(t)if(1===t){if(h>=0)i={data:e.subarray(h,o-d-1),type:a},c.push(i);else{var f=this._getLastNalUnit();if(f&&(u&&4-u>=o&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),n=o-d-1,n>0)){var p=new Uint8Array(f.data.byteLength+n);p.set(f.data,0),p.set(e.subarray(0,n),f.data.byteLength),f.data=p}}s>o?(r=31&e[o],h=o,a=r,d=0):d=-1}else d=0;else d=3;else d=t?0:2;else d=t?0:1;if(h>=0&&d>=0&&(i={data:e.subarray(h,s),type:a,state:d},c.push(i)),0===c.length){var g=this._getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return l.naluState=d,c},e.prototype.discardEPB=function(e){for(var t,n,i=e.byteLength,r=[],a=1;i-2>a;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;t>a;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},e.prototype._parseAACPES=function(e){var t,n,i,r,a,o=this._audioTrack,s=e.data,l=e.pts,d=0,u=this.aacOverFlow,h=this.aacLastPTS;if(u){var g=new Uint8Array(u.byteLength+s.byteLength);g.set(u,0),g.set(s,u.byteLength),s=g}for(i=d,a=s.length;a-1>i&&!c(s,i);i++);if(i){var v,y;if(a-1>i?(v="AAC PES did not start with ADTS header,offset:"+i,y=!1):(v="no ADTS header found in AAC PES",y=!0),N.b.warn("parsing error:"+v),this.observer.trigger(C.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:y,reason:v}),y)return}if(f(o,this.observer,s,i,this.audioCodec),n=0,t=p(o.samplerate),u&&h){var E=h+t;Math.abs(E-l)>1&&(N.b.log("AAC: align PTS for overlapping frames by "+Math.round((E-l)/90)),l=E)}for(;a>i;)if(c(s,i)&&a>i+5){var A=m(o,s,i,l,n);if(!A)break;i+=A.length,r=A.sample.pts,n++}else i++;u=a>i?s.subarray(i,a):null,this.aacOverFlow=u,this.aacLastPTS=r},e.prototype._parseMPEGPES=function(e){for(var t=e.data,n=t.length,i=0,r=0,a=e.pts;n>r;)if(K.isHeader(t,r)){var o=K.appendFrame(this._audioTrack,t,r,a,i);if(!o)break;r+=o.length,i++}else r++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),Z=J,$=function(){function e(t,n,i){T(this,e),this.observer=t,this.config=i,this.remuxer=n}return e.prototype.resetInitSegment=function(e,t,n,i){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:i,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,n,i=U.a.getID3Data(e,0);if(i&&void 0!==U.a.getTimeStamp(i))for(t=i.length,n=Math.min(e.length-1,t+100);n>t;t++)if(K.probe(e,t))return N.b.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,n,i){for(var r=U.a.getID3Data(e,0),a=90*U.a.getTimeStamp(r),o=r.length,s=e.length,l=0,d=0,u=this._audioTrack,c=[{pts:a,dts:a,data:r}];s>o;)if(K.isHeader(e,o)){var h=K.appendFrame(u,e,o,a,l);if(!h)break;o+=h.length,d=h.sample.pts,l++}else U.a.isHeader(e,o)?(r=U.a.getID3Data(e,o),c.push({pts:d,dts:d,data:r}),o+=r.length):o++;this.remuxer.remux(u,{samples:[]},{samples:c,inputTimeScale:9e4},{samples:[]},t,n,i)},e.prototype.destroy=function(){},e}(),ee=$,te=function(){function e(){S(this,e)}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),ne=te,ie=Math.pow(2,32)-1,re=function(){function e(){R(this,e)}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),
e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t,n=Array.prototype.slice.call(arguments,1),i=8,r=n.length,a=r;r--;)i+=n[r].byteLength;for(t=new Uint8Array(i),t[0]=i>>24&255,t[1]=i>>16&255,t[2]=i>>8&255,t[3]=255&i,t.set(e,4),r=0,i=8;a>r;r++)t.set(n[r],i),i+=n[r].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var i=Math.floor(n/(ie+1)),r=Math.floor(n%(ie+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var i=Math.floor(n/(ie+1)),r=Math.floor(n%(ie+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,r>>24,r>>16&255,r>>8&255,255&r,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],o=[];for(n=0;n<t.sps.length;n++)i=t.sps[n],r=i.byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)i=t.pps[n],r=i.byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,d=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,i=t.duration*t.timescale,r=t.width,a=t.height,o=Math.floor(i/(ie+1)),s=Math.floor(i%(ie+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,255&r,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,n){var i=e.sdtp(t),r=t.id,a=Math.floor(n/(ie+1)),o=Math.floor(n%(ie+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,o,s,l,d=t.samples||[],u=d.length,c=12+16*u,h=new Uint8Array(c);for(n+=8+c,h.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;u>i;i++)r=d[i],a=r.duration,o=r.size,s=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n,i=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+i.byteLength),n.set(e.FTYP),n.set(i,e.FTYP.byteLength),n},e}(),ae=re,oe=1e4,se=function(){function e(t,n,i,r){k(this,e),this.observer=t,this.config=n,this.typeSupported=i;var a=navigator.userAgent;this.isSafari=r&&r.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,n,i,r,a,o){if(this.ISGenerated||this.generateIS(e,t,r),this.ISGenerated)if(e.samples.length){e.timescale||(N.b.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,r));var s=this.remuxAudio(e,r,a,o);if(t.samples.length){var l=void 0;s&&(l=s.endPTS-s.startPTS),t.timescale||(N.b.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,r)),this.remuxVideo(t,r,a,l,o)}}else{var d=void 0;t.samples.length&&(d=this.remuxVideo(t,r,a,o)),d&&e.codec&&this.remuxEmptyAudio(e,r,a,d)}n.samples.length&&this.remuxID3(n,r),i.samples.length&&this.remuxText(i,r),this.observer.trigger(C.a.FRAG_PARSED)},e.prototype.generateIS=function(e,t,n){var i,r,a=this.observer,o=e.samples,s=t.samples,l=this.typeSupported,d="audio/mp4",u={},c={tracks:u},h=void 0===this._initPTS;if(h&&(i=r=1/0),e.config&&o.length&&(e.timescale=e.samplerate,N.b.log("audio sampling rate : "+e.samplerate),e.isAAC||(l.mpeg?(d="audio/mpeg",e.codec=""):l.mp3&&(e.codec="mp3")),u.audio={container:d,codec:e.codec,initSegment:!e.isAAC&&l.mpeg?new Uint8Array:ae.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(i=r=o[0].pts-e.inputTimeScale*n)),t.sps&&t.pps&&s.length){var f=t.inputTimeScale;t.timescale=f,u.video={container:"video/mp4",codec:t.codec,initSegment:ae.initSegment([t]),metadata:{width:t.width,height:t.height}},h&&(i=Math.min(i,s[0].pts-f*n),r=Math.min(r,s[0].dts-f*n),this.observer.trigger(C.a.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(u).length?(a.trigger(C.a.FRAG_PARSING_INIT_SEGMENT,c),this.ISGenerated=!0,h&&(this._initPTS=i,this._initDTS=r)):a.trigger(C.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,n,i,r){var a,o,s,l,d,u,c,h,f=8,p=e.timescale,g=e.samples,m=[],v=g.length,y=this._PTSNormalize,E=this._initDTS,A=this.nextAvcDts,b=this.isSafari;b&&(n|=g.length&&A&&(r&&Math.abs(t-A/p)<.1||Math.abs(g[0].pts-A-E)<p/5)),n||(A=t*p),g.forEach(function(e){e.pts=y(e.pts-E,A),e.dts=y(e.dts-E,A)}),g.sort(function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n?n:i?i:e.id-t.id});var T=g.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(0>T){N.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(T/90)+" ms to overcome this issue");for(var S=0;S<g.length;S++)g[S].dts+=T}var R=g[0];d=Math.max(R.dts,0),l=Math.max(R.pts,0);var k=Math.round((d-A)/90);n&&k&&(k>1?N.b.log("AVC:"+k+" ms hole between fragments detected,filling it"):-1>k&&N.b.log("AVC:"+-k+" ms overlapping between fragments detected"),d=A,g[0].dts=d,l=Math.max(l-k,A),g[0].pts=l,N.b.log("Video/PTS/DTS adjusted: "+Math.round(l/90)+"/"+Math.round(d/90)+",delta:"+k+" ms")),u=d,R=g[g.length-1],h=Math.max(R.dts,0),c=Math.max(R.pts,0,h),b&&(a=Math.round((h-d)/(g.length-1)));for(var w=0,M=0,I=0;v>I;I++){for(var _=g[I],P=_.units,D=P.length,x=0,O=0;D>O;O++)x+=P[O].data.length;M+=x,w+=D,_.length=x,b?_.dts=d+I*a:_.dts=Math.max(_.dts,d),_.pts=Math.max(_.pts,_.dts)}var B=M+4*w+8;try{o=new Uint8Array(B)}catch(e){return void this.observer.trigger(C.a.ERROR,{type:L.b.MUX_ERROR,details:L.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating video mdat "+B})}var F=new DataView(o.buffer);F.setUint32(0,B),o.set(ae.types.mdat,4);for(var U=0;v>U;U++){for(var G=g[U],j=G.units,H=0,V=void 0,Y=0,z=j.length;z>Y;Y++){var K=j[Y],W=K.data,q=K.data.byteLength;F.setUint32(f,q),f+=4,o.set(W,f),f+=q,H+=4+q}if(b)V=Math.max(0,a*Math.round((G.pts-G.dts)/a));else{if(v-1>U)a=g[U+1].dts-G.dts;else{var X=this.config,Q=G.dts-g[U>0?U-1:U].dts;if(X.stretchShortVideoTrack){var J=X.maxBufferHole,Z=X.maxSeekHole,$=Math.floor(Math.min(J,Z)*p),ee=(i?l+i*p:this.nextAudioPts)-G.pts;ee>$?(a=ee-Q,0>a&&(a=Q),N.b.log("It is approximately "+ee/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=Q}else a=Q}V=Math.round(G.pts-G.dts)}m.push({size:H,duration:a,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=h+a;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,m.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=m[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=m,s=ae.moof(e.sequenceNumber++,d,e),e.samples=[];var ie={data1:s,data2:o,startPTS:l/p,endPTS:(c+a)/p,startDTS:d/p,endDTS:this.nextAvcDts/p,type:"video",nb:m.length,dropped:te};return this.observer.trigger(C.a.FRAG_PARSING_DATA,ie),ie},e.prototype.remuxAudio=function(e,t,n,i){var r,a,o,s,l,d,u,c=e.inputTimeScale,h=e.timescale,f=c/h,p=e.isAAC?1024:1152,g=p*f,m=this._PTSNormalize,v=this._initDTS,y=!e.isAAC&&this.typeSupported.mpeg,E=e.samples,A=[],b=this.nextAudioPts;if(n|=E.length&&b&&(i&&Math.abs(t-b/c)<.1||Math.abs(E[0].pts-b-v)<20*g),n||(b=t*c),E.forEach(function(e){e.pts=e.dts=m(e.pts-v,b)}),E.sort(function(e,t){return e.pts-t.pts}),i&&e.isAAC)for(var T=0,S=b;T<E.length;){var R,k=E[T],w=k.pts;R=w-S;var M=Math.abs(1e3*R/c);if(-g>=R)N.b.warn("Dropping 1 audio frame @ "+(S/c).toFixed(3)+"s due to "+M+" ms overlap."),E.splice(T,1),e.len-=k.unit.length;else if(R>=g&&oe>M&&S){var I=Math.round(R/g);N.b.warn("Injecting "+I+" audio frame @ "+(S/c).toFixed(3)+"s due to "+Math.round(1e3*R/c)+" ms gap.");for(var _=0;I>_;_++){var P=Math.max(S,0);o=ne.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),o||(N.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),o=k.unit.subarray()),E.splice(T,0,{unit:o,pts:P,dts:P}),e.len+=o.length,S+=g,T++}k.pts=k.dts=S,S+=g,T++}else Math.abs(R)>.1*g,k.pts=k.dts=S,S+=g,T++}for(var D=0,x=E.length;x>D;D++){var O=E[D],B=O.unit,F=O.pts;if(void 0!==u)a.duration=Math.round((F-u)/f);else{var U=Math.round(1e3*(F-b)/c),G=0;if(n&&e.isAAC&&U){if(U>0&&oe>U)G=Math.round((F-b)/g),N.b.log(U+" ms hole between AAC samples detected,filling it"),G>0&&(o=ne.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),o||(o=B.subarray()),e.len+=G*o.length);else if(-12>U){N.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(b/c).toFixed(3)+"s/"+(F/c).toFixed(3)+"s/"+-U+"ms"),e.len-=B.byteLength;continue}F=b}if(d=Math.max(0,F),!(e.len>0))return;var j=y?e.len:e.len+8;r=y?0:8;try{s=new Uint8Array(j)}catch(e){return void this.observer.trigger(C.a.ERROR,{type:L.b.MUX_ERROR,details:L.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating audio mdat "+j})}if(!y){var H=new DataView(s.buffer);H.setUint32(0,j),s.set(ae.types.mdat,4)}for(var V=0;G>V;V++)o=ne.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),o||(N.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),o=B.subarray()),s.set(o,r),r+=o.byteLength,a={size:o.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(a)}s.set(B,r);var Y=B.byteLength;r+=Y,a={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},A.push(a),u=F}var z=0,K=A.length;if(K>=2&&(z=A[K-2].duration,a.duration=z),K){this.nextAudioPts=b=u+f*z,e.len=0,e.samples=A,l=y?new Uint8Array:ae.moof(e.sequenceNumber++,d/f,e),e.samples=[];var W=d/c,q=b/c,X={data1:l,data2:s,startPTS:W,endPTS:q,startDTS:W,endDTS:q,type:"audio",nb:K};return this.observer.trigger(C.a.FRAG_PARSING_DATA,X),X}return null},e.prototype.remuxEmptyAudio=function(e,t,n,i){var r=e.inputTimeScale,a=e.samplerate?e.samplerate:r,o=r/a,s=this.nextAudioPts,l=(void 0!==s?s:i.startDTS*r)+this._initDTS,d=i.endDTS*r+this._initDTS,u=1024,c=o*u,h=Math.ceil((d-l)/c),f=ne.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(N.b.warn("remux empty Audio"),!f)return void N.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var p=[],g=0;h>g;g++){var m=l+g*c;p.push({unit:f,pts:m,dts:m}),e.len+=f.length}e.samples=p,this.remuxAudio(e,t,n)},e.prototype.remuxID3=function(e,t){var n,i=e.samples.length,r=e.inputTimeScale,a=this._initPTS,o=this._initDTS;if(i){for(var s=0;i>s;s++)n=e.samples[s],n.pts=(n.pts-a)/r,n.dts=(n.dts-o)/r;this.observer.trigger(C.a.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[],t=t},e.prototype.remuxText=function(e,t){e.samples.sort(function(e,t){return e.pts-t.pts});var n,i=e.samples.length,r=e.inputTimeScale,a=this._initPTS;if(i){for(var o=0;i>o;o++)n=e.samples[o],n.pts=(n.pts-a)/r;this.observer.trigger(C.a.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[],t=t},e.prototype._PTSNormalize=function(e,t){var n;if(void 0===t)return e;for(n=e>t?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e},e}(),le=se,de=function(){function e(t){w(this,e),this.observer=t}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,n,i,r,a,o,s){var l=this.observer,d="";e&&(d+="audio"),t&&(d+="video"),l.trigger(C.a.FRAG_PARSING_DATA,{data1:s,startPTS:r,startDTS:r,type:d,nb:1,dropped:0}),l.trigger(C.a.FRAG_PARSED)},e}(),ue=de,ce=function(){function e(t,n,i,r){M(this,e),this.observer=t,this.typeSupported=n,this.config=i,this.vendor=r}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,n,i,r,a,o,s,l,d,u,c){if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var h=this.decrypter;null==h&&(h=this.decrypter=new F(this.observer,this.config));var f,p=this;try{f=performance.now()}catch(e){f=Date.now()}h.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var h;try{h=performance.now()}catch(e){h=Date.now()}p.observer.trigger(C.a.FRAG_DECRYPTED,{stats:{tstart:f,tdecrypt:h}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,r,a,o,s,l,d,u,c)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(n),i,r,a,o,s,l,d,u,c)},e.prototype.pushDecrypted=function(e,t,n,i,r,a,o,s,l,d,u,c){var h=this.demuxer;if(!h||o&&!this.probe(e)){for(var f=this.observer,p=this.typeSupported,g=this.config,m=[{demux:j,remux:le},{demux:ee,remux:le},{demux:Z,remux:le},{demux:Y,remux:ue}],v=0,y=m.length;y>v;v++){var E=m[v],A=E.demux.probe;if(A(e)){var b=this.remuxer=new E.remux(f,g,p,this.vendor);h=new E.demux(f,b,g,p),this.probe=A;break}}if(!h)return void f.trigger(C.a.ERROR,{type:L.b.MEDIA_ERROR,details:L.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=h}var T=this.remuxer;(o||s)&&(h.resetInitSegment(n,i,r,d),T.resetInitSegment()),o&&(h.resetTimeStamp(c),T.resetTimeStamp(c)),"function"==typeof h.setDecryptData&&h.setDecryptData(t),h.append(e,a,l,u)},e}();t.a=ce},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){var n=Be[t];return!!n&&n[e.slice(0,4)]===!0}function o(e){return MediaSource.isTypeSupported('video/mp4;codecs="'+e+'"')}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t,n){var i=e[t],r=e[n],a=r.startPTS;isNaN(a)?n>t?r.start=i.start+i.duration:r.start=Math.max(i.start-r.duration,0):n>t?(i.duration=a-i.start,i.duration<0&&Le.b.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(r.duration=i.start-a,r.duration<0&&Le.b.warn("negative duration computed for frag "+r.sn+",level "+r.level+", there should be some duration drift between playlist and fragment!"))}function y(e,t,n,i,r,a){if(!isNaN(t.startPTS)){var o=Math.abs(t.startPTS-n);isNaN(t.deltaPTS)?t.deltaPTS=o:t.deltaPTS=Math.max(o,t.deltaPTS),n=Math.min(n,t.startPTS),i=Math.max(i,t.endPTS),r=Math.min(r,t.startDTS),a=Math.max(a,t.endDTS)}var s=n-t.start;t.start=t.startPTS=n,t.endPTS=i,t.startDTS=r,t.endDTS=a,t.duration=i-n;var l=t.sn;if(!e||l<e.startSN||l>e.endSN)return 0;var d,u,c;for(d=l-e.startSN,u=e.fragments,u[d]=t,c=d;c>0;c--)v(u,c,c-1);for(c=d;c<u.length-1;c++)v(u,c,c+1);return e.PTSKnown=!0,s}function E(e,t){var n,i=Math.max(e.startSN,t.startSN)-t.startSN,r=Math.min(e.endSN,t.endSN)-t.startSN,a=t.startSN-e.startSN,o=e.fragments,s=t.fragments,l=0;if(i>r)return void(t.PTSKnown=!1);for(var d=i;r>=d;d++){var u=o[a+d],c=s[d];c&&u&&(l=u.cc-c.cc,isNaN(u.startPTS)||(c.start=c.startPTS=u.startPTS,c.endPTS=u.endPTS,c.duration=u.duration,c.backtracked=u.backtracked,c.dropped=u.dropped,n=c))}if(l)for(Le.b.log("discontinuity sliding from playlist, take drift into account"),d=0;d<s.length;d++)s[d].cc+=l;if(n)y(t,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS);else if(a>=0&&a<o.length){var h=o[a].start;for(d=0;d<s.length;d++)s[d].start+=h}t.PTSKnown=e.PTSKnown}function A(e,t){for(var n=null,i=0;i<e.length;i+=1){var r=e[i];if(r&&r.cc===t){n=r;break}}return n}function b(e,t){return Ze.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}function T(e,t,n){var i=!1;return t&&t.details&&n&&(n.endCC>n.startCC||e&&e.cc<n.startCC)&&(i=!0),i}function S(e,t){var n=e.fragments,i=t.fragments;if(!i.length||!n.length)return void Le.b.log("No fragments to align");var r=A(n,i[0].cc);return!r||r&&!r.startPTS?void Le.b.log("No frag in previous level to align on"):r}function R(e,t){t.fragments.forEach(function(t){if(t){var n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}),t.PTSKnown=!0}function k(e,t,n){if(T(e,t,n)){var i=S(t.details,n);i&&(Le.b.log("Adjusting PTS using last level due to CC increase within current level"),R(i.start,n))}if(n.PTSKnown===!1&&t&&t.details){var r=t.details.programDateTime,a=n.programDateTime,o=(a-r)/1e3+t.details.fragments[0].start;isNaN(o)||(Le.b.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),R(o,n))}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function K(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function $(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function ne(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Yt,this.regionList=[]}function ie(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function re(){this.values=Object.create(null)}function ae(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);if(2===o.length){var s=o[0],l=o[1];t(s,l)}}}function oe(e,t,n){function i(){var t=ie(e);if(null===t)throw new Error("Malformed timestamp: "+o);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function r(e,t){var i=new re;ae(e,function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start",Kt,"end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start",Kt,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",Kt,"end","left","right"])}},/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===zt.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",Kt);var a=i.get("position","auto");"auto"===a&&50===zt.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}function a(){e=e.replace(/^\s+/,"")}var o=e;if(a(),t.startTime=i(),a(),"-->"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+o);e=e.substr(3),a(),t.endTime=i(),a(),r(e,t)}function se(e){return e.replace(/<br(?: \/)?>/gi,"\n")}function le(e,t,n,i){for(var r,a,o,s,l,d=window.VTTCue||window.TextTrackCue,u=0;u<i.rows.length;u++)if(r=i.rows[u],o=!0,s=0,l="",!r.isEmpty()){for(var c=0;c<r.chars.length;c++)r.chars[c].uchar.match(/\s/)&&o?s++:(l+=r.chars[c].uchar,o=!1);r.cueStartTime=t,t===n&&(n+=1e-4),a=new d(t,n,se(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?a.line=u+1:a.line=u>7?u-2:u+1,a.align="left",a.position=Math.max(0,Math.min(100,100*(s/32)+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function he(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function fe(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}function pe(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function ge(e,t,n,i){return Math.min(t,i)-Math.max(e,n)}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Ee(e){for(var t=[],n=0;n<e.length;n++)"subtitles"===e[n].kind&&t.push(e[n]);return t}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var Re={};n.d(Re,"newCue",function(){return le});var ke=n(5),we=n.n(ke),Me=n(1),Ce=n(2),Le=n(0),Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e;
},_e=function(){function e(t){i(this,e),this.hls=t,this.onEvent=this.onEvent.bind(this);for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;n>a;a++)r[a-1]=arguments[a];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.unregisterListeners()},e.prototype.isEventHandler=function(){return"object"===Ie(this.handledEvents)&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if("hlsEventGeneric"===e)throw new Error("Forbidden event name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){var n=function(e,t){var n="on"+e.replace("hls","");if("function"!=typeof this[n])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+n+")");return this[n].bind(this,t)};try{n.call(this,e,t).call()}catch(t){Le.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(Me.a.ERROR,{type:Ce.b.OTHER_ERROR,details:Ce.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}(),Pe=_e,De=/^(\d+)x(\d+)$/,xe=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,Oe=function(){function e(t){r(this,e),"string"==typeof t&&(t=e.parseAttrList(t));for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n])}return e.prototype.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},e.prototype.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},e.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},e.prototype.enumeratedString=function(e){return this[e]},e.prototype.decimalResolution=function(e){var t=De.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(xe.lastIndex=0;null!==(t=xe.exec(e));){var i=t[2],r='"';0===i.indexOf(r)&&i.lastIndexOf(r)===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}(),Ne=Oe,Be={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}},Fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Ue=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,Ge=/#EXT-X-MEDIA:(.*)/g,je=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),He=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,Ve=function(){function e(){d(this,e),this.method=null,this.key=null,this.iv=null,this._uri=null}return Fe(e,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=we.a.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}]),e}(),Ye=function(){function e(){d(this,e),this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}return e.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),n=12;16>n;n++)t[n]=e>>8*(15-n)&255;return t},e.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var n=e;return e&&e.method&&e.uri&&!e.iv&&(n=new Ve,n.method=e.method,n.baseuri=e.baseuri,n.reluri=e.reluri,n.iv=this.createInitializationVector(t)),n},e.prototype.cloneObj=function(e){return JSON.parse(JSON.stringify(e))},Fe(e,[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=we.a.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"programDateTime",get:function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){if(!this._byteRange){var e=this._byteRange=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var n=this.lastByteRangeEndOffset;e[0]=n?n:0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0]}}return this._byteRange}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata}}]),e}(),ze=function(e){function t(n){d(this,t);var i=s(this,e.call(this,n,Me.a.MANIFEST_LOADING,Me.a.LEVEL_LOADING,Me.a.AUDIO_TRACK_LOADING,Me.a.SUBTITLE_TRACK_LOADING));return i.loaders={},i}return l(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},Pe.prototype.destroy.call(this)},t.prototype.onManifestLoading=function(e){this.load(e.url,{type:"manifest"})},t.prototype.onLevelLoading=function(e){this.load(e.url,{type:"level",level:e.level,id:e.id})},t.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:"audioTrack",id:e.id})},t.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:"subtitleTrack",id:e.id})},t.prototype.load=function(e,t){var n=this.loaders[t.type];if(n){var i=n.context;if(i&&i.url===e)return void Le.b.trace("playlist request ongoing");Le.b.warn("abort previous loader for type:"+t.type),n.abort()}var r=this.hls.config,a=void 0,o=void 0,s=void 0,l=void 0;"manifest"===t.type?(a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,l=r.manifestLoadingMaxRetryTimeout):(a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,l=r.levelLoadingMaxRetryTimeout,Le.b.log("loading playlist for "+t.type+" "+(t.level||t.id))),n=this.loaders[t.type]=t.loader="undefined"!=typeof r.pLoader?new r.pLoader(r):new r.loader(r),t.url=e,t.responseType="";var d=void 0,u=void 0;d={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:l},u={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},n.load(t,d,u)},t.prototype.resolve=function(e,t){return we.a.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.prototype.parseMasterPlaylist=function(e,t){function n(e,t){["video","audio"].forEach(function(n){var i=e.filter(function(e){return a(e,n)});if(i.length){var r=i.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter(function(e){return-1===i.indexOf(e)})}}),t.unknownCodecs=e}var i=[],r=void 0;for(Ue.lastIndex=0;null!=(r=Ue.exec(e));){var o={},s=o.attrs=new Ne(r[1]);o.url=this.resolve(r[2],t);var l=s.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,n([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=this.avc1toavcoti(o.videoCodec)),i.push(o)}return i},t.prototype.parseMasterPlaylistMedia=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=void 0,a=[],o=0;for(Ge.lastIndex=0;null!=(r=Ge.exec(e));){var s={},l=new Ne(r[1]);l.TYPE===n&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=n,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),i&&(s.audioCodec=i),s.id=o++,a.push(s))}return a},t.prototype.avc1toavcoti=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).substr(-4)):t=e,t},t.prototype.parseLevelPlaylist=function(e,t,n,i){var r,a,o=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},d=new Ve,u=0,c=null,h=new Ye;for(je.lastIndex=0;null!==(r=je.exec(e));){var f=r[1];if(f){h.duration=parseFloat(f);var p=(" "+r[2]).slice(1);h.title=p?p:null,h.tagList.push(p?["INF",f,p]:["INF",f])}else if(r[3]){if(!isNaN(h.duration)){var g=o++;h.type=i,h.start=s,h.levelkey=d,h.sn=g,h.level=n,h.cc=u,h.baseurl=t,h.relurl=(" "+r[3]).slice(1),l.fragments.push(h),c=h,s+=h.duration,h=new Ye}}else if(r[4]){if(h.rawByteRange=(" "+r[4]).slice(1),c){var m=c.byteRangeEndOffset;m&&(h.lastByteRangeEndOffset=m)}}else if(r[5])h.rawProgramDateTime=(" "+r[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*s));else{for(r=r[0].match(He),a=1;a<r.length&&void 0===r[a];a++);var v=(" "+r[a+1]).slice(1),y=(" "+r[a+2]).slice(1);switch(r[a]){case"#":h.tagList.push(y?[v,y]:[v]);break;case"PLAYLIST-TYPE":l.type=v.toUpperCase();break;case"MEDIA-SEQUENCE":o=l.startSN=parseInt(v);break;case"TARGETDURATION":l.targetduration=parseFloat(v);break;case"VERSION":l.version=parseInt(v);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(v);break;case"KEY":var E=v,A=new Ne(E),b=A.enumeratedString("METHOD"),T=A.URI,S=A.hexadecimalInteger("IV");b&&(d=new Ve,T&&["AES-128","SAMPLE-AES"].indexOf(b)>=0&&(d.method=b,d.baseuri=t,d.reluri=T,d.key=null,d.iv=S));break;case"START":var R=v,k=new Ne(R),w=k.decimalFloatingPoint("TIME-OFFSET");isNaN(w)||(l.startTimeOffset=w);break;case"MAP":var M=new Ne(v);h.relurl=M.URI,h.rawByteRange=M.BYTERANGE,h.baseurl=t,h.level=n,h.type=i,h.sn="initSegment",l.initSegment=h,h=new Ye;break;default:Le.b.warn("line parsed but not handled: "+r)}}}return h=c,h&&!h.relurl&&(l.fragments.pop(),s-=h.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=o-1,l.startCC=l.fragments[0]?l.fragments[0].cc:0,l.endCC=u,l},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=e.url,o=n.type,s=n.id,l=n.level,d=this.hls;if(this.loaders[o]=void 0,(void 0===a||0===a.indexOf("data:"))&&(a=n.url),t.tload=performance.now(),0===r.indexOf("#EXTM3U"))if(r.indexOf("#EXTINF:")>0){var u="audioTrack"!==o&&"subtitleTrack"!==o,c=isNaN(l)?isNaN(s)?0:s:l,h=this.parseLevelPlaylist(r,a,c,"audioTrack"===o?"audio":"subtitleTrack"===o?"subtitle":"main");h.tload=t.tload,"manifest"===o&&d.trigger(Me.a.MANIFEST_LOADED,{levels:[{url:a,details:h}],audioTracks:[],url:a,stats:t,networkDetails:i}),t.tparsed=performance.now(),h.targetduration?u?d.trigger(Me.a.LEVEL_LOADED,{details:h,level:l||0,id:s||0,stats:t,networkDetails:i}):"audioTrack"===o?d.trigger(Me.a.AUDIO_TRACK_LOADED,{details:h,id:s,stats:t,networkDetails:i}):"subtitleTrack"===o&&d.trigger(Me.a.SUBTITLE_TRACK_LOADED,{details:h,id:s,stats:t,networkDetails:i}):d.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"invalid targetduration",networkDetails:i})}else{var f=this.parseMasterPlaylist(r,a);if(f.length){var p=this.parseMasterPlaylistMedia(r,a,"AUDIO",f[0].audioCodec),g=this.parseMasterPlaylistMedia(r,a,"SUBTITLES");if(p.length){var m=!1;p.forEach(function(e){e.url||(m=!0)}),m===!1&&f[0].audioCodec&&!f[0].attrs.AUDIO&&(Le.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}d.trigger(Me.a.MANIFEST_LOADED,{levels:f,audioTracks:p,subtitles:g,url:a,stats:t,networkDetails:i})}else d.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no level found in manifest",networkDetails:i})}else d.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.MANIFEST_PARSING_ERROR,fatal:!0,url:a,reason:"no EXTM3U delimiter",networkDetails:i})},t.prototype.loaderror=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=Ce.a.MANIFEST_LOAD_ERROR,i=!0;break;case"level":n=Ce.a.LEVEL_LOAD_ERROR,i=!1;break;case"audioTrack":n=Ce.a.AUDIO_TRACK_LOAD_ERROR,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:n,fatal:i,url:a.url,loader:a,response:e,context:t,networkDetails:r})},t.prototype.loadtimeout=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=t.loader;switch(t.type){case"manifest":n=Ce.a.MANIFEST_LOAD_TIMEOUT,i=!0;break;case"level":n=Ce.a.LEVEL_LOAD_TIMEOUT,i=!1;break;case"audioTrack":n=Ce.a.AUDIO_TRACK_LOAD_TIMEOUT,i=!1}a&&(a.abort(),this.loaders[t.type]=void 0),this.hls.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:n,fatal:i,url:a.url,loader:a,context:t,networkDetails:r})},t}(Pe),Ke=ze,We=function(e){function t(n){u(this,t);var i=c(this,e.call(this,n,Me.a.FRAG_LOADING));return i.loaders={},i}return h(t,e),t.prototype.destroy=function(){var e=this.loaders;for(var t in e){var n=e[t];n&&n.destroy()}this.loaders={},Pe.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=this.hls.config;t.loaded=0,i&&(Le.b.warn("abort previous fragment loader for type:"+n),i.abort()),i=this.loaders[n]=t.loader="undefined"!=typeof r.fLoader?new r.fLoader(r):new r.loader(r);var a=void 0,o=void 0,s=void 0;a={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var l=t.byteRangeStartOffset,d=t.byteRangeEndOffset;isNaN(l)||isNaN(d)||(a.rangeStart=l,a.rangeEnd=d),o={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},s={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},i.load(a,o,s)},t.prototype.loadsuccess=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=e.data,a=n.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(Me.a.FRAG_LOADED,{payload:r,frag:a,stats:t,networkDetails:i})},t.prototype.loaderror=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:n})},t.prototype.loadtimeout=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=t.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:n})},t.prototype.loadprogress=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=t.frag;r.loaded=e.loaded,this.hls.trigger(Me.a.FRAG_LOAD_PROGRESS,{frag:r,stats:e,networkDetails:i})},t}(Pe),qe=We,Xe=function(e){function t(n){f(this,t);var i=p(this,e.call(this,n,Me.a.KEY_LOADING));return i.loaders={},i.decryptkey=null,i.decrypturl=null,i}return g(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},Pe.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,n=t.type,i=this.loaders[n],r=t.decryptdata,a=r.uri;if(a!==this.decrypturl||null===this.decryptkey){var o=this.hls.config;i&&(Le.b.warn("abort previous key loader for type:"+n),i.abort()),t.loader=this.loaders[n]=new o.loader(o),this.decrypturl=a,this.decryptkey=null;var s=void 0,l=void 0,d=void 0;s={url:a,frag:t,responseType:"arraybuffer"},l={timeout:o.fragLoadingTimeOut,maxRetry:o.fragLoadingMaxRetry,retryDelay:o.fragLoadingRetryDelay,maxRetryDelay:o.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(s,l,d)}else this.decryptkey&&(r.key=this.decryptkey,this.hls.trigger(Me.a.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,n){var i=n.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(e.data),i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(Me.a.KEY_LOADED,{frag:i})},t.prototype.loaderror=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.KEY_LOAD_ERROR,fatal:!1,frag:n,response:e})},t.prototype.loadtimeout=function(e,t){var n=t.frag,i=n.loader;i&&i.abort(),this.loaders[t.type]=void 0,this.hls.trigger(Me.a.ERROR,{type:Ce.b.NETWORK_ERROR,details:Ce.a.KEY_LOAD_TIMEOUT,fatal:!1,frag:n})},t}(Pe),Qe=Xe,Je={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;i>=n;){r=(n+i)/2|0,a=e[r];var o=t(a);if(o>0)n=r+1;else{if(!(0>o))return a;i=r-1}}return null}},Ze=Je,$e={isBuffered:function(e,t){if(e)for(var n=e.buffered,i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0;return!1},bufferInfo:function(e,t,n){if(e){var i,r=e.buffered,a=[];for(i=0;i<r.length;i++)a.push({start:r.start(i),end:r.end(i)});return this.bufferedInfo(a,t,n)}return{len:0,start:t,end:t,nextStart:void 0}},bufferedInfo:function(e,t,n){var i,r,a,o,s,l=[];for(e.sort(function(e,t){var n=e.start-t.start;return n?n:t.end-e.end}),s=0;s<e.length;s++){var d=l.length;if(d){var u=l[d-1].end;e[s].start-u<n?e[s].end>u&&(l[d-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,i=0,r=a=t;s<l.length;s++){var c=l[s].start,h=l[s].end;if(t+n>=c&&h>t)r=c,a=h,i=a-t;else if(c>t+n){o=c;break}}return{len:i,start:r,end:a,nextStart:o}}},et=$e,tt=n(6),nt=n(4),it=n.n(nt),rt=n(8),at=n.n(rt),ot=function(){function e(t,n){m(this,e),this.hls=t,this.id=n;var i=this.observer=new it.a,r=t.config;i.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];i.emit.apply(i,[e,e].concat(n))},i.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];i.removeListener.apply(i,[e].concat(n))};var a=function(e,n){n=n||{},n.frag=this.frag,n.id=this.id,t.trigger(e,n)}.bind(this);i.on(Me.a.FRAG_DECRYPTED,a),i.on(Me.a.FRAG_PARSING_INIT_SEGMENT,a),i.on(Me.a.FRAG_PARSING_DATA,a),i.on(Me.a.FRAG_PARSED,a),i.on(Me.a.ERROR,a),i.on(Me.a.FRAG_PARSING_METADATA,a),i.on(Me.a.FRAG_PARSING_USERDATA,a),i.on(Me.a.INIT_PTS_FOUND,a);var o={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},s=navigator.vendor;if(r.enableWorker&&"undefined"!=typeof Worker){Le.b.log("demuxing in webworker");var l=void 0;try{l=this.w=at()(9),this.onwmsg=this.onWorkerMessage.bind(this),l.addEventListener("message",this.onwmsg),l.onerror=function(e){t.trigger(Me.a.ERROR,{type:Ce.b.OTHER_ERROR,details:Ce.a.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:e.message+" ("+e.filename+":"+e.lineno+")"}})},l.postMessage({cmd:"init",typeSupported:o,vendor:s,id:n,config:JSON.stringify(r)})}catch(e){Le.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),l&&URL.revokeObjectURL(l.objectURL),this.demuxer=new tt.a(i,o,r,s),this.w=void 0}}else this.demuxer=new tt.a(i,o,r,s)}return e.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var n=this.observer;n&&(n.removeAllListeners(),this.observer=null)},e.prototype.push=function(e,t,n,i,r,a,o,s){var l=this.w,d=isNaN(r.startDTS)?r.start:r.startDTS,u=r.decryptdata,c=this.frag,h=!(c&&r.cc===c.cc),f=!(c&&r.level===c.level),p=c&&r.sn===c.sn+1,g=!f&&p;if(h&&Le.b.log(this.id+":discontinuity detected"),f&&Le.b.log(this.id+":switch detected"),this.frag=r,l)l.postMessage({cmd:"demux",data:e,decryptdata:u,initSegment:t,audioCodec:n,videoCodec:i,timeOffset:d,discontinuity:h,trackSwitch:f,contiguous:g,duration:a,accurateTimeOffset:o,defaultInitPTS:s},[e]);else{var m=this.demuxer;m&&m.push(e,u,t,n,i,d,h,f,g,a,o,s)}},e.prototype.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":URL.revokeObjectURL(this.w.objectURL);break;case Me.a.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},e}(),st=ot,lt={toString:function(e){for(var t="",n=e.length,i=0;n>i;i++)t+="["+e.start(i).toFixed(3)+","+e.end(i).toFixed(3)+"]";return t}},dt=lt,ut=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ct={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"},ht=function(e){function t(n){w(this,t);var i=M(this,e.call(this,n,Me.a.MEDIA_ATTACHED,Me.a.MEDIA_DETACHING,Me.a.MANIFEST_LOADING,Me.a.MANIFEST_PARSED,Me.a.LEVEL_LOADED,Me.a.KEY_LOADED,Me.a.FRAG_LOADED,Me.a.FRAG_LOAD_EMERGENCY_ABORTED,Me.a.FRAG_PARSING_INIT_SEGMENT,Me.a.FRAG_PARSING_DATA,Me.a.FRAG_PARSED,Me.a.ERROR,Me.a.AUDIO_TRACK_SWITCHING,Me.a.AUDIO_TRACK_SWITCHED,Me.a.BUFFER_CREATED,Me.a.BUFFER_APPENDED,Me.a.BUFFER_FLUSHED));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state=ct.STOPPED,i.ontick=i.tick.bind(i),i}return C(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Pe.prototype.destroy.call(this),this.state=ct.STOPPED},t.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(i=0,this.bitrateTest=!0),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(Le.b.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=ct.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ct.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ct.STOPPED,this.forceStartLoad=!1},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){switch(this.state){case ct.ERROR:break;case ct.BUFFER_FLUSHING:this.fragLoadError=0;break;case ct.IDLE:this._doTickIdle();break;case ct.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=ct.IDLE);break;case ct.FRAG_LOADING_WAITING_RETRY:var t=performance.now(),n=this.retryDate;(!n||t>=n||this.media&&this.media.seeking)&&(Le.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=ct.IDLE);break;case ct.ERROR:case ct.STOPPED:case ct.FRAG_LOADING:case ct.PARSING:case ct.PARSED:case ct.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},t.prototype._doTickIdle=function(){var e=this.hls,t=e.config,n=this.media;if(void 0===this.levelLastLoaded||n||!this.startFragRequested&&t.startFragPrefetch){var i=void 0;i=this.loadedmetadata?n.currentTime:this.nextLoadPosition;var r=e.nextLoadLevel,a=this.levels[r];if(a){var o=a.bitrate,s=void 0;s=o?Math.max(8*t.maxBufferSize/o,t.maxBufferLength):t.maxBufferLength,s=Math.min(s,t.maxMaxBufferLength);var l=et.bufferInfo(this.mediaBuffer?this.mediaBuffer:n,i,t.maxBufferHole),d=l.len;if(!(d>=s)){Le.b.trace("buffer length of "+d.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=r;var u=a.details;if("undefined"==typeof u||u.live&&this.levelLastLoaded!==r)return void(this.state=ct.WAITING_LEVEL);var c=this.fragPrevious;if(!u.live&&c&&c.sn===u.endSN&&!l.nextStart){var h=Math.min(n.duration,c.start+c.duration);if(h-Math.max(l.end,c.start)<=Math.max(.2,c.duration)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(Me.a.BUFFER_EOS,f),void(this.state=ct.ENDED)}}this._fetchPayloadOrEos(i,l,u)}}}},t.prototype._fetchPayloadOrEos=function(e,t,n){var i=this.fragPrevious,r=this.level,a=n.fragments,o=a.length;if(0!==o){var s=a[0].start,l=a[o-1].start+a[o-1].duration,d=t.end,u=void 0;if(n.initSegment&&!n.initSegment.data)u=n.initSegment;else if(n.live){var c=this.config.initialLiveManifestSize;if(c>o)return void Le.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+c);if(u=this._ensureFragmentAtLivePoint(n,d,s,l,i,a,o),null===u)return}else s>d&&(u=a[0]);u||(u=this._findFragment(s,i,o,a,d,l,n)),u&&this._loadFragmentOrKey(u,r,n,e,d)}},t.prototype._ensureFragmentAtLivePoint=function(e,t,n,i,r,a,o){var s=this.hls.config,l=this.media,d=void 0,u=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(n-s.maxFragLookUpTolerance,i-u)){var c=this.liveSyncPosition=this.computeLivePosition(n,e);Le.b.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+c.toFixed(3)),t=c,l&&l.readyState&&l.duration>c&&(l.currentTime=c),this.nextLoadPosition=c}if(e.PTSKnown&&t>i&&l&&l.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(r){var h=r.sn+1;if(h>=e.startSN&&h<=e.endSN){var f=a[h-e.startSN];r.cc===f.cc&&(d=f,Le.b.log("live playlist, switching playlist, load frag with next SN: "+d.sn))}d||(d=Ze.search(a,function(e){return r.cc-e.cc}),d&&Le.b.log("live playlist, switching playlist, load frag with same CC: "+d.sn))}d||(d=a[Math.min(o-1,Math.round(o/2))],Le.b.log("live playlist, switching playlist, unknown, load middle frag : "+d.sn))}return d},t.prototype._findFragment=function(e,t,n,i,r,a,o){var s=this.hls.config,l=void 0,d=void 0,u=s.maxFragLookUpTolerance,c=t?i[t.sn-i[0].sn+1]:void 0,h=function(e){var t=Math.min(u,e.duration);return e.start+e.duration-t<=r?1:e.start-t>r&&e.start?-1:0};if(a>r?(r>a-u&&(u=0),d=c&&!h(c)?c:Ze.search(i,h)):d=i[n-1],d){l=d;var f=l.sn-o.startSN,p=t&&l.level===t.level,g=i[f-1],m=i[f+1];if(t&&l.sn===t.sn)if(p&&!l.backtracked)if(l.sn<o.endSN){var v=t.deltaPTS;v&&v>s.maxBufferHole&&t.dropped&&f?(l=g,Le.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=m,Le.b.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(m&&m.backtracked?(Le.b.warn("Already backtracked from fragment "+m.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+m.sn),l=m):(Le.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,g?(g.loadCounter&&g.loadCounter--,l=g,l.backtracked=!0):f&&(l=null)))}return l},t.prototype._loadFragmentOrKey=function(e,t,n,i,r){var a=this.hls,o=a.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(Le.b.log("Loading "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t+", currentTime:"+i.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var s=o.fragLoadingLoopThreshold;if(e.loadCounter>s&&Math.abs(this.fragLoadIdx-e.loadIdx)<s)return void a.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,e.autoLevel=a.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||e.bitrateTest||(this.nextLoadPosition=e.start+e.duration),a.trigger(Me.a.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new st(a,"main")),void(this.state=ct.FRAG_LOADING)}Le.b.log("Loading key for "+e.sn+" of ["+n.startSN+" ,"+n.endSN+"],level "+t),this.state=ct.KEY_LOADING,a.trigger(Me.a.KEY_LOADING,{frag:e})},t.prototype.getBufferedFrag=function(e){return Ze.search(this._bufferedFrags,function(t){return e<t.startPTS?-1:e>t.endPTS?1:0})},t.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},t.prototype._checkFragmentChanged=function(){var e,t,n=this.media;if(n&&n.readyState&&n.seeking===!1&&(t=n.currentTime,t>n.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),et.isBuffered(n,t)?e=this.getBufferedFrag(t):et.isBuffered(n,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var i=e;if(i!==this.fragPlaying){this.hls.trigger(Me.a.FRAG_CHANGED,{frag:i});var r=i.level;this.fragPlaying&&this.fragPlaying.level===r||this.hls.trigger(Me.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=i}}},t.prototype.immediateLevelSwitch=function(){if(Le.b.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e=this.media,t=void 0;e?(t=e.paused,e.pause()):t=!0,this.previouslyPaused=t}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},t.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,et.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},t.prototype.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t=void 0,n=void 0,i=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,n=this.getBufferedFrag(e.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),e.paused)t=0;else{var r=this.hls.nextLoadLevel,a=this.levels[r],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*o)+1:0}if(i=this.getBufferedFrag(e.currentTime+t),i&&(i=this.followingBufferedFrag(i))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,Number.POSITIVE_INFINITY)}}},t.prototype.flushMainBuffer=function(e,t){this.state=ct.BUFFER_FLUSHING;var n={startOffset:e,endOffset:t};this.altAudio&&(n.type="video"),this.hls.trigger(Me.a.BUFFER_FLUSHING,n)},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var n=this.config;this.levels&&n.autoStartLoad&&this.hls.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(Le.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0,e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){var e=this.media,t=e?e.currentTime:void 0,n=this.config;
isNaN(t)||Le.b.log("media seeking to "+t.toFixed(3));var i=this.mediaBuffer?this.mediaBuffer:e,r=et.bufferInfo(i,t,this.config.maxBufferHole);if(this.state===ct.FRAG_LOADING){var a=this.fragCurrent;if(0===r.len&&a){var o=n.maxFragLookUpTolerance,s=a.start-o,l=a.start+a.duration+o;s>t||t>l?(a.loader&&(Le.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=ct.IDLE):Le.b.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===ct.ENDED&&(0===r.len&&(this.fragPrevious=0),this.state=ct.IDLE);e&&(this.lastCurrentTime=t),this.state!==ct.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()},t.prototype.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;isNaN(t)||Le.b.log("media seeked to "+t.toFixed(3)),this.tick()},t.prototype.onMediaEnded=function(){Le.b.log("media ended"),this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestLoading=function(){Le.b.log("trigger BUFFER_RESET"),this.hls.trigger(Me.a.BUFFER_RESET),this._bufferedFrags=[],this.stalled=!1,this.startPosition=this.lastCurrentTime=0},t.prototype.onManifestParsed=function(e){var t,n=!1,i=!1;e.levels.forEach(function(e){t=e.audioCodec,t&&(-1!==t.indexOf("mp4a.40.2")&&(n=!0),-1!==t.indexOf("mp4a.40.5")&&(i=!0))}),this.audioCodecSwitch=n&&i,this.audioCodecSwitch&&Le.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startLevelLoaded=!1,this.startFragRequested=!1;var r=this.config;(r.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(r.startPosition)},t.prototype.onLevelLoaded=function(e){var t=e.details,n=e.level,i=this.levels[this.levelLastLoaded],r=this.levels[n],a=t.totalduration,o=0;if(Le.b.log("level "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var s=r.details;s&&t.fragments.length>0?(E(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&!isNaN(o)?Le.b.log("live playlist sliding:"+o.toFixed(3)):(Le.b.log("live playlist - outdated PTS, unknown sliding"),k(this.fragPrevious,i,t))):(Le.b.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,k(this.fragPrevious,i,t))}else t.PTSKnown=!1;if(r.details=t,this.levelLastLoaded=n,this.hls.trigger(Me.a.LEVEL_UPDATED,{details:t,level:n}),this.startFragRequested===!1){if(-1===this.startPosition||-1===this.lastCurrentTime){var l=t.startTimeOffset;isNaN(l)?t.live?(this.startPosition=this.computeLivePosition(o,t),Le.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(0>l&&(Le.b.log("negative start time offset "+l+", count from end of last fragment"),l=o+a+l),Le.b.log("start time offset found in playlist, adjust startPosition to "+l),this.startPosition=l),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===ct.WAITING_LEVEL&&(this.state=ct.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===ct.KEY_LOADING&&(this.state=ct.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===ct.FRAG_LOADING&&t&&"main"===n.type&&n.level===t.level&&n.sn===t.sn){var i=e.stats,r=this.levels[t.level],a=r.details;if(Le.b.log("Loaded  "+t.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=i,n.bitrateTest===!0&&this.hls.nextLoadLevel)this.state=ct.IDLE,this.startFragRequested=!1,i.tparsed=i.tbuffered=performance.now(),this.hls.trigger(Me.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else if("initSegment"===n.sn)this.state=ct.IDLE,i.tparsed=i.tbuffered=performance.now(),a.initSegment.data=e.payload,this.hls.trigger(Me.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.tick();else{this.state=ct.PARSING;var o=a.totalduration,s=t.level,l=t.sn,d=this.config.defaultAudioCodec||r.audioCodec;this.audioCodecSwap&&(Le.b.log("swapping playlist audio codec"),void 0===d&&(d=this.lastAudioCodec),d&&(d=-1!==d.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,Le.b.log("Parsing "+l+" of ["+a.startSN+" ,"+a.endSN+"],level "+s+", cc "+t.cc);var u=this.demuxer;u||(u=this.demuxer=new st(this.hls,"main"));var c=this.media,h=c&&c.seeking,f=!h&&(a.PTSKnown||!a.live),p=a.initSegment?a.initSegment.data:[];u.push(e.payload,p,d,r.videoCodec,t,o,f,void 0)}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ct.PARSING){var i,r,a=e.tracks;if(a.audio&&this.altAudio&&delete a.audio,r=a.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(Le.b.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==r.container&&(o="mp4a.40.2",Le.b.log("Android: force audio codec to "+o)),r.levelCodec=o,r.id=e.id}r=a.video,r&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=e.id),this.hls.trigger(Me.a.BUFFER_CODECS,a);for(i in a){r=a[i],Le.b.log("main track:"+i+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var l=r.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Me.a.BUFFER_APPENDING,{type:i,data:l,parent:"main",content:"initSegment"}))}this.tick()}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"main"===e.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==e.type||!this.altAudio)&&this.state===ct.PARSING){var r=this.levels[this.level],a=n;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),Le.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(a.dropped=e.dropped,a.dropped){if(!a.backtracked)return Le.b.warn("missing video frame(s), backtracking fragment"),a.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=ct.IDLE,this.fragPrevious=a,void this.tick();Le.b.warn("Already backtracked on this fragment, appending with the gap")}else a.backtracked=!1;var o=y(r.details,a,e.startPTS,e.endPTS,e.startDTS,e.endDTS),s=this.hls;s.trigger(Me.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:o,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(n){n&&n.length&&t.state===ct.PARSING&&(t.appended=!0,t.pendingBuffering=!0,s.trigger(Me.a.BUFFER_APPENDING,{type:e.type,data:n,parent:"main",content:"data"}))}),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===ct.PARSING&&(this.stats.tparsed=performance.now(),this.state=ct.PARSED,this._checkAppendedParsed())},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url,n=e.id;if(!t){if(this.mediaBuffer!==this.media){Le.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(Le.b.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=ct.IDLE}var r=this.hls;r.trigger(Me.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),r.trigger(Me.a.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},t.prototype.onAudioTrackSwitched=function(e){var t=e.id,n=!!this.hls.audioTracks[t].url;if(n){var i=this.videoBuffer;i&&this.mediaBuffer!==i&&(Le.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=n,this.tick()},t.prototype.onBufferCreated=function(e){var t=e.tracks,n=void 0,i=void 0,r=!1;for(var a in t){var o=t[a];"main"===o.id?(i=a,n=o,"video"===a&&(this.videoBuffer=t[a].buffer)):r=!0}r&&n?(Le.b.log("alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},t.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;(t===ct.PARSING||t===ct.PARSED)&&(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==ct.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;Le.b.log("main buffered : "+dt.toString(t.buffered));var n=this._bufferedFrags.filter(function(e){return et.isBuffered(t,(e.startPTS+e.endPTS)/2)});n.push(e),this._bufferedFrags=n.sort(function(e,t){return e.startPTS-t.startPTS}),this.fragPrevious=e;var i=this.stats;i.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(Me.a.FRAG_BUFFERED,{stats:i,frag:e,id:"main"}),this.state=ct.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var n=!!this.media&&et.isBuffered(this.media,this.media.currentTime)&&et.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case Ce.a.FRAG_LOAD_ERROR:case Ce.a.FRAG_LOAD_TIMEOUT:case Ce.a.KEY_LOAD_ERROR:case Ce.a.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);t.loadCounter=0,Le.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ct.FRAG_LOADING_WAITING_RETRY}else Le.b.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=ct.ERROR;break;case Ce.a.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=ct.IDLE):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=ct.ERROR));break;case Ce.a.LEVEL_LOAD_ERROR:case Ce.a.LEVEL_LOAD_TIMEOUT:this.state!==ct.ERROR&&(e.fatal?(this.state=ct.ERROR,Le.b.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==ct.WAITING_LEVEL||(this.state=ct.IDLE));break;case Ce.a.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==ct.PARSING&&this.state!==ct.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=ct.IDLE):(Le.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},t.prototype._reduceMaxBufferLength=function(e){var t=this.config;t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,Le.b.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*t.fragLoadingLoopThreshold)},t.prototype._checkBuffer=function(){var e=this.media,t=this.config;if(e&&e.readyState){var n=e.currentTime,i=this.mediaBuffer?this.mediaBuffer:e,r=i.buffered;if(!this.loadedmetadata&&r.length){this.loadedmetadata=!0;var a=e.seeking?n:this.startPosition,o=et.isBuffered(i,a),s=r.start(0);(n!==a||!o&&Math.abs(a-s)<t.maxSeekHole)&&(Le.b.log("target start position:"+a),o||(a=s,Le.b.log("target start position not buffered, seek to buffered.start(0) "+a)),Le.b.log("adjust currentTime from "+n+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var l=et.bufferInfo(e,n,0),d=!(e.paused||e.ended||0===e.buffered.length),u=.5,c=n!==this.lastCurrentTime;if(c)this.stallReported&&(Le.b.warn("playback not stuck anymore @"+n+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(d){var h=performance.now(),f=this.hls;if(this.stalled){var p=h-this.stalled,g=l.len,m=this.nudgeRetry||0;if(u>=g&&p>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,Le.b.warn("playback stalling in low buffer @"+n),f.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:g}));var v=l.nextStart,y=v-n;if(v&&y<t.maxSeekHole&&y>0){this.nudgeRetry=++m;var E=m*t.nudgeOffset;Le.b.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+v+" + nudge "+E),e.currentTime=v+E,this.stalled=void 0,f.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:v+E-n})}}else if(g>u&&p>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,Le.b.warn("playback stalling in high buffer @"+n),f.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:g})),this.stalled=void 0,this.nudgeRetry=++m,m<t.nudgeMaxRetry){var A=e.currentTime,b=A+m*t.nudgeOffset;Le.b.log("adjust currentTime from "+A+" to "+b),e.currentTime=b,f.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_NUDGE_ON_STALL,fatal:!1})}else Le.b.error("still stuck in high buffer @"+n+" after "+t.nudgeMaxRetry+", raise fatal error"),f.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=h,this.stallReported=!1}}}},t.prototype.onFragLoadEmergencyAborted=function(){this.state=ct.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},t.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter(function(t){return et.isBuffered(e,(t.startPTS+t.endPTS)/2)}),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=ct.IDLE,this.fragPrevious=null},t.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},t.prototype.computeLivePosition=function(e,t){var n=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-n)},ut(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,Le.b.log("main stream:"+t+"->"+e),this.hls.trigger(Me.a.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(Pe),ft=ht,pt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),gt=function(e){function t(n){L(this,t);var i=I(this,e.call(this,n,Me.a.MANIFEST_LOADED,Me.a.LEVEL_LOADED,Me.a.FRAG_LOADED,Me.a.ERROR));return i.ontick=i.tick.bind(i),i._manualLevel=-1,i}return _(t,e),t.prototype.destroy=function(){this.cleanTimer(),this._manualLevel=-1},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){this.canload=!0;var e=this._levels;e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),this.timer&&this.tick()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,n=[],i=[],r={},a=!1,s=!1,l=this.hls,d=/chrome|firefox/.test(navigator.userAgent.toLowerCase());if(e.levels.forEach(function(e){e.videoCodec&&(a=!0),d&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(e.audioCodec||e.attrs&&e.attrs.AUDIO)&&(s=!0);var t=r[e.bitrate];void 0===t?(r[e.bitrate]=n.length,e.url=[e.url],e.urlId=0,n.push(e)):n[t].url.push(e.url)}),a&&s?n.forEach(function(e){e.videoCodec&&i.push(e)}):i=n,i=i.filter(function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||o(t))&&(!n||o(n))}),i.length){t=i[0].bitrate,i.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=i;for(var u=0;u<i.length;u++)if(i[u].bitrate===t){this._firstLevel=u,Le.b.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+t);break}l.trigger(Me.a.MANIFEST_PARSED,{levels:i,firstLevel:this._firstLevel,stats:e.stats,audio:s,video:a,altAudio:e.audioTracks.length>0})}else l.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:l.url,reason:"no level with compatible codecs found in manifest"})},t.prototype.setLevelInternal=function(e){var t=this._levels,n=this.hls;if(e>=0&&e<t.length){if(this.cleanTimer(),this._level!==e){Le.b.log("switching to level "+e),this._level=e;var i=t[e];i.level=e,n.trigger(Me.a.LEVEL_SWITCH,i),n.trigger(Me.a.LEVEL_SWITCHING,i)}var r=t[e],a=r.details;if(!a||a.live===!0){var o=r.urlId;n.trigger(Me.a.LEVEL_LOADING,{url:r.url[o],level:e,id:o})}}else n.trigger(Me.a.ERROR,{type:Ce.b.OTHER_ERROR,details:Ce.a.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},t.prototype.onError=function(e){if(e.fatal)return void(e.type===Ce.b.NETWORK_ERROR&&this.cleanTimer());var t=e.details,n=this.hls,i=void 0,r=void 0,a=!1;switch(t){case Ce.a.FRAG_LOAD_ERROR:case Ce.a.FRAG_LOAD_TIMEOUT:case Ce.a.FRAG_LOOP_LOADING_ERROR:case Ce.a.KEY_LOAD_ERROR:case Ce.a.KEY_LOAD_TIMEOUT:i=e.frag.level;break;case Ce.a.LEVEL_LOAD_ERROR:case Ce.a.LEVEL_LOAD_TIMEOUT:i=e.context.level,a=!0;break;case Ce.a.REMUX_ALLOC_ERROR:i=e.level}if(void 0!==i){r=this._levels[i],r.loadError?r.loadError++:r.loadError=1;var o=r.url.length;if(o>1&&r.loadError<o)r.urlId=(r.urlId+1)%o,r.details=void 0,Le.b.warn("level controller,"+t+" for level "+i+": switching to redundant stream id "+r.urlId);else{var s=-1===this._manualLevel&&i;if(s)Le.b.warn("level controller,"+t+": switch-down for next fragment"),n.nextAutoLevel=Math.max(0,i-1);else if(r&&r.details&&r.details.live)Le.b.warn("level controller,"+t+" on live stream, discard"),a&&(this._level=void 0);else if(t===Ce.a.LEVEL_LOAD_ERROR||t===Ce.a.LEVEL_LOAD_TIMEOUT){var l=n.media,d=l&&et.isBuffered(l,l.currentTime)&&et.isBuffered(l,l.currentTime+.5);if(d){var u=n.config.levelLoadingRetryDelay;Le.b.warn("level controller,"+t+", but media buffered, retry in "+u+"ms"),this.timer=setTimeout(this.ontick,u),e.levelRetry=!0}else Le.b.error("cannot recover "+t+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if(t&&"main"===t.type){var n=this._levels[t.level];n&&(n.loadError=0)}},t.prototype.onLevelLoaded=function(e){var t=e.level;if(t===this._level){var n=this._levels[t];n.loadError=0;var i=e.details;if(i.live){var r=1e3*(i.averagetargetduration?i.averagetargetduration:i.targetduration),a=n.details;a&&i.endSN===a.endSN&&(r/=2,Le.b.log("same live playlist, reload twice faster")),r-=performance.now()-e.stats.trequest,r=Math.max(1e3,Math.round(r)),Le.b.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(this.ontick,r)}else this.timer=null}},t.prototype.tick=function(){var e=this._level;if(void 0!==e&&this.canload){var t=this._levels[e];if(t&&t.url){var n=t.urlId;this.hls.trigger(Me.a.LEVEL_LOADING,{url:t.url[n],level:e,id:n})}}},pt(t,[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},set:function(e){var t=this._levels;t&&t.length>e&&(this._level!==e||void 0===t[e].details)&&this.setLevelInternal(e)}},{key:"manualLevel",get:function(){return this._manualLevel},set:function(e){this._manualLevel=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this._manualLevel?this._manualLevel:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this._manualLevel&&(this.hls.nextAutoLevel=e)}}]),t}(Pe),mt=gt,vt=n(3),yt=function(e){function t(n){P(this,t);var i=D(this,e.call(this,n,Me.a.MEDIA_ATTACHED,Me.a.MEDIA_DETACHING,Me.a.FRAG_PARSING_METADATA));return i.id3Track=void 0,i.media=void 0,i}return x(t,e),t.prototype.destroy=function(){Pe.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,!this.media},t.prototype.onMediaDetaching=function(){this.media=void 0},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,n=e.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var i=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<n.length;r++){var a=vt.a.getID3Frames(n[r].data);if(a){var o=n[r].pts,s=r<n.length-1?n[r+1].pts:t.endPTS;o===s&&(s+=1e-4);for(var l=0;l<a.length;l++){var d=a[l];if(!vt.a.isTimeStampFrame(d)){var u=new i(o,s,"");u.value=d,this.id3Track.addCue(u)}}}}},t}(Pe),Et=yt,At=function(){function e(t){O(this,e),this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),bt=At,Tt=function(){function e(t,n,i,r){N(this,e),this.hls=t,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new bt(n),this.fast_=new bt(i)}return e.prototype.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var n=8e3*t/e,i=e/1e3;this.fast_.sample(i,n),this.slow_.sample(i,n)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}(),St=Tt,Rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),kt=function(e){function t(n){B(this,t);var i=F(this,e.call(this,n,Me.a.FRAG_LOADING,Me.a.FRAG_LOADED,Me.a.FRAG_BUFFERED,Me.a.ERROR));return i.lastLoadedFragLevel=0,i._nextAutoLevel=-1,i.hls=n,i.timer=null,i._bwEstimator=null,i.onCheck=i._abandonRulesCheck.bind(i),i}return U(t,e),t.prototype.destroy=function(){this.clearTimer(),Pe.prototype.destroy.call(this)},t.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type){if(this.timer||(this.timer=setInterval(this.onCheck,100)),!this._bwEstimator){var n=this.hls,i=e.frag.level,r=n.levels[i].details.live,a=n.config,o=void 0,s=void 0;r?(o=a.abrEwmaFastLive,s=a.abrEwmaSlowLive):(o=a.abrEwmaFastVoD,s=a.abrEwmaSlowVoD),this._bwEstimator=new St(n,s,o,a.abrEwmaDefaultEstimate)}this.fragCurrent=t}},t.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,n=this.fragCurrent,i=n.loader,r=e.minAutoLevel;if(!i||i.stats&&i.stats.aborted)return Le.b.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var a=i.stats;if(t&&a&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&n.autoLevel&&n.level){var o=performance.now()-a.trequest,s=Math.abs(t.playbackRate);if(o>500*n.duration/s){var l=e.levels,d=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),u=l[n.level],c=u.realBitrate?Math.max(u.realBitrate,u.bitrate):u.bitrate,h=a.total?a.total:Math.max(a.loaded,Math.round(n.duration*c/8)),f=t.currentTime,p=(h-a.loaded)/d,g=(et.bufferInfo(t,f,e.config.maxBufferHole).end-f)/s;if(g<2*n.duration/s&&p>g){var m=void 0,v=void 0;for(v=n.level-1;v>r;v--){var y=l[v].realBitrate?Math.max(l[v].realBitrate,l[v].bitrate):l[v].bitrate;if(m=n.duration*y/(6.4*d),g>m)break}p>m&&(Le.b.warn("loading too slow, abort fragment loading and switch to level "+v+":fragLoadedDelay["+v+"]<fragLoadedDelay["+(n.level-1)+"];bufferStarvationDelay:"+m.toFixed(1)+"<"+p.toFixed(1)+":"+g.toFixed(1)),e.nextLoadLevel=v,this._bwEstimator.sample(o,a.loaded),i.abort(),this.clearTimer(),e.trigger(Me.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:n,stats:a}))}}}},t.prototype.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&!isNaN(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[t.level],i=(n.loaded?n.loaded.bytes:0)+e.stats.loaded,r=(n.loaded?n.loaded.duration:0)+e.frag.duration;n.loaded={bytes:i,duration:r},n.realBitrate=Math.round(8*i/r)}if(e.frag.bitrateTest){var a=e.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(e)}}},t.prototype.onFragBuffered=function(e){var t=e.stats,n=e.frag;if(!(t.aborted===!0||1!==n.loadCounter||"main"!==n.type||isNaN(n.sn)||n.bitrateTest&&t.tload!==t.tbuffered)){var i=t.tparsed-t.trequest;Le.b.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(i,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},t.prototype.onError=function(e){switch(e.details){case Ce.a.FRAG_LOAD_ERROR:case Ce.a.FRAG_LOAD_TIMEOUT:this.clearTimer()}},t.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},t.prototype._findBestLevel=function(e,t,n,i,r,a,o,s,l){for(var d=r;d>=i;d--){var u=l[d],c=u.details,h=c?c.totalduration/c.fragments.length:t,f=c?c.live:!1,p=void 0;p=e>=d?o*n:s*n;var g=l[d].realBitrate?Math.max(l[d].realBitrate,l[d].bitrate):l[d].bitrate,m=g*h/p;if(Le.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+d+"/"+Math.round(p)+"/"+g+"/"+h+"/"+a+"/"+m),p>g&&(!m||f&&!this.bitrateTestDelay||a>m))return d}return-1},Rt(t,[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var n=this._nextABRAutoLevel;return-1!==e&&(n=Math.min(e,n)),n},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,n=e.levels,i=e.config,r=e.minAutoLevel,a=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=a?a.currentTime:0,d=a&&0!==a.playbackRate?Math.abs(a.playbackRate):1,u=this._bwEstimator?this._bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,c=(et.bufferInfo(a,l,i.maxBufferHole).end-l)/d,h=this._findBestLevel(o,s,u,r,t,c,i.abrBandWidthFactor,i.abrBandWidthUpFactor,n);if(h>=0)return h;Le.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var f=s?Math.min(s,i.maxStarvationDelay):i.maxStarvationDelay,p=i.abrBandWidthFactor,g=i.abrBandWidthUpFactor;if(0===c){var m=this.bitrateTestDelay;if(m){var v=s?Math.min(s,i.maxLoadingDelay):i.maxLoadingDelay;f=v-m,Le.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1}}return h=this._findBestLevel(o,s,u,r,t,c+f,p,g,n),Math.max(h,0)}}]),t}(Pe),wt=kt,Mt=function(e){function t(n){G(this,t);var i=j(this,e.call(this,n,Me.a.MEDIA_ATTACHING,Me.a.MEDIA_DETACHING,Me.a.MANIFEST_PARSED,Me.a.BUFFER_RESET,Me.a.BUFFER_APPENDING,Me.a.BUFFER_CODECS,Me.a.BUFFER_EOS,Me.a.BUFFER_FLUSHING,Me.a.LEVEL_PTS_UPDATED,Me.a.LEVEL_UPDATED));return i._msDuration=null,i._levelDuration=null,i.onsbue=i.onSBUpdateEnd.bind(i),i.onsbe=i.onSBUpdateError.bind(i),i.pendingTracks={},i.tracks={},i}return H(t,e),t.prototype.destroy=function(){Pe.prototype.destroy.call(this)},t.prototype.onLevelPtsUpdated=function(e){var t=e.type,n=this.tracks.audio;if("audio"===t&&n&&"audio/mpeg"===n.container){var i=this.sourceBuffer.audio,r=Math.abs(i.timestampOffset-e.start);if(r>.1){var a=i.updating;try{i.abort()}catch(e){a=!0,Le.b.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(Le.b.warn("change mpeg audio timestamp offset from "+i.timestampOffset+" to "+e.start),i.timestampOffset=e.start)}}},t.prototype.onManifestParsed=function(e){var t=e.audio,n=e.video||e.levels.length&&e.audio,i=0;e.altAudio&&(t||n)&&(i=(t?1:0)+(n?1:0),Le.b.log(i+" sourceBuffer(s) expected")),this.sourceBufferNb=i},t.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var n=this.mediaSource=new MediaSource;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),n.addEventListener("sourceopen",this.onmso),n.addEventListener("sourceended",this.onmse),n.addEventListener("sourceclose",this.onmsc),t.src=URL.createObjectURL(n)}},t.prototype.onMediaDetaching=function(){Le.b.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){Le.b.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(URL.revokeObjectURL(this.media.src),this.media.removeAttribute("src"),this.media.load()),this.mediaSource=null,this.media=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(Me.a.MEDIA_DETACHED)},t.prototype.onMediaSourceOpen=function(){Le.b.log("media source opened"),this.hls.trigger(Me.a.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},t.prototype.checkPendingTracks=function(){var e=this.pendingTracks,t=Object.keys(e).length;t&&(this.sourceBufferNb<=t||0===this.sourceBufferNb)&&(this.createSourceBuffers(e),this.pendingTracks={},this.doAppending())},t.prototype.onMediaSourceClose=function(){Le.b.log("media source closed")},t.prototype.onMediaSourceEnded=function(){Le.b.log("media source ended")},t.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;Le.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,n=this.segments.reduce(function(e,n){return n.parent===t?e+1:e},0);this.hls.trigger(Me.a.BUFFER_APPENDED,{parent:t,pending:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration()},t.prototype.onSBUpdateError=function(e){Le.b.error("sourceBuffer error:",e),this.hls.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var n=e[t];try{this.mediaSource.removeSourceBuffer(n),n.removeEventListener("updateend",this.onsbue),n.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},t.prototype.onBufferCodecs=function(e){if(0===Object.keys(this.sourceBuffer).length){for(var t in e)this.pendingTracks[t]=e[t];var n=this.mediaSource;n&&"open"===n.readyState&&this.checkPendingTracks()}},t.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;for(var i in e)if(!t[i]){var r=e[i],a=r.levelCodec||r.codec,o=r.container+";codecs="+a;Le.b.log("creating sourceBuffer("+o+")");try{var s=t[i]=n.addSourceBuffer(o);s.addEventListener("updateend",this.onsbue),s.addEventListener("error",this.onsbe),this.tracks[i]={codec:a,
container:r.container},r.buffer=s}catch(e){Le.b.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(Me.a.BUFFER_CREATED,{tracks:e})},t.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},t.prototype.onBufferAppendFail=function(e){Le.b.error("sourceBuffer error:",e.event),this.hls.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.BUFFER_APPENDING_ERROR,fatal:!1})},t.prototype.onBufferEos=function(e){var t=this.sourceBuffer,n=e.type;for(var i in t)n&&i!==n||t[i].ended||(t[i].ended=!0,Le.b.log(i+" sourceBuffer now EOS"));this.checkEos()},t.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var n in e){var i=e[n];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}Le.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){Le.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},t.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},t.prototype.onLevelUpdated=function(e){var t=e.details;0!==t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this.updateMediaElementDuration())},t.prototype.updateMediaElementDuration=function(){var e=this.media,t=this.mediaSource,n=this.sourceBuffer,i=this._levelDuration;if(null!==i&&e&&t&&n&&0!==e.readyState&&"open"===t.readyState){for(var r in n)if(n[r].updating)return;null===this._msDuration&&(this._msDuration=t.duration);var a=e.duration;(i>this._msDuration&&i>a||a===1/0||isNaN(a))&&(Le.b.log("Updating mediasource duration to "+i.toFixed(3)),this._msDuration=t.duration=i)}},t.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,n=this.sourceBuffer;try{for(var i in n)t+=n[i].buffered.length}catch(e){Le.b.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(Me.a.BUFFER_FLUSHED)}},t.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,n=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void Le.b.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(n&&n.length){var i=n.shift();try{var r=i.type,a=t[r];a?a.updating?n.unshift(i):(a.ended=!1,this.parent=i.parent,a.appendBuffer(i.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){Le.b.error("error while trying to append buffer:"+t.message),n.unshift(i);var o={type:Ce.b.MEDIA_ERROR,parent:i.parent};if(22===t.code)return this.segments=[],o.details=Ce.a.BUFFER_FULL_ERROR,o.fatal=!1,void e.trigger(Me.a.ERROR,o);if(this.appendError?this.appendError++:this.appendError=1,o.details=Ce.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return Le.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),n=[],o.fatal=!0,void e.trigger(Me.a.ERROR,o);o.fatal=!1,e.trigger(Me.a.ERROR,o)}}}},t.prototype.flushBuffer=function(e,t,n){var i,r,a,o,s,l,d=this.sourceBuffer;if(Object.keys(d).length){if(Le.b.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var u in d)if(!n||u===n){if(i=d[u],i.ended=!1,i.updating)return Le.b.warn("cannot flush, sb updating in progress"),!1;try{for(r=0;r<i.buffered.length;r++)if(a=i.buffered.start(r),o=i.buffered.end(r),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(s=e,l=t):(s=Math.max(a,e),l=Math.min(o,t)),Math.min(l,o)-s>.5)return this.flushBufferCounter++,Le.b.log("flush "+u+" ["+s+","+l+"], of ["+a+","+o+"], pos:"+this.media.currentTime),i.remove(s,l),!1}catch(e){Le.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else Le.b.warn("abort flushing too many retries");Le.b.log("buffer flushed")}return!0},t}(Pe),Ct=Mt,Lt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),It=function(e){function t(n){return V(this,t),Y(this,e.call(this,n,Me.a.FPS_DROP_LEVEL_CAPPING,Me.a.MEDIA_ATTACHING,Me.a.MANIFEST_PARSED))}return z(t,e),t.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=this.restrictedLevels=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer)))},t.prototype.onFpsDropLevelCapping=function(e){t.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},t.prototype.onMediaAttaching=function(e){this.media=e.media instanceof HTMLVideoElement?e.media:null},t.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],t.config.capLevelToPlayerSize&&(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.levels=e.levels,t.firstLevel=this.getMaxLevel(e.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},t.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},t.prototype.getMaxLevel=function(e){var n=this;if(!this.levels)return-1;var i=this.levels.filter(function(i,r){return t.isLevelAllowed(r,n.restrictedLevels)&&e>=r});return t.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)},t.isLevelAllowed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return-1===t.indexOf(e)},t.getMaxLevelByMediaSize=function(e,t,n){if(!e||e&&!e.length)return-1;for(var i=function(e,t){return t?e.width!==t.width||e.height!==t.height:!0},r=e.length-1,a=0;a<e.length;a+=1){var o=e[a];if((o.width>=t||o.height>=n)&&i(o,e[a+1])){r=a;break}}return r},Lt(t,[{key:"mediaWidth",get:function(){var e=void 0,n=this.media;return n&&(e=n.width||n.clientWidth||n.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e=void 0,n=this.media;return n&&(e=n.height||n.clientHeight||n.offsetHeight,e*=t.contentScaleFactor),e}}],[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}]),t}(Pe),_t=It,Pt=function(e){function t(n){return K(this,t),W(this,e.call(this,n,Me.a.MEDIA_ATTACHING))}return q(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){var n=this.video=e.media instanceof HTMLVideoElement?e.media:null;"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},t.prototype.checkFPS=function(e,t,n){var i=performance.now();if(t){if(this.lastTime){var r=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(Me.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),s>0&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;Le.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(Me.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(Pe),Dt=Pt,xt=function(){function e(t){X(this,e),t&&t.xhrSetup&&(this.xhrSetup=t.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,n){this.context=e,this.config=t,this.callbacks=n,this.stats={trequest:performance.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e="undefined"!=typeof XDomainRequest?this.loader=new XDomainRequest:this.loader=new XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup;try{if(i)try{i(e,t.url)}catch(n){e.open("GET",t.url,!0),i(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(n){return void this.callbacks.onError({code:e.status,text:n.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,n=t.readyState,i=this.stats,r=this.context,a=this.config;if(!i.aborted&&n>=2)if(window.clearTimeout(this.requestTimeout),0===i.tfirst&&(i.tfirst=Math.max(performance.now(),i.trequest)),4===n){var o=t.status;if(o>=200&&300>o){i.tload=Math.max(i.tfirst,performance.now());var s=void 0,l=void 0;"arraybuffer"===r.responseType?(s=t.response,l=s.byteLength):(s=t.responseText,l=s.length),i.loaded=i.total=l;var d={url:t.responseURL,data:s};this.callbacks.onSuccess(d,i,r,t)}else i.retry>=a.maxRetry||o>=400&&499>o?(Le.b.error(o+" while loading "+r.url),this.callbacks.onError({code:o,text:t.statusText},r,t)):(Le.b.warn(o+" while loading "+r.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),i.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),a.timeout)},e.prototype.loadtimeout=function(){Le.b.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total);var i=this.callbacks.onProgress;i&&i(n,this.context,null,t)},e}(),Ot=xt,Nt=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Bt=function(e){function t(n){Q(this,t);var i=J(this,e.call(this,n,Me.a.MANIFEST_LOADING,Me.a.MANIFEST_LOADED,Me.a.AUDIO_TRACK_LOADED,Me.a.ERROR));return i.ticks=0,i.ontick=i.tick.bind(i),i}return Z(t,e),t.prototype.destroy=function(){this.cleanTimer(),Pe.prototype.destroy.call(this)},t.prototype.cleanTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){this.updateTrack(this.trackId)},t.prototype.onError=function(e){e.fatal&&e.type===Ce.b.NETWORK_ERROR&&this.cleanTimer()},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.audioTracks||[],i=!1;this.tracks=n,this.hls.trigger(Me.a.AUDIO_TRACKS_UPDATED,{audioTracks:n});var r=0;n.forEach(function(e){return e.default&&!i?(t.audioTrack=r,void(i=!0)):void r++}),i===!1&&n.length&&(Le.b.log("no default audio track defined, use first audio track as default"),this.audioTrack=0)},t.prototype.onAudioTrackLoaded=function(e){e.id<this.tracks.length&&(Le.b.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(this.ontick,1e3*e.details.targetduration)),!e.details.live&&this.timer&&this.cleanTimer())},t.prototype.setAudioTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,Le.b.log("switching to audioTrack "+e);var t=this.tracks[e],n=this.hls,i=t.type,r=t.url,a={id:e,type:i,url:r};n.trigger(Me.a.AUDIO_TRACK_SWITCH,a),n.trigger(Me.a.AUDIO_TRACK_SWITCHING,a);var o=t.details;!r||void 0!==o&&o.live!==!0||(Le.b.log("(re)loading playlist for audioTrack "+e),n.trigger(Me.a.AUDIO_TRACK_LOADING,{url:r,id:e}))}},t.prototype.updateTrack=function(e){if(e>=0&&e<this.tracks.length){this.cleanTimer(),this.trackId=e,Le.b.log("updating audioTrack "+e);var t=this.tracks[e],n=t.url,i=t.details;!n||void 0!==i&&i.live!==!0||(Le.b.log("(re)loading playlist for audioTrack "+e),this.hls.trigger(Me.a.AUDIO_TRACK_LOADING,{url:n,id:e}))}},Nt(t,[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){(this.trackId!==e||void 0===this.tracks[e].details)&&this.setAudioTrackInternal(e)}}]),t}(Pe),Ft=Bt,Ut=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Gt={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"},jt=function(e){function t(n){$(this,t);var i=ee(this,e.call(this,n,Me.a.MEDIA_ATTACHED,Me.a.MEDIA_DETACHING,Me.a.AUDIO_TRACKS_UPDATED,Me.a.AUDIO_TRACK_SWITCHING,Me.a.AUDIO_TRACK_LOADED,Me.a.KEY_LOADED,Me.a.FRAG_LOADED,Me.a.FRAG_PARSING_INIT_SEGMENT,Me.a.FRAG_PARSING_DATA,Me.a.FRAG_PARSED,Me.a.ERROR,Me.a.BUFFER_CREATED,Me.a.BUFFER_APPENDED,Me.a.BUFFER_FLUSHED,Me.a.INIT_PTS_FOUND));return i.config=n.config,i.audioCodecSwap=!1,i.ticks=0,i._state=Gt.STOPPED,i.ontick=i.tick.bind(i),i.initPTS=[],i.waitingFragment=null,i.videoTrackCC=null,i}return te(t,e),t.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),Pe.prototype.destroy.call(this),this.state=Gt.STOPPED},t.prototype.onInitPtsFound=function(e){var t=e.id,n=e.frag.cc,i=e.initPTS;"main"===t&&(this.initPTS[n]=i,this.videoTrackCC=n,Le.b.log("InitPTS for cc:"+n+" found from video track:"+i),this.state===Gt.WAITING_INIT_PTS&&this.tick())},t.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.fragLoadError=0,t>0&&-1===e?(Le.b.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=Gt.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=Gt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=Gt.STOPPED},t.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragCurrent=null),this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=Gt.STOPPED},t.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),this.ticks>1&&setTimeout(this.tick,1),this.ticks=0)},t.prototype.doTick=function(){var e,t,n,i=this.hls,r=i.config;switch(this.state){case Gt.ERROR:case Gt.PAUSED:case Gt.BUFFER_FLUSHING:break;case Gt.STARTING:this.state=Gt.WAITING_TRACK,this.loadedmetadata=!1;break;case Gt.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(e=this.nextLoadPosition,void 0===e)break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=et.bufferInfo(o,e,r.maxBufferHole),l=s.len,d=s.end,u=this.fragPrevious,c=r.maxMaxBufferLength,h=this.audioSwitch,f=this.trackId;if((c>l||h)&&f<a.length){if(n=a[f].details,"undefined"==typeof n){this.state=Gt.WAITING_TRACK;break}if(!h&&!n.live&&u&&u.sn===n.endSN&&(!this.media.seeking||this.media.duration-d<u.duration/2)){this.hls.trigger(Me.a.BUFFER_EOS,{type:"audio"}),this.state=Gt.ENDED;break}var p=n.fragments,g=p.length,m=p[0].start,v=p[g-1].start+p[g-1].duration,y=void 0;if(h)if(n.live&&!n.PTSKnown)Le.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=e,n.PTSKnown&&m>e){if(!(s.end>m||s.nextStart))return;Le.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=m+.05}if(n.initSegment&&!n.initSegment.data)y=n.initSegment;else if(m>=d){if(y=p[0],null!==this.videoTrackCC&&y.cc!==this.videoTrackCC&&(y=b(p,this.videoTrackCC)),n.live&&y.loadIdx&&y.loadIdx===this.fragLoadIdx){var E=s.nextStart?s.nextStart:m;return Le.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(E+.05)),void(this.media.currentTime=E+.05)}}else{var A=void 0,T=r.maxFragLookUpTolerance,S=u?p[u.sn-p[0].sn+1]:void 0,R=function(e){var t=Math.min(T,e.duration);return e.start+e.duration-t<=d?1:e.start-t>d&&e.start?-1:0};v>d?(d>v-T&&(T=0),A=S&&!R(S)?S:Ze.search(p,R)):A=p[g-1],A&&(y=A,m=A.start,u&&y.level===u.level&&y.sn===u.sn&&(y.sn<n.endSN?(y=p[y.sn+1-n.startSN],Le.b.log("SN just loaded, load next one: "+y.sn)):y=null))}if(y)if(y.decryptdata&&null!=y.decryptdata.uri&&null==y.decryptdata.key)Le.b.log("Loading key for "+y.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+f),this.state=Gt.KEY_LOADING,i.trigger(Me.a.KEY_LOADING,{frag:y});else{if(Le.b.log("Loading "+y.sn+", cc: "+y.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+f+", currentTime:"+e+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,y.loadCounter){y.loadCounter++;var k=r.fragLoadingLoopThreshold;if(y.loadCounter>k&&Math.abs(this.fragLoadIdx-y.loadIdx)<k)return void i.trigger(Me.a.ERROR,{type:Ce.b.MEDIA_ERROR,details:Ce.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:y})}else y.loadCounter=1;y.loadIdx=this.fragLoadIdx,this.fragCurrent=y,this.startFragRequested=!0,isNaN(y.sn)||(this.nextLoadPosition=y.start+y.duration),i.trigger(Me.a.FRAG_LOADING,{frag:y}),this.state=Gt.FRAG_LOADING}}break;case Gt.WAITING_TRACK:t=this.tracks[this.trackId],t&&t.details&&(this.state=Gt.IDLE);break;case Gt.FRAG_LOADING_WAITING_RETRY:var w=performance.now(),M=this.retryDate;o=this.media;var C=o&&o.seeking;(!M||w>=M||C)&&(Le.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Gt.IDLE);break;case Gt.WAITING_INIT_PTS:var L=this.videoTrackCC;if(void 0===this.initPTS[L])break;var I=this.waitingFragment;if(I){var _=I.frag.cc;L!==_?(t=this.tracks[this.trackId],t.details&&t.details.live&&(Le.b.warn("Waiting fragment CC ("+_+") does not match video track CC ("+L+")"),this.waitingFragment=null,this.state=Gt.IDLE)):(this.state=Gt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=Gt.IDLE;break;case Gt.STOPPED:case Gt.FRAG_LOADING:case Gt.PARSING:case Gt.PARSED:case Gt.ENDED:}},t.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var n=this.config;this.tracks&&n.autoStartLoad&&this.startLoad(n.startPosition)},t.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(Le.b.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.tracks;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.loadCounter=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},t.prototype.onMediaSeeking=function(){this.state===Gt.ENDED&&(this.state=Gt.IDLE),this.media&&(this.lastCurrentTime=this.media.currentTime),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.tick()},t.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},t.prototype.onAudioTracksUpdated=function(e){Le.b.log("audio tracks updated"),this.tracks=e.audioTracks},t.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=Gt.PAUSED,this.waitingFragment=null,t?this.timer||(this.timer=setInterval(this.ontick,100)):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=Gt.IDLE,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},t.prototype.onAudioTrackLoaded=function(e){var t=e.details,n=e.id,i=this.tracks[n],r=t.totalduration,a=0;if(Le.b.log("track "+n+" loaded ["+t.startSN+","+t.endSN+"],duration:"+r),t.live){var o=i.details;o&&t.fragments.length>0?(E(o,t),a=t.fragments[0].start,t.PTSKnown?Le.b.log("live audio playlist sliding:"+a.toFixed(3)):Le.b.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,Le.b.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(i.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;isNaN(s)?this.startPosition=0:(Le.b.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s)}this.nextLoadPosition=this.startPosition}this.state===Gt.WAITING_TRACK&&(this.state=Gt.IDLE),this.tick()},t.prototype.onKeyLoaded=function(){this.state===Gt.KEY_LOADING&&(this.state=Gt.IDLE,this.tick())},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,n=e.frag;if(this.state===Gt.FRAG_LOADING&&t&&"audio"===n.type&&n.level===t.level&&n.sn===t.sn){var i=this.tracks[this.trackId],r=i.details,a=r.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||i.audioCodec||"mp4a.40.2",u=this.stats=e.stats;if("initSegment"===s)this.state=Gt.IDLE,u.tparsed=u.tbuffered=performance.now(),r.initSegment.data=e.payload,this.hls.trigger(Me.a.FRAG_BUFFERED,{stats:u,frag:t,id:"audio"}),this.tick();else{this.state=Gt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new st(this.hls,"audio"));var c=this.initPTS[l],h=r.initSegment?r.initSegment.data:[];if(r.initSegment||void 0!==c){this.pendingBuffering=!0,Le.b.log("Demuxing "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o);var f=!1;this.demuxer.push(e.payload,h,d,null,t,a,f,c)}else Le.b.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+r.startSN+" ,"+r.endSN+"],track "+o),this.waitingFragment=e,this.state=Gt.WAITING_INIT_PTS}}this.fragLoadError=0},t.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,n=e.frag;if(t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Gt.PARSING){var i=e.tracks,r=void 0;if(i.video&&delete i.video,r=i.audio){r.levelCodec=r.codec,r.id=e.id,this.hls.trigger(Me.a.BUFFER_CODECS,i),Le.b.log("audio track:audio,container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var a=r.initSegment;if(a){var o={type:"audio",data:a,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(Me.a.BUFFER_APPENDING,o))}this.tick()}}},t.prototype.onFragParsingData=function(e){var t=this,n=this.fragCurrent,i=e.frag;if(n&&"audio"===e.id&&"audio"===e.type&&i.sn===n.sn&&i.level===n.level&&this.state===Gt.PARSING){var r=this.trackId,a=this.tracks[r],o=this.hls;isNaN(e.endPTS)&&(e.endPTS=e.startPTS+n.duration,e.endDTS=e.startDTS+n.duration),Le.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),y(a.details,n,e.startPTS,e.endPTS);var s=this.audioSwitch,l=this.media,d=!1;if(s&&l)if(l.readyState){var u=l.currentTime;Le.b.log("switching audio track : currentTime:"+u),u>=e.startPTS&&(Le.b.log("switching audio track : flushing all audio"),this.state=Gt.BUFFER_FLUSHING,o.trigger(Me.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),d=!0,this.audioSwitch=!1,o.trigger(Me.a.AUDIO_TRACK_SWITCHED,{id:r}))}else this.audioSwitch=!1,o.trigger(Me.a.AUDIO_TRACK_SWITCHED,{id:r});var c=this.pendingData;this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&c.push({type:e.type,data:t,parent:"audio",content:"data"})}),!d&&c.length&&(c.forEach(function(e){t.state===Gt.PARSING&&(t.pendingBuffering=!0,t.hls.trigger(Me.a.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},t.prototype.onFragParsed=function(e){var t=this.fragCurrent,n=e.frag;t&&"audio"===e.id&&n.sn===t.sn&&n.level===t.level&&this.state===Gt.PARSING&&(this.stats.tparsed=performance.now(),this.state=Gt.PARSED,this._checkAppendedParsed())},t.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0)},t.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;(t===Gt.PARSING||t===Gt.PARSED)&&(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},t.prototype._checkAppendedParsed=function(){if(!(this.state!==Gt.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,n=this.hls;if(e){this.fragPrevious=e,t.tbuffered=performance.now(),n.trigger(Me.a.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var i=this.mediaBuffer?this.mediaBuffer:this.media;Le.b.log("audio buffered : "+dt.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,n.trigger(Me.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Gt.IDLE}this.tick()}},t.prototype.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case Ce.a.FRAG_LOAD_ERROR:case Ce.a.FRAG_LOAD_TIMEOUT:if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var i=this.config;if(n<=i.fragLoadingMaxRetry){this.fragLoadError=n,t.loadCounter=0;var r=Math.min(Math.pow(2,n-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout);Le.b.warn("audioStreamController: frag loading failed, retry in "+r+" ms"),this.retryDate=performance.now()+r,this.state=Gt.FRAG_LOADING_WAITING_RETRY}else Le.b.error("audioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Gt.ERROR}break;case Ce.a.FRAG_LOOP_LOADING_ERROR:case Ce.a.AUDIO_TRACK_LOAD_ERROR:case Ce.a.AUDIO_TRACK_LOAD_TIMEOUT:case Ce.a.KEY_LOAD_ERROR:case Ce.a.KEY_LOAD_TIMEOUT:this.state!==Gt.ERROR&&(this.state=e.fatal?Gt.ERROR:Gt.IDLE,Le.b.warn("audioStreamController: "+e.details+" while loading frag,switch to "+this.state+" state ..."));break;case Ce.a.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===Gt.PARSING||this.state===Gt.PARSED)){var a=this.mediaBuffer,o=this.media.currentTime,s=a&&et.isBuffered(a,o)&&et.isBuffered(a,o+.5);if(s){var l=this.config;l.maxMaxBufferLength>=l.maxBufferLength&&(l.maxMaxBufferLength/=2,Le.b.warn("audio:reduce max buffer length to "+l.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*l.fragLoadingLoopThreshold),this.state=Gt.IDLE}else Le.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Gt.BUFFER_FLUSHING,this.hls.trigger(Me.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},t.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(Le.b.log("appending pending audio data on Buffer Flushed"),t.forEach(function(t){e.hls.trigger(Me.a.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=Gt.PARSED):(this.state=Gt.IDLE,this.fragPrevious=null,this.tick())},Ut(t,[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,Le.b.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}]),t}(Pe),Ht=jt,Vt=function(){function e(e){if("string"!=typeof e)return!1;var t=a[e.toLowerCase()];return t?e.toLowerCase():!1}function t(e){if("string"!=typeof e)return!1;var t=o[e.toLowerCase()];return t?e.toLowerCase():!1}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)e[i]=n[i]}return e}function i(i,a,o){var s=this,l=function(){return"undefined"!=typeof navigator?/MSIE\s8\.0/.test(navigator.userAgent):void 0}(),d={};l?s=document.createElement("custom"):d.enumerable=!0,s.hasBeenReset=!1;var u="",c=!1,h=i,f=a,p=o,g=null,m="",v=!0,y="auto",E="start",A=50,b="middle",T=50,S="middle";return Object.defineProperty(s,"id",n({},d,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",n({},d,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",n({},d,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",n({},d,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",n({},d,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",n({},d,{get:function(){return g},set:function(e){g=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",n({},d,{get:function(){return m},set:function(t){var n=e(t);if(n===!1)throw new SyntaxError("An invalid or illegal string was specified.");m=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",n({},d,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",n({},d,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==r)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",n({},d,{get:function(){return E},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");E=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",n({},d,{get:function(){return A},set:function(e){if(0>e||e>100)throw new Error("Position must be between 0 and 100.");A=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",n({},d,{get:function(){return b},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");b=n,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",n({},d,{get:function(){return T},set:function(e){if(0>e||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",n({},d,{get:function(){return S},set:function(e){var n=t(e);if(!n)throw new SyntaxError("An invalid or illegal string was specified.");S=n,this.hasBeenReset=!0}})),s.displayState=void 0,l?s:void 0}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var r="auto",a={"":!0,lr:!0,rl:!0},o={start:!0,middle:!0,end:!0,left:!0,right:!0};return i.prototype.getCueAsHTML=function(){var e=window.WebVTT;return e.convertCueToDOMTree(window,this.text)},i}(),Yt=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};re.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t;
},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){var n;return(n=t.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(t=parseFloat(t),t>=0&&100>=t)?(this.set(e,t),!0):!1}};var zt=new Vt(0,0,0),Kt="middle"===zt.align?"middle":"center";ne.prototype={parse:function(e){function t(){var e=i.buffer,t=0;for(e=se(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,i.buffer=e.substr(t),n}function n(e){ae(e,function(e,t){switch(e){case"Region":console.log("parse region",t)}},/:/)}var i=this;e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;r=t();var a=r.match(/^()?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=t(),i.state){case"HEADER":/:/.test(r)?n(r):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new Vt(0,0,""),i.state="CUE",-1===r.indexOf("-->")){i.cue.id=r;continue}case"CUE":try{oe(r,i.cue,i.regionList)}catch(e){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("-->");if(!r||s&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}};var Wt=ne,qt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Xt=function(e){var t=e;return qt.hasOwnProperty(e)&&(t=qt[e]),String.fromCharCode(t)},Qt=15,Jt=100,Zt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},$t={17:2,18:4,21:6,22:8,23:10,19:13,20:15},en={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},tn={25:2,26:4,29:6,30:8,31:10,27:13,28:15},nn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],rn={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},an=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},on=function(){function e(t,n,i,r,a){de(this,e),this.foreground=t||"white",this.underline=n||!1,this.italics=i||!1,this.background=r||"black",this.flash=a||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),sn=function(){function e(t,n,i,r,a,o){de(this,e),this.uchar=t||" ",this.penState=new on(n,i,r,a,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),ln=function(){function e(){de(this,e),this.chars=[];for(var t=0;Jt>t;t++)this.chars.push(new sn);this.pos=0,this.currPenState=new on}return e.prototype.equals=function(e){for(var t=!0,n=0;Jt>n;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;Jt>t;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;Jt>t;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(rn.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>Jt&&(rn.log("ERROR","Too large cursor position "+this.pos),this.pos=Jt)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;t+1>n;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=Xt(e);return this.pos>=Jt?void rn.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),void this.moveCursor(1))},e.prototype.clearFromPos=function(e){var t;for(t=e;Jt>t;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,n=0;Jt>n;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e);var t=this.chars[this.pos];t.setPenState(this.currPenState)},e}(),dn=function(){function e(){de(this,e),this.rows=[];for(var t=0;Qt>t;t++)this.rows.push(new ln);this.currRow=Qt-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;Qt>e;e++)this.rows[e].clear();this.currRow=Qt-1},e.prototype.equals=function(e){for(var t=!0,n=0;Qt>n;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;Qt>t;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;Qt>t;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){var e=this.rows[this.currRow];e.backSpace()},e.prototype.clearToEndOfRow=function(){var e=this.rows[this.currRow];e.clearToEndOfRow()},e.prototype.insertChar=function(e){var t=this.rows[this.currRow];t.insertChar(e)},e.prototype.setPen=function(e){var t=this.rows[this.currRow];t.setPenStyles(e)},e.prototype.moveCursor=function(e){var t=this.rows[this.currRow];t.moveCursor(e)},e.prototype.setCursor=function(e){rn.log("INFO","setCursor: "+e);var t=this.rows[this.currRow];t.setCursor(e)},e.prototype.setPAC=function(e){rn.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;Qt>n;n++)this.rows[n].clear();var i=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[i].cueStartTime;if(a&&a<rn.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(r.rows[i+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,d=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[d].penState.foreground}var u={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(u)},e.prototype.setBkgData=function(e){rn.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void rn.log("DEBUG","roll_up but nrRollUpRows not set yet");rn.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),rn.log("INFO","Rolling up")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;Qt>r;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},e.prototype.getTextAndFormat=function(){return this.rows},e}(),un=function(){function e(t,n){de(this,e),this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new dn,this.nonDisplayedMemory=new dn,this.lastOutputScreen=new dn,this.currRollUpRow=this.displayedMemory.rows[Qt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[Qt-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,rn.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";rn.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(rn.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){rn.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){rn.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){rn.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){rn.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){rn.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){rn.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){rn.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){rn.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){rn.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},e.prototype.ccCR=function(){rn.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},e.prototype.ccENM=function(){rn.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(rn.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,rn.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},e.prototype.ccTO=function(e){rn.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}rn.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(){var e=rn.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),cn=function(){function e(t,n,i){de(this,e),this.field=t||1,this.outputs=[n,i],this.channels=[new un(1,n),new un(2,i)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var n,i,r,a=!1;this.lastTime=e,rn.setTime(e);for(var o=0;o<t.length;o+=2)if(i=127&t[o],r=127&t[o+1],0!==i||0!==r){if(rn.log("DATA","["+an([t[o],t[o+1]])+"] -> ("+an([i,r])+")"),n=this.parseCmd(i,r),n||(n=this.parseMidrow(i,r)),n||(n=this.parsePAC(i,r)),n||(n=this.parseBackgroundAttributes(i,r)),!n&&(a=this.parseChars(i,r)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(a)}else rn.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,rn.log("WARNING","Couldn't parse cleaned data "+an([i,r])+" orig: "+an([t[o],t[o+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var n=null,i=(20===e||28===e)&&t>=32&&47>=t,r=(23===e||31===e)&&t>=33&&35>=t;if(!i&&!r)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,rn.log("DEBUG","Repeated command ("+an([e,t])+") is dropped"),!0;n=20===e||23===e?1:2;var a=this.channels[n-1];return 20===e||28===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.parseMidrow=function(e,t){var n=null;if((17===e||25===e)&&t>=32&&47>=t){if(n=17===e?1:2,n!==this.currChNr)return rn.log("ERROR","Mismatch channel in midrow parsing"),!1;var i=this.channels[n-1];return i.ccMIDROW(t),rn.log("DEBUG","MIDROW ("+an([e,t])+")"),!0}return!1},e.prototype.parsePAC=function(e,t){var n=null,i=null,r=(e>=17&&23>=e||e>=25&&31>=e)&&t>=64&&127>=t,a=(16===e||24===e)&&t>=64&&95>=t;if(!r&&!a)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;n=23>=e?1:2,i=t>=64&&95>=t?1===n?Zt[e]:en[e]:1===n?$t[e]:tn[e];var o=this.interpretPAC(i,t),s=this.channels[n-1];return s.setPAC(o),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},e.prototype.interpretPAC=function(e,t){var n=t,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1===(1&n),13>=n?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:15>=n?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},e.prototype.parseChars=function(e,t){var n=null,i=null,r=null;if(e>=25?(n=2,r=e-8):(n=1,r=e),r>=17&&19>=r){var a=t;a=17===r?t+80:18===r?t+112:t+144,rn.log("INFO","Special char '"+Xt(a)+"' in channel "+n),i=[a]}else e>=32&&127>=e&&(i=0===t?[e]:[e,t]);if(i){var o=an(i);rn.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return i},e.prototype.parseBackgroundAttributes=function(e,t){var n,i,r,a,o=(16===e||24===e)&&t>=32&&47>=t,s=(23===e||31===e)&&t>=45&&47>=t;return o||s?(n={},16===e||24===e?(i=Math.floor((t-32)/2),n.background=nn[i],t%2===1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),r=24>e?1:2,a=this.channels[r-1],a.setBkgData(n),this.lastCmdA=null,this.lastCmdB=null,!0):!1},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),hn=cn,fn=function(e,t,n){return e.substr(n||0,t.length)===t},pn=function(e){var t=parseInt(e.substr(-3)),n=parseInt(e.substr(-6,2)),i=parseInt(e.substr(-9,2)),r=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;return isNaN(t)||isNaN(n)||isNaN(i)||isNaN(r)?-1:(t+=1e3*n,t+=6e4*i,t+=36e5*r)},gn=function e(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return(e>>>0).toString()},mn=function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;r&&r.new;)e.ccOffset+=i.start-r.start,i.new=!1,i=r,r=e[i.prevCC];e.presentationOffset=n},vn={parse:function(e,t,n,i,r,a){var o=/\r\n|\n\r|\n|\r/g,s=String.fromCharCode.apply(null,new Uint8Array(e)).trim().replace(o,"\n").split("\n"),l="00:00.000",d=0,u=0,c=0,h=[],f=void 0,p=!0,g=new Wt;g.oncue=function(e){var t=n[i],r=n.ccOffset;t&&t.new&&(void 0!==u?r=n.ccOffset=t.start:mn(n,i,c)),c&&(r=c+n.ccOffset-n.presentationOffset),e.startTime+=r-u,e.endTime+=r-u,e.id=gn(e.startTime)+gn(e.endTime)+gn(e.text),e.text=decodeURIComponent(escape(e.text)),e.endTime>0&&h.push(e)},g.onparsingerror=function(e){f=e},g.onflush=function(){return f&&a?void a(f):void r(h)},s.forEach(function(e){if(p){if(fn(e,"X-TIMESTAMP-MAP=")){p=!1,e.substr(16).split(",").forEach(function(e){fn(e,"LOCAL:")?l=e.substr(6):fn(e,"MPEGTS:")&&(d=parseInt(e.substr(7)))});try{t=0>t?t+8589934592:t,d-=t,u=pn(l)/1e3,c=d/9e4,-1===u&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){f=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(p=!1)}g.parse(e+"\n")}),g.flush()}},yn=vn,En=function(e){function t(n){ue(this,t);var i=ce(this,e.call(this,n,Me.a.MEDIA_ATTACHING,Me.a.MEDIA_DETACHING,Me.a.FRAG_PARSING_USERDATA,Me.a.MANIFEST_LOADING,Me.a.MANIFEST_LOADED,Me.a.FRAG_LOADED,Me.a.LEVEL_SWITCHING,Me.a.INIT_PTS_FOUND));if(i.hls=n,i.config=n.config,i.enabled=!0,i.Cues=n.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions){var r=i,a=function(e,t){var n=null;try{n=new window.Event("addtrack")}catch(e){n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)},o={newCue:function(e,t,n){if(!r.textTrack1){var i=r.getExistingTrack("1");if(i)r.textTrack1=i,fe(r.textTrack1),a(r.textTrack1,r.media);else{var o=r.createTextTrack("captions",r.config.captionsTextTrack1Label,r.config.captionsTextTrack1LanguageCode);o&&(o.textTrack1=!0,r.textTrack1=o)}}r.addCues("textTrack1",e,t,n)}},s={newCue:function(e,t,n){if(!r.textTrack2){var i=r.getExistingTrack("2");if(i)r.textTrack2=i,fe(r.textTrack2),a(r.textTrack2,r.media);else{var o=r.createTextTrack("captions",r.config.captionsTextTrack2Label,r.config.captionsTextTrack1LanguageCode);o&&(o.textTrack2=!0,r.textTrack2=o)}}r.addCues("textTrack2",e,t,n)}};i.cea608Parser=new hn(0,o,s)}return i}return he(t,e),t.prototype.addCues=function(e,t,n,i){for(var r=this.cueRanges,a=!1,o=r.length;o--;){var s=r[o],l=ge(s[0],s[1],t,n);if(l>=0&&(s[0]=Math.min(s[0],t),s[1]=Math.max(s[1],n),a=!0,l/(n-t)>.5))return}a||r.push([t,n]),this.Cues.newCue(this[e],t,n,i)},t.prototype.onInitPtsFound=function(e){var t=this;"undefined"==typeof this.initPTS&&(this.initPTS=e.initPTS),this.unparsedVttFrags.length&&(this.unparsedVttFrags.forEach(function(e){t.onFragLoaded(e)}),this.unparsedVttFrags=[])},t.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n],r="textTrack"+e;if(i[r]===!0)return i}return null},t.prototype.createTextTrack=function(e,t,n){var i=this.media;return i?i.addTextTrack(e,t,n):void 0},t.prototype.destroy=function(){Pe.prototype.destroy.call(this)},t.prototype.onMediaAttaching=function(e){this.media=e.media},t.prototype.onMediaDetaching=function(){fe(this.textTrack1),fe(this.textTrack2)},t.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0};var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)fe(t[n])}},t.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var n=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var r=void 0;if(i<n.length){var a=n[i];pe(a,e)&&(r=a)}r||(r=t.createTextTrack("subtitles",e.name,e.lang)),r.mode=e.default?"showing":"hidden",t.textTracks.push(r)})}},t.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},t.prototype.onFragLoaded=function(e){var t=e.frag,n=e.payload;if("main"===t.type){var i=t.sn;if(i!==this.lastSn+1){var r=this.cea608Parser;r&&r.reset()}this.lastSn=i}else if("subtitle"===t.type)if(n.byteLength){if("undefined"==typeof this.initPTS)return void this.unparsedVttFrags.push(e);var a=this.vttCCs;a[t.cc]||(a[t.cc]={start:t.start,prevCC:this.prevCC,new:!0},this.prevCC=t.cc);var o=this.textTracks,s=this.hls;yn.parse(n,this.initPTS,a,t.cc,function(e){var n=o[t.trackId];e.forEach(function(e){if(!n.cues.getCueById(e.id))try{n.addCue(e)}catch(i){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),s.trigger(Me.a.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},function(e){Le.b.log("Failed to parse VTT cue: "+e),s.trigger(Me.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})})}else this.hls.trigger(Me.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},t.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var n=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,n)}},t.prototype.extractCea608Data=function(e){for(var t,n,i,r,a,o=31&e[0],s=2,l=[],d=0;o>d;d++)t=e[s++],n=127&e[s++],i=127&e[s++],r=0!==(4&t),a=3&t,(0!==n||0!==i)&&r&&0===a&&(l.push(n),l.push(i));return l},t}(Pe),An=En,bn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Tn=function(e){function t(n){me(this,t);var i=ve(this,e.call(this,n,Me.a.MEDIA_ATTACHED,Me.a.MEDIA_DETACHING,Me.a.MANIFEST_LOADING,Me.a.MANIFEST_LOADED,Me.a.SUBTITLE_TRACK_LOADED));return i.tracks=[],i.trackId=-1,i.media=void 0,i}return ye(t,e),t.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Ee(this.media.textTracks),n=0;n<t.length;n++)"showing"===t[n].mode&&(e=n);this.subtitleTrack=e}},t.prototype.destroy=function(){Pe.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},t.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=void 0)},t.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},t.prototype.onManifestLoaded=function(e){var t=this,n=e.subtitles||[],i=!1;this.tracks=n,this.trackId=-1,this.hls.trigger(Me.a.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:n}),n.forEach(function(e){e.default&&(t.subtitleTrack=e.id,i=!0)})},t.prototype.onTick=function(){var e=this.trackId,t=this.tracks[e];if(t){var n=t.details;(void 0===n||n.live===!0)&&(Le.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(Me.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},t.prototype.onSubtitleTrackLoaded=function(e){var t=this;e.id<this.tracks.length&&(Le.b.log("subtitle track "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.timer&&(this.timer=setInterval(function(){t.onTick()},1e3*e.details.targetduration,this)),!e.details.live&&this.timer&&(clearInterval(this.timer),this.timer=null))},t.prototype.setSubtitleTrackInternal=function(e){if(e>=0&&e<this.tracks.length){this.timer&&(clearInterval(this.timer),this.timer=null),this.trackId=e,Le.b.log("switching to subtitle track "+e);var t=this.tracks[e];this.hls.trigger(Me.a.SUBTITLE_TRACK_SWITCH,{id:e});var n=t.details;(void 0===n||n.live===!0)&&(Le.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(Me.a.SUBTITLE_TRACK_LOADING,{url:t.url,id:e}))}},bn(t,[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&this.setSubtitleTrackInternal(e)}}]),t}(Pe),Sn=Tn,Rn=function(e){function t(n){Ae(this,t);var i=be(this,e.call(this,n,Me.a.ERROR,Me.a.SUBTITLE_TRACKS_UPDATED,Me.a.SUBTITLE_TRACK_SWITCH,Me.a.SUBTITLE_TRACK_LOADED,Me.a.SUBTITLE_FRAG_PROCESSED));return i.config=n.config,i.vttFragSNsProcessed={},i.vttFragQueues=void 0,i.currentlyProcessing=null,i.currentTrackId=-1,i}return Te(t,e),t.prototype.destroy=function(){Pe.prototype.destroy.call(this)},t.prototype.clearVttFragQueues=function(){var e=this;this.vttFragQueues={},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},t.prototype.nextFrag=function(){if(null===this.currentlyProcessing&&this.currentTrackId>-1&&this.vttFragQueues[this.currentTrackId].length){var e=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift();this.hls.trigger(Me.a.FRAG_LOADING,{frag:e})}},t.prototype.onSubtitleFragProcessed=function(e){e.success&&this.vttFragSNsProcessed[e.frag.trackId].push(e.frag.sn),this.currentlyProcessing=null,this.nextFrag()},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(this.currentlyProcessing=null,this.nextFrag())},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;Le.b.log("subtitle tracks updated"),this.tracks=e.subtitleTracks,this.clearVttFragQueues(),this.vttFragSNsProcessed={},this.tracks.forEach(function(e){t.vttFragSNsProcessed[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){this.currentTrackId=e.id,this.clearVttFragQueues()},t.prototype.onSubtitleTrackLoaded=function(e){var t=this.vttFragSNsProcessed[e.id],n=this.vttFragQueues[e.id],i=this.currentlyProcessing?this.currentlyProcessing.sn:-1,r=function(e){return t.indexOf(e.sn)>-1},a=function(e){return n.some(function(t){return t.sn===e.sn})};e.details.fragments.forEach(function(t){r(t)||t.sn===i||a(t)||(t.trackId=e.id,n.push(t))}),this.nextFrag()},t}(Pe),kn=Rn,wn={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.2,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ot,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:wt,bufferController:Ct,capLevelController:_t,fpsController:Dt,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};wn.subtitleStreamController=kn,wn.subtitleTrackController=Sn,wn.timelineController=An,wn.cueHandler=Re,wn.enableCEA708Captions=!0,wn.enableWebVTT=!0,wn.captionsTextTrack1Label="English",wn.captionsTextTrack1LanguageCode="en",wn.captionsTextTrack2Label="Spanish",wn.captionsTextTrack2LanguageCode="es",wn.audioStreamController=Ht,wn.audioTrackController=Ft;var Mn=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Cn=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Se(this,e);var i=e.DefaultConfig;if((n.liveSyncDurationCount||n.liveMaxLatencyDurationCount)&&(n.liveSyncDuration||n.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var r in i)r in n||(n[r]=i[r]);if(void 0!==n.liveMaxLatencyDurationCount&&n.liveMaxLatencyDurationCount<=n.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==n.liveMaxLatencyDuration&&(n.liveMaxLatencyDuration<=n.liveSyncDuration||void 0===n.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(Le.a)(n.debug),this.config=n,this._autoLevelCapping=-1;var a=this.observer=new it.a;a.trigger=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];a.emit.apply(a,[e,e].concat(n))},a.off=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;t>i;i++)n[i-1]=arguments[i];a.removeListener.apply(a,[e].concat(n))},this.on=a.on.bind(a),this.off=a.off.bind(a),this.trigger=a.trigger.bind(a);var o=this.abrController=new n.abrController(this),s=new n.bufferController(this),l=new n.capLevelController(this),d=new n.fpsController(this),u=new Ke(this),c=new qe(this),h=new Qe(this),f=new Et(this),p=this.levelController=new mt(this),g=this.streamController=new ft(this),m=[p,g],v=n.audioStreamController;v&&m.push(new v(this)),this.networkControllers=m;var y=[u,c,h,o,s,l,d,f];if(v=n.audioTrackController){var E=new v(this);
this.audioTrackController=E,y.push(E)}if(v=n.subtitleTrackController){var A=new v(this);this.subtitleTrackController=A,y.push(A)}[n.subtitleStreamController,n.timelineController].forEach(function(e){e&&y.push(new e(t))}),this.coreComponents=y}return e.isSupported=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return n&&i},Mn(e,null,[{key:"version",get:function(){return"0.8.2"}},{key:"Events",get:function(){return Me.a}},{key:"ErrorTypes",get:function(){return Ce.b}},{key:"ErrorDetails",get:function(){return Ce.a}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:wn},set:function(t){e.defaultConfig=t}}]),e.prototype.destroy=function(){Le.b.log("destroy"),this.trigger(Me.a.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.observer.removeAllListeners(),this._autoLevelCapping=-1},e.prototype.attachMedia=function(e){Le.b.log("attachMedia"),this.media=e,this.trigger(Me.a.MEDIA_ATTACHING,{media:e})},e.prototype.detachMedia=function(){Le.b.log("detachMedia"),this.trigger(Me.a.MEDIA_DETACHING),this.media=null},e.prototype.loadSource=function(e){e=we.a.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),Le.b.log("loadSource:"+e),this.url=e,this.trigger(Me.a.MANIFEST_LOADING,{url:e})},e.prototype.startLoad=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;Le.b.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},e.prototype.stopLoad=function(){Le.b.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},e.prototype.swapAudioCodec=function(){Le.b.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.prototype.recoverMediaError=function(){Le.b.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Mn(e,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){Le.b.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){Le.b.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){Le.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){Le.b.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){Le.b.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){Le.b.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this,t=e.levels,n=e.config.minAutoBitrate,i=t?t.length:0,r=0;i>r;r++){var a=t[r].realBitrate?Math.max(t[r].realBitrate,t[r].bitrate):t[r].bitrate;if(a>n)return r}return 0}},{key:"maxAutoLevel",get:function(){var e=this,t=e.levels,n=e.autoLevelCapping,i=void 0;return i=-1===n&&t&&t.length?t.length-1:n}},{key:"nextAutoLevel",get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}}]),e}();t.default=Cn},function(e,t,n){function i(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw console.error(e),e};var i=t(t.s=ENTRY_MODULE);return i.default||i}function r(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function a(e){var t=[],n=e.toString(),i=n.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!i)return t;for(var a,o=i[1],s=new RegExp("(\\\\n|\\W)"+r(o)+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");a=s.exec(n);)t.push(a[3]);return t}function o(e,t){for(var n=[t],i=[],r={};n.length;){var o=n.pop();if(!r[o]&&e[o]){r[o]=!0,i.push(o);var s=a(e[o]);n=n.concat(s)}}return i}e.exports=function(e,t){t=t||{};var r=n.m,a=t.all?Object.keys(r):o(r,e),s="("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+a.map(function(e){return""+JSON.stringify(e)+": "+r[e].toString()}).join(",")+"})(self);",l=new window.Blob([s],{type:"text/javascript"});if(t.bare)return l;var d=window.URL||window.webkitURL||window.mozURL||window.msURL,u=d.createObjectURL(l),c=new window.Worker(u);return c.objectURL=u,c}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=n(1),a=n(0),o=n(4),s=n.n(o),l=function(e){var t=new s.a;t.trigger=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];t.emit.apply(t,[e,e].concat(i))},t.off=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;n>r;r++)i[r-1]=arguments[r];t.removeListener.apply(t,[e].concat(i))};var n=function(t,n){e.postMessage({event:t,data:n})};e.addEventListener("message",function(r){var o=r.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new i.a(t,o.typeSupported,s,o.vendor);try{Object(a.a)(s.debug===!0)}catch(e){console.warn("demuxerWorker: unable to enable logs")}n("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(r.a.FRAG_DECRYPTED,n),t.on(r.a.FRAG_PARSING_INIT_SEGMENT,n),t.on(r.a.FRAG_PARSED,n),t.on(r.a.ERROR,n),t.on(r.a.FRAG_PARSING_METADATA,n),t.on(r.a.FRAG_PARSING_USERDATA,n),t.on(r.a.INIT_PTS_FOUND,n),t.on(r.a.FRAG_PARSING_DATA,function(t,n){var i=[],r={event:t,data:n};n.data1&&(r.data1=n.data1.buffer,i.push(n.data1.buffer),delete n.data1),n.data2&&(r.data2=n.data2.buffer,i.push(n.data2.buffer),delete n.data2),e.postMessage(r,i)})};t.default=l}]).default})},function(e,t,n){var i=n(2).getLogger("hlsjs-stats"),r=n(75);e.exports=function(e){function t(e,t){var n=t.stats;g=n.tload,i.debug("onManifestLoaded ",n)}function n(e,t){f=t.levels}function a(e,t){u=t.totalDropped,c=t.curentDropped/t.currentDecoded*100,i.debug("onFpsDrop ",t)}function o(e,t){p=t.level,i.debug("onLevelSwitch: ",t)}function s(e,t){m=t.tload-t.trequest}function l(e,t){S++,v=t.stats.tbuffered,y=Math.round(8*t.stats.total/(t.stats.tbuffered-t.stats.tfirst)),T+=y,y>A&&(A=y),(E>y||-1===E)&&(E=y),b=T/S}var d=e,u=0,c=0,h=0,f=[],p=0,g=-1,m=-1,v=0,y=-1,E=-1,A=-1,b=-1,T=0,S=0;return d.on(r.Events.MANIFEST_LOADED,t),d.on(r.Events.MANIFEST_PARSED,n),d.on(r.Events.FPS_DROP,a),d.on(r.Events.LEVEL_SWITCH,o),d.on(r.Events.FRAG_LOADED,s),d.on(r.Events.FRAG_BUFFERED,l),{getCurrentRendition:function(){return p},getFrameDropsTotal:function(){return u},getFrameDrops:function(){var e=u-h;return h=u,e},getFrameDropsPercentage:function(){return c},getBufferLength:function(){return v},getRenditions:function(){return f},getManifestLoadTime:function(){return g},getFragmentLoadTime:function(){return m},getBandwidth:function(){return y},getBandwidthMin:function(){return E},getBandwidthMax:function(){return A},getBandwidthAvg:function(){return b},destroy:function(){d.off(r.Events.MANIFEST_LOADED,t),d.off(r.Events.FPS_DROP,a),d.off(r.Events.LEVEL_SWITCH,o),d.off(r.Events.FRAG_LOADED,s),d.off(r.Events.FRAG_BUFFERED,l)}}}},function(e,t,n){var i=n(2).getLogger("video-buffer-ext"),r=n(63),a=n(1),o=function(e){a.bindAll(this,"checkBufferSize","setBufferCapacity","onLoadError","disable"),this.video=e,this.video.on(r.FRAGMENT_LOADED,this.checkBufferSize),this.video.on(r.FRAGMENT_LOAD_ERROR,this.onLoadError)};o.prototype={DISABLED_MAX_BUFFER_SIZE:24e3,MAX_BUFFER_SIZE:6e4,DEFAULT_BUFFER_SIZE:15e3,SEGMENT_BUFFER_SIZE:6e3,BUFFER_THRESHOLD:.8,bufferCapacity:15e3,bufferLength:null,currentRendition:null,bufferCapUtilized:null,checkBufferSize:function(){var e=this.DEFAULT_BUFFER_SIZE;this.bufferLength=Math.max(0,this.video.getBufferLength()),this.currentRendition=this.video.getCurrentRendition(),this.bufferCapUtilized=this.bufferLength/this.bufferCapacity,this.currentRendition>=5&&(e=this.bufferCapUtilized>=this.BUFFER_THRESHOLD?Math.min(this.MAX_BUFFER_SIZE,this.bufferCapacity+this.SEGMENT_BUFFER_SIZE):Math.max(this.DEFAULT_BUFFER_SIZE,this.bufferCapacity-this.SEGMENT_BUFFER_SIZE)),this.setBufferCapacity(e)},setBufferCapacity:function(e){e!==this.bufferCapacity&&(i.debug("setBufferCapacity: adjust buffer capacity",e),this.video.setMaxBufferSize(e/1e3),this.bufferCapacity=e)},onLoadError:function(){i.debug("onLoadError: Fragment Load Aborted"),this.setBufferCapacity(this.DEFAULT_BUFFER_SIZE)},disable:function(){this.setBufferCapacity(this.DISABLED_MAX_BUFFER_SIZE),this.video.off(r.FRAGMENT_LOADED,this.checkBufferSize),this.video.off(r.FRAGMENT_LOAD_ERROR,this.onLoadError)}},e.exports=o},function(e,t,n){var i=n(2).getLogger("video-rendition-ext"),r=n(63),a=n(1),o=function(e){a.bindAll(this,"onFragmentLoaded","onManifestLoaded"),this.video=e,this.video.on(r.FRAGMENT_LOADED,this.onFragmentLoaded),this.video.on(r.MANIFEST_LOADED,this.onManifestLoaded)};o.prototype={MAX_BANDWIDTH_UTILIZATION:.8,avgBandwidth:-1,onFragmentLoaded:function(){var e=this.video.getBandwidthAvg();e>0&&(this.avgBandwidth=e,i.debug("onFragmentLoaded avgBandwidth",this.avgBandwidth))},onManifestLoaded:function(){var e=this.video.getRenditions(),t=this.video.$el.width(),n=Number.MAX_VALUE,r=0,o=0,s=this.video.hlsSettings.startingRenditionCap;if(a.each(e,function(e,i){e.width>=t&&e.width<n&&e.bitrate<s&&(n=e.width,r=e.bitrate,o=i),e.width<=n&&e.bitrate>r&&e.bitrate<s&&(r=e.bitrate,o=i)},this),this.avgBandwidth>0){var l=this.avgBandwidth*this.MAX_BANDWIDTH_UTILIZATION;i.debug("onManifestLoaded calculate rendition level with bandwidth (kbps)",Math.round(this.avgBandwidth)),r=0,o=0,a.each(e,function(e,t){e.bitrate/1024<=l&&e.bitrate>r&&(r=e.bitrate,o=t)},this)}i.debug("setStartingLevel",o),this.video.setStartingLevel(o)}},e.exports=o},function(e,t,n){var i=n(2).getLogger("save-and-resume-manager"),r=n(1),a=n(22),o=n(6),s=n(41),l=n(56);e.exports=function(e){var t={initialize:function(){i.info("initialize"),r.bindAll(this,"onPlayheadUpdate","onMediaEnd","onPlaylistComplete","destroy");var t=e.configModel.config;return!e.playlistModel.isSeamlessEnabled&&t.saveAndResumeEnabled&&t.autoSaveInterval>0&&t.autoSaveMaxItems>0?(this.restoreSavedPosition(),this.listenTo(e,o.PLAYHEAD_UPDATE,this.onPlayheadUpdate),this.listenTo(e,o.MEDIA_END,this.onMediaEnd),this.listenTo(e,o.SEAMLESS_MODE,this.destroy)):i.info('"save and resume" feature disabled'),this.listenTo(e,o.PLAYLIST_COMPLETE,this.onPlaylistComplete),this},restoreSavedPosition:function(){var t,n,a=e.configModel.config.uri;if(e.configModel.config.remoteSaveAndResumeEnabled&&i.warn("remote saveAndResume is not yet available, default to local"),t=s.get(s.KEYS.WATCH_HISTORY),n=r.find(t,function(e){return e.uri===a}),i.debug("restoreSavedPosition",t,n),r.isObject(n)){var d=e.configModel.runTimeConfig;e.trigger(o.POSITION_RESUMED,n),void 0!==n.segmentId?(i.info("resume segment",n.segmentId),this.listenTo(e,o.PLAYLIST_READY,function(){var t=l.getIndexByMgid(e,n.segmentId);e.playlistModel.currentIndex=t,d.startTime=n.time}),d.startSegmentId=n.segmentId):(i.info("resume index",n.idx),d.startIndex=n.idx),n.time&&(i.info("resume time",n.time),d.startTime=n.time)}},onPlayheadUpdate:function(t){var n=e.absolutePlayhead,r=e.configModel.config.autoSaveInterval;i.trace("onPlayheadUpdate",t.data,n),Math.abs(n-(this.lastSavedPlayhead||0))>r&&this.savePosition(e.currentMetadata.rss.guid,e.absolutePlayhead)},savePosition:function(t,n){var n=Math.floor(10*n)/10,r=this.removeSavedPosition(!0);i.debug("savePosition",r,t,n),r.push({uri:e.configModel.config.uri,segmentId:t,time:n});var a=r.length-e.configModel.config.autoSaveMaxItems;r=r.slice(a),s.set(s.KEYS.WATCH_HISTORY,r),this.lastSavedPlayhead=n},removeSavedPosition:function(t){var n=e.configModel.config.uri,a=s.get(s.KEYS.WATCH_HISTORY),o=r.filter(a,function(e){return e.uri!==n});return i.trace("removeSavedPosition",o),t?o:void s.set(s.KEYS.WATCH_HISTORY,o)},onMediaEnd:function(){var t,n=e.playbackModel,r=0;n.queuedStartTime?(r=n.queuedStartTime,t=l.getIndexByPlayhead(e,n.queuedStartTime)):l.hasNext(e)&&(t=e.playlistModel.currentIndex+1),i.debug("onMediaEnd",t,r),void 0!==t&&this.savePosition(l.getItemAt(e,t).rss.guid,r)},onPlaylistComplete:function(){i.debug("onPlaylistComplete"),this.removeSavedPosition()},destroy:function(){i.debug("destroy"),this.stopListening(e,o.PLAYHEAD_UPDATE,this.onPlayheadUpdate),this.stopListening(e,o.MEDIA_END,this.onMediaEnd),this.stopListening(e,o.PLAYLIST_COMPLETE,this.onPlaylistComplete),this.stopListening(e,o.SEAMLESS_MODE,this.destroy)}};return r.extend(t,a.Events).initialize()}},function(e,t,n){var i=n(2).getLogger("interstitial-manager"),r=n(1),a=n(5),o=n(6),s=n(81),l={onConfigLoaded:function(e){var t=e.configModel.config;!e.isMobilePlatform&&t.useInterstitial&&t.interstitialUrl&&(this.addEventListeners(e),this.setUpInterstitial(e))},addEventListeners:function(e){e.on(o.MEDIA_START,this.hideInterstitial),e.on(o.REPLAY_REQUEST,this.onReplay),e.on(o.BENTO_AD_STARTED,this.hideInterstitial),e.on(o.ERROR,this.hideInterstitial),e.on(o.PLAYER_DESTROY,this.destroy)},setUpInterstitial:function(e){var t,n=e.configModel.config;i.debug("prepare interstitial"),e.interstitialModel.$element=a('<video muted class="edge-interstitial"></video>'),t=e.interstitialModel.$element.get(0),t.src=n.interstitialUrl,t.loop=n.loopInterstitial,e.$el.append(e.interstitialModel.$element),e.interstitialModel.$element.on("error",e,this.onError),t.load()},onError:function(e){var t=e.data;i.warn("Disabling interstitial due to an error",e),t.interstitialModel.loadingError=!0,this.hideInterstitial({target:t})},onReplay:function(e){var t=e.target;t.interstitialModel.hasBeenShown=!1,this.showInterstitial(t)},showInterstitial:function(e){e.interstitialModel.loadingError||!e.interstitialModel.$element||e.interstitialModel.hasBeenShown||(i.debug("show"),e.interstitialModel.hasBeenShown=!0,e.interstitialModel.$element.show(),e.$el.addClass(s.INTERSTITIAL_ACTIVE),e.interstitialModel.$element.get(0).play())},hideInterstitial:function(e){var t=e.target;i.debug("hide"),t.$el.removeClass(s.INTERSTITIAL_ACTIVE),r.delay(this.stopInterstitial,600,t)},stopInterstitial:function(e){var t=e.interstitialModel.$element.get(0);i.debug("stop"),t.pause(),e.interstitialModel.$element.hide(),e.interstitialModel.$element.off("error",this.onError)},destroy:function(e){var t=e.target;t.interstitialModel.$element.remove(),t.interstitialModel.$element=null}};r.bindAll(l,"hideInterstitial","stopInterstitial","onError","onReplay","destroy"),e.exports=l},function(e,t){e.exports={PLATFORM_DESKTOP:"edge-desktop-platform",PLATFORM_NATIVE:"edge-native-platform",PLATFORM_INTERNATIONAL:"edge-international-platform",PLATFORM_EMBED:"edge-embed-platform",PLATFORM_LIVE:"edge-live-platform",PLATFORM_DVR:"edge-dvr-platform",FULLSCREEN_LIMITED:"edge-fullscreen-limited-state",FULLSCREEN_ACTIVE:"edge-fullscreen-active-state",ZOOMED_IN_VIEWPORT:"edge-zoomed-in-viewport-state",ENDSLATE_ACTIVE:"edge-endslate-active-state",INTERSTITIAL_ACTIVE:"edge-interstitial-active-state"}},function(e,t,n){var i=n(2).getLogger("playback-manager"),r=n(5),a=n(6),o=n(14),s=n(52),l=n(83),d=n(56),u=n(86),c=n(85),h=n(62),f=n(3);e.exports={NAME:"PlaybackManager",SEEK_TO_MEDIA_END_THRESHOLD:1,SEEK_TO_PLAYLIST_END_THRESHOLD:7,onConfigLoaded:function(e){this.addEventListeners(e),u.checkPageVisibilityRequirements(e),this.setStartTime(e)},addEventListeners:function(e){e.on(a.MEDIA_END,this.onMediaEnd),e.on(a.STATE_CHANGE,this.onStateChange.bind(this)),e.on(a.BENTO_WAITING_FOR_AD_BREAK,this.onIsTimeforAnAd),e.on(a.BENTO_AD_STARTED,this.onAdStarted),e.on(a.INDEX_CHANGE,this.onIndexChange)},onIndexChange:function(e){var t=e.target;t.playbackModel.updateDuration=!0},playIndex:function(e,t){i.info("playIndex: "+t);var n=e.adsModel.isAdBreak,r=d.setIndex(e,t);n||(r?(e.playbackModel.renderer.pause(),e.playbackModel.skipPostRoll=!0,e.playbackModel.renderer.ended(),e.playbackModel.currentSrc=null):this.play(e))},play:function(e){return i.info("play"),e.playlistCompleted&&(e.playlistCompleted=!1,e.trigger(a.REPLAY_REQUEST)),e.module(c).canWatchVideo(e)?!e.adsModel.isAdBreak&&this.isPaused(e)?(i.info("play: Resuming"),e.performanceManager.userResume(),void this.playItem(e)):e.adsModel.skipAdRequests?(e.performanceManager.adBreakSkipped(),void this.playItem(e)):void s.onPlayRequest(e):void e.module(l).verify()},replay:function(e){switch(e.playbackModel.currentSrc=null,e.configModel.config.contentType){case"episode":e.playlistModel.currentIndex>0?this.playIndex(e,0):(e.playbackModel.renderer.load(),this.play(e));break;case"playlist":e.playlistMetadata.items.length>1?e.playlistModel.currentIndex>0?this.playIndex(e,0):(e.playbackModel.renderer.load(),this.play(e)):(e.playbackModel.renderer.seek(0),this.play(e));break;default:e.playbackModel.renderer.seek(0),this.play(e)}},pause:function(e){i.info("pause"),e.adsModel.isAdBreak?s.pause(e):(e.performanceManager.userPause(),e.playbackModel.renderer.pause())},isContentPlaying:function(e){return!e.adsModel.isAdBreak&&e.state==o.PLAYING},isPaused:function(e){return e.playbackModel.renderer.isPaused()&&!e.playbackModel.mediaEnded},preloadContent:function(e){if(e.adsModel.isAdBreak){var t=this.getStartTime(e);i.debug("preloadContent",e.playlistModel.currentIndex,t),e.playlistModel.currentItem.src!==e.playbackModel.currentSrc&&d.preloadItem(e,e.playlistModel.currentIndex).then(function(n){e.performanceManager.preloadContentRequest(),e.performanceManager.setContentSource(),e.playbackModel.currentSrc=n.src,e.playbackModel.renderer.preloadContent(n.src,t)})}},playItem:function(e){i.info("playItem",e.id,e.playlistModel.currentItem),e.performanceManager.contentPlayRequested(),e.playbackModel.mediaEnded=!1;var t=e.playlistModel.currentIndex,n=this.getStartTime(e);d.loadItem(e,t).then(function(t){i.debug("item ready, play!",t),e.playbackModel.pausedBeforeAdBreak?(e.playbackModel.pausedBeforeAdBreak=!1,e.playbackModel.renderer.onStateChange({type:o.PAUSED})):(e.currentMetadata=r.extend(!0,{},t),h.play(e,n))})},setPlayhead:function(e,t){(!f.isNumber(t)||e.currentMetadata.isAd)&&(t=0),e.playhead=Math.round(1e3*t)/1e3,e.absolutePlayhead=Math.round(1e3*this.getPlayhead(e))/1e3},getPlayhead:function(e){return e.playhead||0},isSeekedToEndOfCurrentMedia:function(e,t){return t+this.SEEK_TO_MEDIA_END_THRESHOLD>e.playlistModel.currentItem.duration},isSeekedToEndOfPlaylist:function(e){return!d.hasNext(e)},seek:function(e,t){i.info("seek",t),this.isSeekedToEndOfCurrentMedia(e,t)?(this.isSeekedToEndOfPlaylist(e,t)&&(i.info("seek to end requested"),e.playbackModel.seekedToEnd=!0,e.playbackModel.renderer.pause()),e.playbackModel.renderer.ended()):(s.onSeek(e,t),h.seek(e,t))},goLive:function(e){e.isLive()?h.goLive(e):i.warn("goLive requested on non-live video")},getStartTime:function(e){var t=e.playbackModel.queuedStartTime;return i.trace("getStartTime",t),f.isNumber(t)?(e.playbackModel.queuedStartTime=NaN,t):0},setStartTime:function(e,t){if(void 0===t){if(!(e.configModel.runTimeConfig.startTime>0))return;t=e.configModel.runTimeConfig.startTime}i.debug("setStartTime",t),e.playbackModel.queuedStartTime=t},onMediaEnd:function(e){i.info("onMediaEnd");var t=e.target;t.performanceManager.onMediaEnd(),t.playbackModel.mediaEnded=!0,t.playlistModel.currentPlayingIndex=NaN,s.onMediaEnd(t)},endPlaylist:function(e){i.info("endPlaylist"),e.playbackModel.seekedToEnd=!1,d.setIndex(e,e.configModel.config.startIndex),e.playlistCompleted=!0,e.trigger(a.PLAYLIST_COMPLETE)},playNext:function(e){i.info("playNext"),d.next(e)?this.play(e):this.endPlaylist(e)},onStateChange:function(e){i.info("onStateChange event ",e.data);var t=e.target,n=e.data;(n===o.INITIALIZING||n===o.SEEKED)&&this.setPlayhead(t,t.playbackModel.renderer.seekToPosition),n===o.SEEKING&&(t.seekStartPlayhead=t.playbackModel.renderer.seekStartPlayhead,this.setPlayhead(t,t.playbackModel.renderer.seekStartPlayhead)),e.data===o.SEEKED&&(t.seekStartPlayhead=null,this.setPlayhead(t,t.playbackModel.renderer.seekToPosition)),n===o.PLAYING&&(i.info("onStateChange video ",t.playbackModel.renderer),this.setPlayhead(t,t.playbackModel.renderer.playhead),t.playlistModel.currentIndex+1<t.playlistMetadata.items.length?(i.info("preloading next mediaGen in playlist"),d.preloadItem(t,t.playlistModel.currentIndex+1)):i.info("last item in playlist"))},onIsTimeforAnAd:function(e){var t=e.target;t.playbackModel.renderer.pause()},onAdStarted:function(e){var t=e.target;t.configModel.config.useNativeControls&&t.contentElement.webkitDisplayingFullscreen&&t.contentElement.webkitExitFullscreen()}}},function(e,t,n){var i=n(2).getLogger("age-gate-manager"),r=n(1),a=n(5),o=n(84),s=n(85),l=n(3);e.exports=o.extend({DEFAULT_URL_PATH:"//media.mtvnservices.com/edge/age-gate/age-gate-",initialize:function(){r.bindAll(this,"onVerification","prepareAgeGate")},verify:function(){if(this.AgeGate)return void this.showAgeGate();var e=this.DEFAULT_URL_PATH+EdgePlayer.defaultAgeGateVersion+".min.js";l.getExternalModule(e,this.prepareAgeGate)},prepareAgeGate:function(e){i.info("AgeGate Library loaded"),this.AgeGate=e(r,a,window.Backbone),this.showAgeGate()},showAgeGate:function(){var e=this.ageGate=new this.AgeGate({requiredAge:this.player.configModel.config.requiredAge,isTooYoung:s.hasFailedAgeVerification(this.player)});i.info("Show age gate, options",e.options),e.$el.css({position:"absolute"}),this.player.$el.append(e.$el),this.listenTo(e,this.AgeGate.Events.CHECKED,this.onVerification)},onVerification:function(e){var t=e.data,n=this.options.player;s.setAgeVerified(t),i.info(t?"Verified, play video.":"Too young."),t&&(this.destroy(),n.play())},destroy:function(){this.ageGate&&this.ageGate.remove()}},{NAME:"AgeGateManager"})},function(e,t,n){var i=n(1),r=n(22),a=function(e){this.options=e||{},this.player=e.player,this.config=e.player.configModel.config,this.controller=e.controller,this.module=this.player.module};i.extend(a.prototype,r.Events,{initialize:function(){},destroy:function(){this.stopListening()}}),a.extend=r.Model.extend,e.exports=a},function(e,t,n){var i=n(2).getLogger("age-verification-manager"),r=n(1),a=n(41),o=n(3);e.exports={canWatchVideo:function(e){return o.isInteger(e.configModel.config.requiredAge)||r.isString(e.playlistModel.currentItem.rss.rating)?a.getExpiringValue(a.KEYS.VERIFIED_AGE)===!0?(i.info("User has already verified age."),!0):(i.info("Age required or metadata rating defined, user not verified."),!1):(i.info("No required age and no rating for current item."),!0)},setAgeVerified:function(e){a.saveExpiringValue(a.KEYS.VERIFIED_AGE,e)},hasFailedAgeVerification:function(){return a.getExpiringValue(a.KEYS.VERIFIED_AGE)===!1}}},function(e,t,n){var i=n(2).getLogger("page-visibility-manager"),r=n(5),a=n(6),o=n(14);e.exports={NAME:"PageVisibiltyManager",checkPageVisibilityRequirements:function(e){this.shouldPageVisibilityAPICasesBeEnabled()&&this.initPageVisibilityAPI(e)},shouldPageVisibilityAPICasesBeEnabled:function(){var e=!1;if(r.os&&(r.os.phone||r.os.tablet)){e=!0;var t=navigator.userAgent.match(/^.*(iPhone).*(OS\s[0-9]).*(CriOS|Version)\/[.0-9]*\sMobile.*$/i);t&&t[2]&&"OS-7"===t[2].replace(/\s+/g,"-")&&(e=!1)}return e},initPageVisibilityAPI:function(e){var t,n;"undefined"!=typeof document.hidden?(t="hidden",n="visibilitychange"):"undefined"!=typeof document.mozHidden?(t="mozHidden",n="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(t="msHidden",n="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),i.info("initPageVisibilityAPI",t,n),"undefined"==typeof document.addEventListener||"undefined"==typeof document[t]?i.info("This feature requires a browser that supports the Page Visibility API."):document.addEventListener(n,this.onPageVisibilityAPIChange.bind(this,e),!1),e.playbackModel.visibilityAPIHidden=t},onPageVisibilityAPIChange:function(e){i.info("handlePageVisibilityAPIChange",document[e.playbackModel.visibilityAPIHidden]),document[e.playbackModel.visibilityAPIHidden]&&0!==e.playbackModel.renderer.el.currentTime&&(e.playbackModel.focusCurrentTime=e.playbackModel.renderer.el.currentTime),e.playbackModel.renderer.pause(),e.trigger(a.VISIBILITY_CHANGE,o.PAUSED)}}},function(e,t,n){var i=n(2).getLogger("segmented-feed-episode-playback-manager"),r=n(1),a=n(3),o=n(14),s=n(82),l=n(56);e.exports=r.extend({},s,{NAME:"SegmentedFullEpisodePlaybackManager",getPlayhead:function(e){return this.getPlayheadOffset(e)+s.getPlayhead.call(this,e)},getPlayheadOffset:function(e){return this.getDurationByIndex(e,e.playlistModel.currentIndex)},getDurationByIndex:function(e,t){var n=e.playlistMetadata.items;return a.isInteger(t)&&(n=r.first(n,t)),n.reduce(function(e,t){return e+t.duration},0)},getFullDuration:function(e){return this.getDurationByIndex(e,null)},isSeekedToEndOfPlaylist:function(e,t){var n=this.getFullDuration(e);return!!n&&t+this.SEEK_TO_PLAYLIST_END_THRESHOLD>n-this.getPlayheadOffset(e)},isCrossSegementSeek:function(e,t){return(0>t||t>e.playlistModel.currentItem.duration)&&!this.isSeekedToEndOfPlaylist(e,t)},seek:function(e,t){i.info("seek",t);var n=t-this.getPlayheadOffset(e);this.isCrossSegementSeek(e,n)?(void 0===e.playbackModel.wasPausedBeforeCrossSegmentSeek&&(e.playbackModel.wasPausedBeforeCrossSegmentSeek=e.playbackModel.renderer.isPaused()),i.info("seek seeking across episodes, pause after seek:",e.playbackModel.wasPausedBeforeCrossSegmentSeek),this.setStartTime(e,t),e.playbackModel.renderer.ended()):s.seek.call(this,e,n)},getStartTime:function(e){var t=s.getStartTime.call(this,e);return t&&(t=Math.abs(t-this.getPlayheadOffset(e))),i.trace("getStartTime",t),t},playNext:function(e){if(i.info("playNext",e.playbackModel.queuedStartTime),a.isNumber(e.playbackModel.queuedStartTime)){var t=l.getIndexByPlayhead(e,e.playbackModel.queuedStartTime);l.setIndex(e,t),i.info("Begin cycle for "+t),this.play(e)}else s.playNext.call(this,e)},onStateChange:function(e){i.info("onStateChange event ",e.data);var t=e.target,n=e.data;s.onStateChange.apply(this,arguments),(n===o.SEEKED||"canplay"===n)&&(t.playbackModel.wasPausedBeforeCrossSegmentSeek&&(i.info("seek across segment with pause state: force pause"),t.playbackModel.renderer.pause()),t.playbackModel.wasPausedBeforeCrossSegmentSeek=void 0)}})},function(e,t){e.exports={getInstance:function(){return{defaultConfig:{adTimeouts:{softAdFailover:!0},autoPlay:!1,autoSaveInterval:10,autoSaveMaxItems:15,chromeless:!1,endSlateType:"replay",flashHLSEnabled:!1,jsHLSEnabledAndroid:!1,httpstreaming:{startingRenditionCap:1e6},jsHLSEnabled:!0,mediaGenAuthCheck:!1,scoundrelMode:!1,share:[],splitTests:[],width:640,height:360,useMediaGenFromFeed:!1,useSegmentedScrubber:!1,useQuickTimePlayerOnIphone:!1,startIndex:0,saveAndResumeEnabled:!1,remoteSaveAndResumeEnabled:!1,simultaneousPlaybackEnabled:!1,updatedHlsDelivery:!1},pageConfig:{},pmtConfig:{},runTimeConfig:{},config:{},configReady:!1,configHasLoaded:!1,configUrl:void 0}}}},function(e,t,n){var i=n(1),r=n(3);e.exports={normalize:function(e){if(!e)return{};var t=e.flashVars;return t&&(e.sid=t.sid||t.ssid),i.each(["width","height"],function(t){var n,r=e[t];i.isString(r)&&-1!==r.indexOf("%")||(n=parseInt(r,10),isNaN(n)?delete e[t]:e[t]=n)}),i.omit(e,function(e){return i.isUndefined(e)||i.isNull(e)})},getBoolean:function(e){return i.isString(e)&&("true"===e||"false"===e)&&(e="true"===e),e},getDataAttr:function(e,t){return e.data(t)},getStyleAttr:function(e,t){var n=e.style[t];return i.isString(n)&&-1!==n.indexOf("%")?n:parseInt(n,10)},getObjectFromNameValue:function(e,t){if(i.isString(t)&&(t=[t]),i.some(t,function(n){var i=this.getDataAttr(e,n);return i?(t=i,!0):void 0},this),i.isString(t)){var n={};return i.each(t.split("&"),function(e){e=e.split("="),e&&2===e.length&&(n[e[0]]=this.getBoolean(e[1]))}),n}},getAutoPlay:function(e){return i.isUndefined(e)||i.isNull(e)?void 0:""===e?!0:i.isBoolean(e)?e:"true"===e},getConfigFromElement:function(e){var t,n=e[0];return t={},void 0!==this.getDataAttr(e,"contenturi")&&(t.uri=this.getDataAttr(e,"contenturi")),void 0!==this.getAutoPlay(this.getDataAttr(e,"autoPlay"))&&(t.autoPlay=this.getAutoPlay(this.getDataAttr(e,"autoPlay"))),r.isInteger(this.getStyleAttr(n,"height"))&&(t.height=this.getStyleAttr(n,"height")),r.isInteger(this.getStyleAttr(n,"width"))&&(t.width=this.getStyleAttr(n,"width")),t}}},function(e,t,n){var i=n(2).getLogger("placeholder-manager"),r=n(1),a=n(84),o=n(6),s=n(14);e.exports=a.extend({SELECTOR:".edge-placeholder",initialize:function(){r.bindAll(this,"click","show","hide"),this.player.on(o.STATE_CHANGE+":"+s.PLAYING,this.hide);var e=this.player.$el;this.$container=e.find(this.SELECTOR),this.$container.append("<div class='edge-placeholder-image'></div><div class='edge-placeholder-button'></div>"),this.$container.hide(),this.$container.on("click",this.click)},hide:function(){this.$container.hide()},show:function(e){"string"==typeof e&&this.$container.find(".edge-placeholder-image").css("background-image","url('"+e+"')"),this.$container.show()},click:function(e){e.preventDefault(),this.$container.hide(),i.info("placeholder click, play the video."),this.trigger(o.PLACEHOLDER_PLAY_REQUESTED)},destroy:function(){this.player.$el.html(this.originalHTML),this.$container.off("click"),this.player.off(o.PLAYLIST_COMPLETE,this.create)}},{NAME:"PlaceholderManager"})},function(e,t,n){var i=n(2).getLogger("dialog-manager"),r=n(1),a=n(5),o=n(84),s=n(6),l=n(71),d=n(14),u=n(12),c=n(92),h=n(28);e.exports=function(){return o.extend({name:"DialogManager",initialize:function(){r.bindAll(this,"onRemove","showDeferredSlates","onPlayerError","onStateChange"),this.isDeferred=!1,this.player.on(s.ERROR,this.onPlayerError),this.player.on(s.STATE_CHANGE,this.onStateChange)},deferErrorSlates:function(){this.isDeferred=!0,this.player.on(s.PLAY_REQUESTED,this.showDeferredSlates)},showDeferredSlates:function(){this.isDeferred=!1,this.queuedEvent&&this.onPlayerError(this.queuedEvent)},onPlayerError:function(e){if(this.isDeferred)return void(this.queuedEvent=e);var t=e.data,n=t.message,r=this.player.configModel.config.feed;void 0===r&&t.phase===h.CONFIG&&void 0!==t.receivedData&&(r=t.receivedData.feed);
var o={playId:t.playId,image:t.imageMessage||r&&r.image&&r.image.url};if(i.error(t.code,n,e),t.code===u.PLAYBACK_ERROR)n=l.PLAYBACK_ERROR;else if(t.code===u.PLUGIN_ERROR){if(!a.browser.ie)return;n+='<br /><a href="https://get.adobe.com/flashplayer/" target="_blank">click here to download</a>'}else t.code!==u.CONFIG_ERROR_MESSAGE&&t.code!==u.MEDIAGEN_ERROR_MESSAGE&&(n=l.SERVICE_UNAVAILABLE);t.imageMessage||(o.message=n),this.showMessage(o)},showMessage:function(e){this.dialog&&this.dialog.remove();var t=this.dialog=new c(e);this.listenTo(t,c.Events.REMOVE,this.onRemove),t.$el.appendTo(this.player.$el)},onStateChange:function(e){e.data===d.PLAYING&&this.dialog&&this.dialog.remove()},onRemove:function(){delete this.dialog},destroy:function(){this.stopListening(),this.dialog&&(this.dialog.remove(),delete this.dialog)}},{NAME:"DialogManager"})}()},function(e,t,n){var i=n(1),r=n(5),a=n(22),o=n(93),s=e.exports=a.View.extend({initialize:function(e){this.options=e,i.bindAll(this,"onclose"),this.render()},render:function(){var e=this.options||{},t=e.template||this.setTemplate(e),n=this.$el=r(t);return n.find(".edge-dialog-close").click(this.onclose),this.$message=this.$(".edge-dialog-message"),i.isElement(e.message)&&(this.$message.empty(),this.setMessage(e.message)),n},setTemplate:function(e){return e.title||"",e.message||"",o(e)},setTitle:function(e){this.$(".edge-dialog-title").html(e)},setMessage:function(e){i.isString(e)?this.$message.html(e):i.isElement(e)?this.$message.append(e):this.$message.empty()},onclose:function(e){return e.preventDefault(),this.trigger(s.Events.REMOVE,{type:s.Events.REMOVE}),this.remove(),!1}},{Events:{REMOVE:"remove"},version:"2.5.3",build:"Tue Oct 17 2017 15:04:55 GMT-0400 (EDT)"})},function(e,t){e.exports=function(e){var t,n="",i=(Array.prototype.join,"edge-dialog");return e.message&&e.image&&(i+=" edge-dialog-default-image"),n+='\n<div class="'+(null==(t=i)?"":t)+'" ',e.image&&(n+=' style="background-image:url('+(null==(t=e.image)?"":t)+')"'),n+='>\n	<div class="edge-dialog-container">\n		',e.message&&(n+='\n			<div class="edge-dialog-error-icon"></div>\n			<div class="edge-dialog-message-container">\n				<div class="edge-dialog-title">'+(null==(t=e.title)?"":t)+'</div>\n				<div class="edge-dialog-message">\n					'+(null==(t=e.message)?"":t)+"\n				</div>\n			</div>\n		"),n+="\n		",e.closeable&&(n+='\n			<a href="#" class="edge-dialog-close">x</a>\n		'),n+="\n	</div>\n	",e.playId&&(n+='\n		<!-- img class="edge-dialog-qr-code" src="https://chart.googleapis.com/chart?chl='+(null==(t=e.playId)?"":t)+'&chs=65x65&cht=qr&chld=L|0" /-->\n		<div class="edge-dialog-play-id">'+(null==(t=e.playId)?"":t)+"</div>\n	"),n+="\n</div>\n"}},function(e,t,n){var i=n(1),r=n(6),a=n(14);e.exports={fixEventName:function(e){return e&&0===e.indexOf("on")?"onUIStateChange"===e?"uiStateChange":e.charAt(2).toLowerCase()+e.substr(3):e},checkEventName:function(e){if(!i.isString(e))throw"[EdgePlayer "+EdgePlayer.version+"] trying to register 'undefined' as an event name.";var t;if(-1!==e.indexOf(":")){var n=e.split(":");e=n[0],t=n[1]}if(e===r.STATE_CHANGE&&t&&!i.contains(a,t))throw"[EdgePlayer "+EdgePlayer.version+'] event "'+e+'" doesn\'t have state "'+t+'"';if(!this._checkEventName(e,r))throw"[EdgePlayer "+EdgePlayer.version+"] event:"+e+" doesn't exist."},_checkEventName:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(i.isObject(r)&&this._checkEventName(e,r)||r===e)return!0}return!1}}},function(e,t,n){var i=n(1),r=n(22),a=function(e){var t={},n=function(n,a){if(i.isObject(n)&&(a=n,a.NAME||(a.NAME=i.uniqueId("PrivateModule")),n=a.NAME),t[n])return t[n];if(!a)throw""+n+" module isn't registered yet.";var o=i.extend(i.clone(e),{moduleId:n}),s=t[n]=i.isFunction(a)?new a(o):function(){return a.options&&(a.options.moduleId=n),a}();return i.isFunction(s.initialize)&&(s instanceof r.View||s.initialize(o)),s};return n.remove=function(e){i.isObject(e)?e.NAME?delete t[e.NAME]:t=i.omit(t,e.options.moduleId):i.isString(e)&&delete t[e]},n.all=function(){return t},n};e.exports=a},function(e,t,n){function i(e){return""!==a&&(o&&(e=e.replace("ullscreen","ullScreen"),e=e.replace("exitFull","cancelFull")),e=a+e.charAt(0).toUpperCase()+e.slice(1)),e}function r(){for(var e,t=0;t<m.length;t++)for(var n=0;2>n;n++)if(a=m[t],o=!!n,e=document[i("fullscreenEnabled")],void 0!==e)return e;return!1}var a,o,s,l,d,u,c=n(1),h=n(5),f=n(84),p=n(6),g=n(81),m=["","webkit","moz","ms"];e.exports=f.extend({initialize:function(){c.bindAll(this,"onFullscreenChange","onTouch","updateSize","updateFullscreenEnabled","isZoomedIn"),r()?(this.isNativeFullscreen=!0,s=i("requestFullscreen"),l=i("fullscreenElement"),d=i("exitFullscreen"),u=i("fullscreenChange"),"ms"===a&&(u="MSFullscreenChange"),h(document).on(u+" "+u.toLowerCase(),this.onFullscreenChange)):(this.player.$el.addClass(g.FULLSCREEN_LIMITED),h.os.ios&&(h(document).on("gestureend",this.updateFullscreenEnabled),this.updateFullscreenEnabled()))},updateSize:function(){var e;e=this.player.isFullScreen?{width:"100%",height:"100%"}:c.pick(this.player.config,"width","height"),this.player.$el.css(e)},onFullscreenChange:function(e){this.isNativeFullscreen?e=document[l]===this.player.$el[0]:(this.player.$el.toggleClass("edge-fullscreen-fixed",e),e?this.player.$el.on("touchstart touchmove",this.onTouch):this.offEvents()),this.player.$el.toggleClass(g.FULLSCREEN_ACTIVE,e),this.player.isFullScreen=e,this.updateSize(),this.player.trigger(p.FULL_SCREEN_CHANGE,e)},onTouch:function(e){var t,n,i=e.touches[0];"touchstart"===e.type?(this.xStart=i.screenX,this.yStart=i.screenY):"touchmove"===e.type&&(t=Math.abs(i.screenX-this.xStart),n=Math.abs(i.screenY-this.yStart),n>t&&e.preventDefault())},updateFullscreenEnabled:function(){this.isZoomedIn()?this.player.$el.addClass(g.ZOOMED_IN_VIEWPORT):this.player.$el.removeClass(g.ZOOMED_IN_VIEWPORT)},isZoomedIn:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return window.innerWidth<e||window.innerHeight<t?!0:!1},goFullScreen:function(){this.isNativeFullscreen?this.player.$el[0][s]():this.onFullscreenChange(!0)},exitFullScreen:function(){this.isNativeFullscreen?document[d]():this.onFullscreenChange(!1)},offEvents:function(){this.player.$el.off("touchstart touchmove",this.onTouch)},destroy:function(){this.isNativeFullscreen?h(document).off(u+" "+u.toLowerCase(),this.onFullscreenChange):this.offEvents()}},{NAME:"FullScreenManager"})},function(e,t,n){var i=n(2).getLogger("cea608-manager"),r=n(1),a=n(5),o=n(84),s=n(41),l=n(6);e.exports=o.extend({initialize:function(){if(this.TOTAL_NUMBER_OF_CC_ROWS=15,this.isSupported()){r.bindAll(this,"setCcCommand","setCcData","injectCea608Cue","applyCommandStyle","onMediaEnd"),this.ccBuffer=this.initializeCcBuffer(this.TOTAL_NUMBER_OF_CC_ROWS),this.isBuffering=!1,this.curPreambleRow=-1,this.curPreamCommand={},this.curMidRowCommand={},this.tabOffset={},this.rollup=2,this.cssStyles={},this.player.on(l.CC,this.injectCea608Cue),this.player.on(l.MEDIA_END,this.onMediaEnd),this.cea608CustomTracksSelector=".edge-608-tracks",this.$Cea608CustomContainer=this.player.$el.find(".edge-608-container"),this.$Cea608CustomContainer.append('<div class="edge-608-tracks"></div>');for(var e=1;e<=this.TOTAL_NUMBER_OF_CC_ROWS;e++){var t=this.renderRowDiv(e);t.append("<span></span>"),this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).append(t)}this.onToggleCc(),this.COMMANDS={PREAMBLE:"preamble",MID_ROW:"midrow",START_BUFFER:"resume caption loading",BACKSPACE:"backspace",DELETE_ROW:"delete to end of row",ROLL_UP_2:"roll-up captions 2-rows",ROLL_UP_3:"roll-up captions 3-rows",ROLL_UP_4:"roll-up captions 4-rows",RESUME_DIRECT:"resume direct captioning",TEXT_RESTART:"text restart",RESUME_DISPLAY:"resume text display",ERASE_DISPLAY:"erase displayed memory",CARRIAGE_RETURN:"carriage return",CLEAR_BUFFER:"erase non displayed memory",DISPLAY_BUFFER:"end of caption",TAB_OFFSET_1:"tab offset 1",TAB_OFFSET_2:"tab offset 2",TAB_OFFSET_3:"tab offset 3"}}},isSupported:function(){return this.player.configModel.config.flashHLSEnabled&&this.player.isLive()},renderRowDiv:function(e){return a("<div>").addClass("ccrow row_"+e).css("top","6"*e+"%")},initializeCcBuffer:function(e){var t=[];t.length=e;for(var n=0;e>n;n++)t[n]="";return t},clearCcBuffer:function(e){return e=e.map(function(){return""})},injectCea608Cue:function(e){e.data.isCommand?this.setCcCommand(e.data):this.setCcData(e.data)},setCcData:function(e){if(this.curPreambleRow!==e.row&&(this.curPreambleRow=e.row),this.isBuffering)void 0===this.ccBuffer[e.row-1]&&(this.ccBuffer[e.row-1]=""),this.ccBuffer[this.curPreambleRow-1]+=e.captionText;else{var t=this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+e.row).find("span");void 0!==this.curMidRowCommand[e.row]&&(this.applyCommandStyle(t,this.curMidRowCommand[e.row]),this.curMidRowCommand[e.row]=void 0),void 0!==this.curPreamCommand[e.row]&&(this.applyCommandStyle(t,this.curPreamCommand[e.row]),this.curPreamCommand[e.row]=void 0),t.append(e.captionText)}},setCcCommand:function(e){switch(e.captionText){case this.COMMANDS.START_BUFFER:this.isBuffering=!0;break;case this.COMMANDS.DISPLAY_BUFFER:for(var t=0;t<this.TOTAL_NUMBER_OF_CC_ROWS;t++){var n=this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+(t+1)).find("span");if(n.empty(),""!==this.ccBuffer[t]){var r=this.ccBuffer[t];void 0!==this.curPreamCommand[t+1]&&(this.applyCommandStyle(n,this.curPreamCommand[t+1]),this.curPreamCommand[t+1]=void 0),void 0!==this.curMidRowCommand[t+1]&&(this.applyCommandStyle(n,this.curMidRowCommand[t+1]),this.curMidRowCommand[t+1]=void 0),n.append(r),this.ccBuffer[t]=""}}break;case this.COMMANDS.CLEAR_BUFFER:this.ccBuffer=this.clearCcBuffer(this.ccBuffer);break;case this.COMMANDS.ERASE_DISPLAY:this.$Cea608CustomContainer.find(".ccrow span").empty();break;case this.COMMANDS.BACKSPACE:var a=this.ccBuffer[e.row-1];if(this.isBuffering&&this.ccBuffer.length>0&&void 0!==a)this.ccBuffer[e.row-1]=a.slice(0,-1);else{var o=this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector+" .row_"+e.row+" span");if(void 0!==o.text()){var s=o.text().slice(0,-1);o.text(s)}}break;case this.COMMANDS.DELETE_ROW:this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector+" .row_"+e.row+" span").empty();break;case this.COMMANDS.ROLL_UP_2:this.rollup=2,this.isBuffering=!1;break;case this.COMMANDS.ROLL_UP_3:this.rollup=3,this.isBuffering=!1;break;case this.COMMANDS.ROLL_UP_4:this.rollup=4,this.isBuffering=!1;break;case this.COMMANDS.RESUME_DIRECT:this.isBuffering=!1;break;case this.COMMANDS.TEXT_RESTART:i.info("TEXT_RESTART:",this.ccBuffer);break;case this.COMMANDS.RESUME_DISPLAY:i.info("RESUME_DISPLAY:",this.ccBuffer);break;case this.COMMANDS.CARRIAGE_RETURN:if(this.isBuffering)this.$Cea608CustomContainer.find(".ccrow span").empty();else for(var l=1;l<=this.TOTAL_NUMBER_OF_CC_ROWS;l++){var d=this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+l).find("span");if(d.empty(),d!==this.TOTAL_NUMBER_OF_CC_ROWS){var u=l+1,c=this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+u).find("span");this.copyRowStyle(this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+l),this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+u)),Math.abs(l-e.row)<this.rollup&&d.append(c.text())}}break;case this.COMMANDS.TAB_OFFSET_1:this.tabOffset[e.row]=1;break;case this.COMMANDS.TAB_OFFSET_2:this.tabOffset[e.row]=2;break;case this.COMMANDS.TAB_OFFSET_3:this.tabOffset[e.row]=3;break;case this.COMMANDS.PREAMBLE:this.curPreambleRow=e.row,this.curPreamCommand[e.row]=e;break;case this.COMMANDS.MID_ROW:this.curMidRowCommand[e.row]=e}},applyCss:function(e,t){if("string"==typeof t){var n=t.split(";");n.forEach(function(t){var n=t.match(/^\s*([\w\-]+)\s*:\s*([^;]+)/);n&&(e[n[1]]=n[2])})}},applyCommandStyle:function(e,t){var n,i=0,r={color:t.textColor,backgroundColor:t.backgroundColor,fontFamily:"inherit",fontSize:"inherit",fontStyle:t.italic?"italic":"normal",textDecoration:t.underline?"underline":"none"};this.applyCss(r,this.cssStyles.text),this.applyCss(r,this.cssStyles.background),e.css(r),void 0!==this.tabOffset[t.row]&&(i=this.tabOffset[t.row],this.tabOffset[t.row]=void 0),n=1*(t.column+i),this.$Cea608CustomContainer.find(this.cea608CustomTracksSelector).find(".row_"+t.row).css("padding-left",n+"em")},copyCssPropetry:function(e,t,n){t.css(n,e.css(n))},copyRowStyle:function(e,t){var n=e.find("span"),i=t.find("span");["color","font-family","font-size","background-color","font-style","text-decoration"].forEach(function(e){this.copyCssPropetry(i,n,e)},this),this.copyCssPropetry(t,e,"padding-left")},onToggleCc:function(){this.isSupported()&&(s.get(s.KEYS.CC_ON)?this.$Cea608CustomContainer.removeClass("edge-608-hidden"):this.$Cea608CustomContainer.addClass("edge-608-hidden"))},onCCSettings:function(e){r.isObject(e)&&(this.cssStyles=r.pick(e,"text","background"))},onMediaEnd:function(){this.setCcCommand({captionText:this.COMMANDS.ERASE_DISPLAY})}},{NAME:"CEA608Manager"})},function(e,t,n){var i=n(1),r=n(84),a=n(41),o=n(6),s=n(3);e.exports=r.extend({initialize:function(){this.isSupported()&&(i.bindAll(this,"onToggleCc","onCCEvent","addCssRule"),this.player.on(o.CC,this.onCCEvent),this.targetSelector="::cue")},isSupported:function(){return this.player.configModel.config.jsHLSEnabled&&this.player.isLive()},onCCEvent:function(e){this.track=e.data,this.onToggleCc()},onToggleCc:function(){if(this.isSupported()){var e=a.get(a.KEYS.CC_ON);this.track&&this.toggleTextTrack(this.track,e)}},toggleTextTrack:function(e,t){e.mode=t?"showing":"hidden"},onCCSettings:function(e){i.isObject(e)&&(this.cssStyles=i.pick(e,"text","background"),this.addCssRule(this.player.guiModel.ccStyleSheet,this.targetSelector,this.cssStyles.text+";"+this.cssStyles.background+";"))},addCssRule:function(e,t,n){for(var i=e.cssRules,r=0;r<i.length;r++)i[r].selectorText===this.targetSelector&&e.deleteRule(r);s.insertCss(e,t,n)}},{NAME:"CEA608ManagerHlsJs"})},function(e,t,n){var i=n(1),r=n(5),a=n(98),o=n(100),s=n(6),l=a.extend({initialize:function(){l.__super__.initialize.apply(this,arguments),this.isSupported()&&(i.bindAll(this,"toggleTextTrack","onCueChange","resetCues"),this.targetSelector=".edge-608-tracks .ccrow span",this.$captionDisplay=this.player.$el.find(".edge-608-container"),this.$rowContainer=r(o({totalRows:15})),this.$rowContainer.appendTo(this.$captionDisplay),this.cuePositionOffset=0,r.browser.firefox&&(this.cuePositionOffset=50),this.listenTo(this.player,s.INDEX_CHANGE,this.resetCues))},resetCues:function(){this.$rowContainer.find(".ccrow > span").text("").css("left","")},toggleTextTrack:function(e,t){e.mode="hidden",this.$captionDisplay.toggleClass("edge-608-hidden",!t),e.addEventListener("cuechange",this.onCueChange)},onCueChange:function(e){i.each(e.target.activeCues,function(e){this.addCueToDisplay(e)},this)},addCueToDisplay:function(e){var t=this.$rowContainer[0].children[e.line-1].children[0],n=e.position-this.cuePositionOffset;t.textContent=e.text,t.style.left=n+"%",e.onexit=function(){t.textContent=""}}},{NAME:"CEA608ManagerManaualHlsJs"});e.exports=l},function(e,t){e.exports=function(e){var t,n="";Array.prototype.join;n+='<div class="edge-608-tracks">\n	';for(var i=0;i<e.totalRows;++i){n+="\n		";var r="ccrow row_"+(i+1);n+="\n		";var a=6*(i+1)+"%";n+='\n		<div class="'+(null==(t=r)?"":t)+'" style="top: '+(null==(t=a)?"":t)+'">\n			<span></span>\n		</div>\n	'}return n+="\n</div>\n"}},function(e,t,n){var i=n(1),r=n(84),a=n(41),o=n(6),s=n(3);e.exports=r.extend({initialize:function(){i.bindAll(this,"onToggleCc","onCCEvent","addCssRule"),this.player.on(o.CC,this.onCCEvent)},onCCEvent:function(e){this.track=e.data,this.onToggleCc()},onToggleCc:function(){var e=a.get(a.KEYS.CC_ON);this.track&&(this.track.mode=e?"showing":"hidden")},onCCSettings:function(e){if(i.isObject(e)){var t=this.player.guiModel.ccStyleSheet;this.addCssRule(t,"*::cue",e.text),this.addCssRule(t,"video::-webkit-media-text-track-display-backdrop",e.background)}},addCssRule:function(e,t,n){for(var i=e.cssRules,r=0;r<i.length;r++)i[r].selectorText&&i[r].selectorText.replace(/^\*/,"")===t.replace(/^\*/,"")&&e.deleteRule(r);s.insertCss(e,t,n)}},{NAME:"CEA608ManagerHtml5Desktop"})},function(e,t,n){var i=n(2).getLogger("overlay-manager"),r=n(1),a=n(5),o=n(84),s=n(6);e.exports=o.extend({SELECTOR:".edge-overlay-container",shareIsActive:!1,ccSettingsIsActive:!1,overlays:[],channelLogos:[],initialize:function(){r.bindAll(this,"onMetadata","createOverlay","createChannelLogo","onPlayhead","hideOverlays","showOverlays","onShowShare","onAdBreakStarted","onAdBreakEnded","onCCSettings","clearOverlays"),this.$container=this.player.$el.find(this.SELECTOR),this.listenTo(this.player,s.METADATA,this.onMetadata),this.listenTo(this.player,s.PLAYHEAD_UPDATE,this.onPlayhead),this.listenTo(this.player,s.BENTO_AD_BREAK_STARTED,this.onAdBreakStarted),this.listenTo(this.player,s.BENTO_AD_BREAK_ENDED,this.onAdBreakEnded)},onShowShare:function(){this.shareIsActive=!0,this.hideOverlays()},onCCSettings:function(){this.hideOverlays()},onMetadata:function(e){var t;e&&e.data&&e.data.isAd?this.hideOverlays():(this.clearOverlays(),t=this.player.currentMetadata.mediaGen,t&&t.overlay&&t.overlay.forEach(this.createOverlay,this),this.player.configModel.config.channelLogoURL&&this.createChannelLogo(this.player.configModel.config),this.showOverlays())},createOverlay:function(e){i.info("createOverlay",e);var t="auto",n=a("<img/>").attr("src",e.src).css({position:"absolute",width:e.width?e.width+"px":t,height:e.height?e.height+"px":t,left:e.xPercent?e.xPercent+"%":t,top:e.yPercent?e.yPercent+"%":t}),r=parseInt(e.startTime),o=r+parseInt(e.duration);"ms"===e.timeUnit&&(r/=1e3,o/=1e3),n.hide(),this.overlays.push({startTime:r,endTime:o,$el:n}),this.$container.append(n)},createChannelLogo:function(e){var t={imageUrl:e.channelLogoURL};void 0!==e.channelLogoWidth&&void 0!==e.channelLogoHeight&&(t.width=e.channelLogoWidth,t.height=e.channelLogoHeight,void 0!==e.channelBugPositionOffsetX&&void 0!==e.channelBugPositionOffsetY?(t.xPercent=parseInt(e.channelBugPositionOffsetX),t.yPercent=parseInt(e.channelBugPositionOffsetY)):(t.xPercent=5,t.yPercent=5));var n=t.width/this.$container[0].offsetWidth*100,r=t.height/this.$container[0].offsetHeight*100;t.xPercent-n>0&&(t.xPercent-=n),t.yPercent-r>0&&(t.yPercent-=r),e.channelBugStartTime?t.startTime=parseInt(e.channelBugStartTime):t.startTime=0,e.channelBugDuration?t.endTime=parseInt(e.channelBugDuration):t.endTime=36e5,i.info("createChannelLogo",this.$container[0].offsetWidth,this.$container[0].offsetHeight,t);var o=a("<img/>").attr("src",t.imageUrl).css({position:"absolute",width:t.width,height:t.height,left:t.xPercent+"%",top:t.yPercent+"%"});o.hide(),this.channelLogos.push({startTime:t.startTime,endTime:t.endTime,$el:o}),this.$container.append(o)},onPlayhead:function(e){var t=e.data;r.each(this.overlays,function(e){t>=e.startTime&&t<=e.endTime?"none"===e.$el.css("display")&&e.$el.show():"none"!==e.$el.css("display")&&e.$el.hide()}),r.each(this.channelLogos,function(e){t>=e.startTime&&t<=e.endTime?"none"===e.$el.css("display")&&e.$el.show():"none"!==e.$el.css("display")&&e.$el.hide()})},clearOverlays:function(){this.$container.empty(),this.overlays=[],this.channelLogos=[]},hideOverlays:function(){this.$container.hide()},showOverlays:function(){this.$container.show()},onAdBreakStarted:function(){this.$container.hide()},onAdBreakEnded:function(){this.$container.show()},destroy:function(){this.clearOverlays(),this.stopListening()}},{NAME:"OverlayManager"})},function(e,t){e.exports=function(){return{isAdBreak:!1,waitingForAdBreak:!1,isReady:!1,adManifestMetadata:null,adManifestRequested:!1,adManifestReady:!1,adBreakMetadata:null,adMetadata:null,adBlockerDetected:!1,isPostRoll:!1,skipAdRequests:!1,adBreakType:null,adCuePoints:[],isAdPaused:null}}},function(e,t,n){var i=n(2).getLogger("bento-helper-api"),r=n(4).window,a=n(1),o=n(3),s=n(50),l=n(52),d=n(41),u=n(26);e.exports=function(e){function t(e){n.adsModel.adBlockerDetected=e,n.adsModel.skipAdRequests=e}var n=e;n.adsModel.initialAdBlockerStatus=d.get(d.KEYS.AD_BLOCKER_STATUS),t(!!n.adsModel.initialAdBlockerStatus);var c={ready:function(e){i.debug("ready"),o.validateTiming(e)?(n.adsModel.isReady=!0,s.resolve(r.Bento),n.performanceManager.bentoReady(e),l.bentoReady(n)):(i.error("ready: invalid timing"),s.reject(new Error("Bento ready: invalid timing")))},adManifestRequest:function(e,t){i.debug("adManifestRequested ",e,t),o.validateTiming(t)?void 0===e?i.error("adManifestRequested: missing adManifestRequestData"):(n.adsModel.adManifestRequested=!0,l.setAdManifestMetadata(n,e),n.performanceManager.adManifestRequested(t)):i.error("adManifestRequested: invalid timing")},adManifestReady:function(e){i.debug("adBreakReady ",e),o.validateTiming(e)?(n.adsModel.adManifestReady=!0,n.performanceManager.adManifestReady(e)):i.error("adBreakReady: invalid timing")},adBreakStarted:function(e){return n.adsModel.waitingForAdBreak?(i.debug("adBreakStarted",e),n.adsModel.adBreakMetadata=e,n.timeoutManager.adBreakStarted(),n.performanceManager.adBreakStarted(!1),void l.adBreakStarted(n)):void i.warn("adBreakStarted must be called while waiting for ad break")},adBreakSkipped:function(){return n.adsModel.waitingForAdBreak?(i.debug("adBreakSkipped"),n.timeoutManager.adBreakSkipped(),void l.skipAdBreak(n)):void i.warn("adBreakSkipped must be called while waiting for ad break")},adPlayRequest:function(e){i.debug("adPlayRequest ",e),void 0===e&&i.warn("adPlayRequest: adBreakMetadata is undefined"),l.setAdBreakMetadata(n,e),n.timeoutManager.adPlayRequest(),n.performanceManager.bentoRequestingAdPlay()},adStarted:function(e){i.debug("adStarted ",e),n.timeoutManager.adStarted(),n.performanceManager.adStarted(e),l.adStarted(n,e)},adEnded:function(){i.debug("adEnded"),n.timeoutManager.adEnded(),n.performanceManager.adEnded(),l.resetAdMetadata(n)},adSkipped:function(e,t){i.info("adSkipped"),n.timeoutManager.adSkipped(),n.performanceManager.adSkipped(e,t),l.resetAdMetadata(n)},counterStrikeMode:function(){c.adBlockerStatus(!0)},adBlockerStatus:function(e){i.debug("adBlockerStatus",e);var r=d.get(d.KEYS.AD_BLOCKER_STATUS);n.adsModel.reportedAdBlockerStatus=e,n.performanceManager.adBlockerStatus(),e!==r&&(d.set(d.KEYS.AD_BLOCKER_STATUS,e),t(e))},adBreakEnded:function(){i.debug("adBreakEnded"),n.timeoutManager.adBreakEnded(),n.performanceManager.adBreakEnded(),l.adBreakEnded(n)},adBreakTerminated:function(e,t){i.debug("adBreakTerminated");var r=t;a.isObject(e)?r=e:e===!0&&(n.adsModel.skipAdRequests=!0,t||(r={level:u.INFO,message:"Ad break terminated with persist param"})),n.timeoutManager.adBreakTerminated(),n.performanceManager.adBreakTerminated(r),l.adBreakTerminated(n)},skipAllAdRequests:function(){i.debug("skipAllAdRequests"),n.adsModel.skipAdRequests=!0,l.resetAdMetadata(n)},adResumed:function(){i.debug("adResumed"),n.adsModel.isAdPaused=!1,l.adResumed(n)},adPaused:function(){i.debug("adPaused"),n.adsModel.isAdPaused=!0,l.adPaused(n)},preloadContent:function(){i.debug("preloadContent"),n.playbackManager.preloadContent(n)},adStalled:function(){i.debug("adStalled"),l.adStalled(n)}};return c}},function(e,t,n){var i=n(2).getLogger("video-metrics-api"),r=n(1);e.exports=function(e){function t(e,t){var i=n.playbackModel.renderer[e]();return void 0===t&&(t=null),(isNaN(i)||0>i)&&(i=t),i}var n=e;return{getBufferLength:function(){return t("getBufferLength",0)},getMaxBufferLength:function(){return t("getMaxBufferLength",0)},getBandwidth:function(){return t("getBandwidth")},getMinBandwidth:function(){return t("getBandwidthMin")},getMaxBandwidth:function(){return t("getBandwidthMax")},getAvgBandwidth:function(){return t("getBandwidthAvg")},getDroppedFrames:function(){var e=n.playbackModel.renderer.getFrameDrops();return null!==e&&"object"==typeof e&&void 0!==e.totalDroppedFrames?e.totalDroppedFrames:0},getCurrentRenditionIndex:function(){return t("getCurrentRendition")},getRenditions:function(){return n.playbackModel.renderer.getRenditions()},getCurrentRendition:function(){var e=this.getRenditions(),t=this.getCurrentRenditionIndex();return r.isArray(e)?(isNaN(t)||0>t?(i.error("getCurrentRendition: incorrect rendition index",e,t),t=0):t>=e.length&&(i.error("getCurrentRendition: incorrect rendition index",e,t),t=e.length-1),e[t]):null},getCurrentMaxCappedRendition:function(){return n.playbackModel.renderer.getMaxAutoLevel()},getDisplayHeight:function(){return n.playbackModel.renderer.el.offsetHeight},getDisplayWidth:function(){return n.playbackModel.renderer.el.offsetWidth}}}},function(e,t,n){var i=n(5),r={Dimensions16x9:{width:640,height:360},Dimensions4x3:{width:360,height:293},metadataCSS:{textAlign:"left",backgroundColor:"white",padding:"0.34em",marginTop:"0.34em",marginBottom:"0px"},template:'<div style="display:table;width:10px;background-color:#000000;font-size:12px;font-family:Arial, Helvetica, sans-serif;padding:0.34em;"><iframe src="//media.mtvnservices.com/embed/{uri}" width="{width}" height="{height}" frameborder="0" allowfullscreen></iframe>{displayMetadata}</div>',getEmbedCodeDimensions:function(e,t){var n="100%"===e.width?t.width():e.width,i="100%"===e.height?t.height():e.height,a=n/i,o=Math.abs(a-4/3),s=Math.abs(a-16/9);return o>s?r.Dimensions16x9:r.Dimensions4x3},getDisplayMetadata:function(e){if(!e)return"";var t=i("<p/>"),n="",a=e.rss.group,o=a.categories||a.category,s=o.source,l=o.sourceLink,d=o.seoHTMLText;return s&&(n+=l?'<b><a href="'+l+'">'+s+"</a></b>":"<b>"+s+"</b> "),d&&(n&&(n+="<br>"),n+="Get More: "+d),n&&(t.css(r.metadataCSS),t.html(n)),i("<div/>").append(t).html()},getEmbedCode:function(e,t,n){if(e.uri){var i=r.getEmbedCodeDimensions(e,n),a=r.template.replace(/\{uri\}/,e.uri).replace(/\{width\}/g,i.width).replace(/\{height\}/g,i.height).replace(/\{displayMetadata\}/,r.getDisplayMetadata(t));return a}}};e.exports=r},function(e,t,n){var i=n(2).getLogger("vtt-manager-iphone"),r=n(1),a=n(84),o=n(6),s=n(108);e.exports=a.extend({initialize:function(){this.isHTML5CCEnabled=!this.player.isLive(),this.isHTML5CCEnabled&&(this.videoElement=this.player.contentElement,this.sideloader=new s,this.track=void 0,this.currentIndex=0,this.captions=[],r.bindAll(this,"onCaptionsParsed","onIndexChange","onReplayRequest","setTrackCues"),this.setupListeners(),this.loadCaptions(0))},setupListeners:function(){this.listenTo(this.player,o.INDEX_CHANGE,this.onIndexChange),this.listenTo(this.player,o.REPLAY_REQUEST,this.onReplayRequest)},onIndexChange:function(e){this.loadCaptions(e.data)},onReplayRequest:function(){this.currentIndex=0,this.captions=[]},loadCaptions:function(e){if(this.captions[e])return void this.onCaptionsParsed(this.captions[e]);var t=this.player.playlistMetadata.items[e].mediaGen;if(void 0!==t&&void 0!==t.transcript){var n=!0;r.every(t.transcript,function(t){return"captions"===t.kind&&r.every(t.typographic,function(t){return"vtt"===t.format&&(i.info("loadCaptions",e,t.src),this.currentIndex=e,this.sideloader.load(t.src,this.onCaptionsParsed),n=!1),n},this),n},this)}},onCCSettings:r.noop,onCaptionsParsed:function(e){if(i.info("onCaptionsParsed:",e),void 0===this.captions[this.currentIndex]&&(this.captions[this.currentIndex]=e),void 0===this.track){var t=this.videoElement.addTextTrack("captions","English","en");this.track=t,this.cues=[],t.default=!0}this.setTrackCues()},setTrackCues:function(){var e,t,n,i;this.removeTrackCues(),e=this.track,e&&(t="object"==typeof TextTrackCue?TextTrackCue:VTTCue,n=this.player.currentMetadata.duration-1,i=this.cues,this.captions[this.currentIndex].cues.forEach(function(r){var a;r.startTime>=n||(r.endTime>n&&(r.endTime=n),a=new t(r.startTime,r.endTime,r.text),i.push(a),e.addCue(a))}))},removeTrackCues:function(){if(this.cues&&this.cues.length)for(;this.cues.length;){var e=this.cues.pop();this.track.removeCue(e)}},destroy:function(){this.isHTML5CCEnabled&&(this.removeTrackCues(),this.stopListening(),this.videoElement=void 0,this.track=void 0,this.currentIndex=void 0,delete this.captions,delete this.cues,this.container&&(this.container.remove(),delete this.container),delete this.sideloader),this.isHTML5CCEnabled=void 0,this.stopListening()}},{NAME:"VttManagerIphone"})},function(e,t,n){var i=n(5),r=n(109),a=function(){this.vttSrc=null,this.dataRaw=null,this.dataParsed=null,this.parser=new r,this.load=function(e,t){var n=this;this.vttSrc=e,this.onLoadedCallBack=t,i.get(this.vttSrc,function(e){n.dataRaw=e,n.dataParsed=n.parser.parse(n.dataRaw),n.onLoadedCallBack(n.dataParsed)})}};e.exports=a},function(e,t,n){var i=n(110),r=n(111),a=function(){this.parse=function(e,t){function n(e,t){c.push({message:e,line:s+1,col:t})}var a=/\r\n|\r|\n/,o=Date.now(),s=0,l=e.split(a),d=!1,u=[],c=[],h=l[s],f=h.length,p="WEBVTT",g=0,m=p.length;for("\ufeff"===h[0]&&(g=1,m+=1),(m>f||h.indexOf(p)!==0+g||f>m&&" "!==h[m]&&"	"!==h[m])&&n('No valid signature. (File needs to start with "WEBVTT".)'),s++;""!=l[s]&&void 0!=l[s];){if(n("No blank line after the signature."),-1!=l[s].indexOf("-->")){d=!0;break}s++}for(;void 0!=l[s];){for(var v;!d&&""==l[s];)s++;if(!d&&void 0==l[s])break;v={id:"",startTime:0,endTime:0,pauseOnExit:!1,direction:"horizontal",snapToLines:!0,linePosition:"auto",textPosition:50,size:100,alignment:"middle",text:"",tree:null};var y=!0;if(-1==l[s].indexOf("-->")){if(v.id=l[s],/^NOTE($|[ \t])/.test(v.id)){for(s++;""!=l[s]&&void 0!=l[s];)-1!=l[s].indexOf("-->")&&n("Cannot have timestamp in a comment."),s++;continue}if(s++,""==l[s]||void 0==l[s]){n("Cue identifier cannot be standalone.");continue}-1==l[s].indexOf("-->")&&(y=!1,n("Cue identifier needs to be followed by timestamp."))}d=!1;var E=new r(l[s],n),A=0;if(u.length>0&&(A=u[u.length-1].startTime),!y||E.parse(v,A)){for(s++;""!=l[s]&&void 0!=l[s];){if(-1!=l[s].indexOf("-->")){n("Blank line missing before cue."),d=!0;break}""!=v.text&&(v.text+="\n"),v.text+=l[s],s++}var b=new i(v.text,n,t);v.tree=b.parse(v.startTime,v.endTime),u.push(v)}else for(v=null,s++;""!=l[s]&&void 0!=l[s];){if(-1!=l[s].indexOf("-->")){d=!0;break}s++}}return u.sort(function(e,t){return e.startTime<t.startTime?-1:e.startTime>t.startTime?1:e.endTime>t.endTime?-1:e.endTime<t.endTime?1:0}),{cues:u,errors:c,time:Date.now()-o}}};e.exports=a},function(e,t,n){var i=n(111),r=function(e,t,n){function r(){for(var t="data",n="",i="",r=[];void 0!=e[a-1]||0==a;){var s=e[a];if("data"==t)if("&"==s)i=s,t="escape";else if("<"==s&&""==n)t="tag";else{if("<"==s||void 0==s)return["text",n];n+=s}else if("escape"==t)if("&"==s)o("Incorrect escape."),n+=i,i=s;else if(/[abglmnsprt]/.test(s))i+=s;else if(";"==s)"&amp"==i?n+="&":"&lt"==i?n+="<":"&gt"==i?n+=">":"&lrm"==i?n+="":"&rlm"==i?n+="":"&nbsp"==i?n+="":(o("Incorrect escape."),n+=i+";"),t="data";else{if("<"==s||void 0==s)return o("Incorrect escape."),n+=i,["text",n];o("Incorrect escape."),n+=i+s,t="data"}else if("tag"==t)if("	"==s||"\n"==s||"\f"==s||" "==s)t="start tag annotation";else if("."==s)t="start tag class";else if("/"==s)t="end tag";else if(/\d/.test(s))n=s,t="timestamp tag";else{if(">"==s||void 0==s)return">"==s&&a++,["start tag","",[],""];n=s,t="start tag"}else if("start tag"==t)if("	"==s||"\f"==s||" "==s)t="start tag annotation";else if("\n"==s)i=s,t="start tag annotation";else if("."==s)t="start tag class";else{if(">"==s||void 0==s)return">"==s&&a++,["start tag",n,[],""];n+=s}else if("start tag class"==t)if("	"==s||"\f"==s||" "==s)r.push(i),i="",t="start tag annotation";else if("\n"==s)r.push(i),i=s,t="start tag annotation";else if("."==s)r.push(i),i="";else{if(">"==s||void 0==s)return">"==s&&a++,r.push(i),["start tag",n,r,""];i+=s}else if("start tag annotation"==t){if(">"==s||void 0==s)return">"==s&&a++,i=i.split(/[\u0020\t\f\r\n]+/).filter(function(e){return e?!0:void 0}).join(" "),["start tag",n,r,i];i+=s}else if("end tag"==t){if(">"==s||void 0==s)return">"==s&&a++,["end tag",n];n+=s}else if("timestamp tag"==t){if(">"==s||void 0==s)return">"==s&&a++,["timestamp",n];
n+=s}else o("Never happens.");a++}}var e=e,a=0,o=function(e){"metadata"!=n&&t(e,a+1)};this.parse=function(t,s){function l(e){c.children.push({type:"object",name:e[1],classes:e[2],children:[],parent:c}),c=c.children[c.children.length-1]}function d(e){for(var t=c;t;){if(t.name==e)return!0;t=t.parent}}for(var u={children:[]},c=u,h=[];void 0!=e[a];){var f=r();if("text"==f[0])c.children.push({type:"text",value:f[1],parent:c});else if("start tag"==f[0]){"chapters"==n&&o("Start tags not allowed in chapter title text.");var p=f[1];"v"!=p&&"lang"!=p&&""!=f[3]&&o("Only <v> and <lang> can have an annotation."),"c"==p||"i"==p||"b"==p||"u"==p||"ruby"==p?l(f):"rt"==p&&"ruby"==c.name?l(f):"v"==p?(d("v")&&o("<v> cannot be nested inside itself."),l(f),c.value=f[3],f[3]||o("<v> requires an annotation.")):"lang"==p?(l(f),c.value=f[3]):o("Incorrect start tag.")}else if("end tag"==f[0])"chapters"==n&&o("End tags not allowed in chapter title text."),f[1]==c.name?c=c.parent:"ruby"==f[1]&&"rt"==c.name?c=c.parent.parent:o("Incorrect end tag.");else if("timestamp"==f[0]){"chapters"==n&&o("Timestamp not allowed in chapter title text.");var g=new i(f[1],o),m=g.parseTimestamp();void 0!=m&&((t>=m||m>=s)&&o("Timestamp must be between start timestamp and end timestamp."),h.length>0&&h[h.length-1]>=m&&o("Timestamp must be greater than any previous timestamp."),c.children.push({type:"timestamp",value:m,parent:c}),h.push(m))}}for(;c.parent;)"v"!=c.name&&o("Required end tag missing."),c=c.parent;return u}};e.exports=r},function(e,t){var n=function(e,t){function n(t){for(;void 0!=e[l]&&t.test(e[l]);)l++}function i(t){for(var n="";void 0!=e[l]&&t.test(e[l]);)n+=e[l],l++;return n}function r(){var t,n,r,a,o="minutes";if(void 0==e[l])return void d("No timestamp found.");if(!/\d/.test(e[l]))return void d("Timestamp must start with a character in the range 0-9.");if(t=i(/\d/),(t.length>2||parseInt(t,10)>59)&&(o="hours"),":"!=e[l])return void d("No time unit separator found.");if(l++,n=i(/\d/),2!=n.length)return void d("Must be exactly two digits.");if("hours"==o||":"==e[l]){if(":"!=e[l])return void d("No seconds found or minutes is greater than 59.");if(l++,r=i(/\d/),2!=r.length)return void d("Must be exactly two digits.")}else r=n,n=t,t="0";return"."!=e[l]?void d('No decimal separator (".") found.'):(l++,a=i(/\d/),3!=a.length?void d("Milliseconds must be given in three digits."):parseInt(n,10)>59?void d("You cannot have more than 59 minutes."):parseInt(r,10)>59?void d("You cannot have more than 59 seconds."):60*parseInt(t,10)*60+60*parseInt(n,10)+parseInt(r,10)+parseInt(a,10)/1e3)}function a(e,t){for(var n=e.split(o),i=[],r=0;r<n.length;r++)if(""!=n[r]){var a=n[r].indexOf(":"),s=n[r].slice(0,a),l=n[r].slice(a+1);if(-1!=i.indexOf(s)&&d("Duplicate setting."),i.push(s),""==l)return void d("No value for setting defined.");if("vertical"==s){if("rl"!=l&&"lr"!=l){d("Writing direction can only be set to 'rl' or 'rl'.");continue}t.direction=l}else if("line"==s){if(!/\d/.test(l)){d("Line position takes a number or percentage.");continue}if(-1!=l.indexOf("-",1)){d("Line position can only have '-' at the start.");continue}if(-1!=l.indexOf("%")&&l.indexOf("%")!=l.length-1){d("Line position can only have '%' at the end.");continue}if("-"==l[0]&&"%"==l[l.length-1]){d("Line position cannot be a negative percentage.");continue}if("%"==l[l.length-1]){if(parseInt(l,10)>100){d("Line position cannot be >100%.");continue}t.snapToLines=!1}t.linePosition=parseInt(l,10)}else if("position"==s){if("%"!=l[l.length-1]){d("Text position must be a percentage.");continue}if(parseInt(l,10)>100){d("Size cannot be >100%.");continue}t.textPosition=parseInt(l,10)}else if("size"==s){if("%"!=l[l.length-1]){d("Size must be a percentage.");continue}if(parseInt(l,10)>100){d("Size cannot be >100%.");continue}t.size=parseInt(l,10)}else if("align"==s){var u=["start","middle","end","left","right"];if(-1==u.indexOf(l)){d("Alignment can only be set to one of "+u.join(", ")+".");continue}t.alignment=l}else d("Invalid setting.")}}var o=/[\u0020\t\f]/,s=/[^\u0020\t\f]/,e=e,l=0,d=function(e){t(e,l+1)},u=!0;this.parse=function(t,i){if(n(o),t.startTime=r(),void 0!=t.startTime){if(t.startTime<i&&d("Start timestamp is not greater than or equal to start timestamp of previous cue."),s.test(e[l])&&d("Timestamp not separated from '-->' by whitespace."),n(o),"-"!=e[l])return void d("No valid timestamp separator found.");if(l++,"-"!=e[l])return void d("No valid timestamp separator found.");if(l++,">"!=e[l])return void d("No valid timestamp separator found.");if(l++,s.test(e[l])&&d("'-->' not separated from timestamp by whitespace."),n(o),t.endTime=r(),void 0!=t.endTime)return t.endTime<=t.startTime&&d("End timestamp is not greater than start timestamp."),s.test(e[l])&&(u=!1),n(o),a(e.substring(l),t),!0}},this.parseTimestamp=function(){var t=r();return void 0!=e[l]?void d("Timestamp must not have trailing characters."):t}};e.exports=n},function(e,t,n){var i=n(2).getLogger("vtt-manager"),r=n(1),a=n(84),o=n(6),s=n(14),l=n(113),d=n(108),u=n(41);e.exports=a.extend({initialize:function(){this.player.isLive()?this.onCCSettings=r.noop:(this.contentType=this.player.configModel.config.contentType,this.captions=null,this.currentCues=[],this.captionSrc=null,this.mediaGen=null,this.isPlayingAd=!1,this.cssStyles=null,this.tracksSelector=".edge-cc-tracks",this.container=this.player.$el.find(".edge-cc-container"),this.container.addClass("edge-cc-hidden edge-cc-default").append('<div class="edge-cc-tracks"></div>'),this.captionSideloader=new d,this.player.webVttStyler=new l(this.container[0]),r.bindAll(this,"onMetadata","onPlayheadUpdate","onPlaylistComplete","onToggleCc","onCaptionsParsed","onStateChange","enable","disable","onAdBreakStarted","onAdBreakEnded","checkCueEnd","checkCueStart","removeCueFromDisplay","addCueToDisplay","reset"),this.setupListeners())},setupListeners:function(){this.listenTo(this.player,o.METADATA,this.onMetadata),this.listenTo(this.player,o.PLAYHEAD_UPDATE,this.onPlayheadUpdate),this.listenTo(this.player,o.STATE_CHANGE,this.onStateChange),this.listenTo(this.player,o.PLAYLIST_COMPLETE,this.onPlaylistComplete),this.listenTo(this.player,o.BENTO_AD_BREAK_STARTED,this.onAdBreakStarted),this.listenTo(this.player,o.BENTO_AD_BREAK_ENDED,this.onAdBreakEnded),this.listenTo(this.player,o.INDEX_CHANGE,this.reset)},isSegmentedContent:function(){var e=!1;return this.player.configModel.config.useSegmentedScrubber?e=!0:"playlist"===this.contentType&&this.player.playlistMetadata.items.length>1&&(e=!0),e},onStateChange:function(e){this.isPlayingAd||e.data===s.PLAYING&&this.onToggleCc()},onMetadata:function(){this.loadCaptions()},onPlayheadUpdate:function(e){var t=e.data;this.isPlayingAd||u.get(u.KEYS.CC_ON)&&null!==this.captions&&(this.checkCueEnd(t),this.checkCueStart(t))},checkCueStart:function(e){var t=this.captions.cues;if(t.length)for(var n=0;n<t.length;n++)if(e>=t[n].startTime&&e<=t[n].endTime){this.addCueToDisplay(t[n]);break}},checkCueEnd:function(e){if(this.currentCues.length>0)for(var t=0;t<this.currentCues.length;t++)(e>=this.currentCues[t].endTime||e<this.currentCues[t].startTime)&&(this.removeCueFromDisplay(this.currentCues[t]),this.currentCues.splice(t,1))},getCueId:function(e){return this.player.id+"_"+e.id},getCueHtml:function(e){var t="";return e.tree?t=this.toHtml(e.tree):e.text&&(t=e.text),'<span id="'+this.getCueId(e)+'">'+t+"</span>"},addCueToDisplay:function(e){r.contains(this.currentCues,e)||(this.currentCues.push(e),this.container.find(this.tracksSelector).prepend(this.getCueHtml(e)))},toHtml:function(e){var t="";return r.isArray(e.children)&&e.children.forEach(function(n){var i="";switch(n.type){case"text":i=n.value.replace(/[\n\r]+/g,"<br />");break;case"object":i="<"+n.name+">"+this.toHtml(n)+"</"+n.name+">"}t+=e.type||"<br />"===i?i:'<span class="edge-cc-track-cue">'+i+"</span>"},this),t},removeCueFromDisplay:function(e){this.container.find("#"+this.getCueId(e)).remove()},onAdBreakStarted:function(){this.isPlayingAd=!0,this.reset()},onAdBreakEnded:function(){this.isPlayingAd=!1,this.reset()},onPlaylistComplete:function(){this.reset()},enable:function(){this.container.toggleClass("edge-cc-hidden",null===this.captions),this.loadCaptions(),null!==this.cssStyles&&this.applyCCStyling(this.cssStyles)},disable:function(){this.container&&this.container.addClass("edge-cc-hidden")},reset:function(){this.isSegmentedContent()&&(this.captions=null,this.mediaGen=null,this.captionSrc=null),this.disable(),this.emptyTracks(),this.currentCues=[]},emptyTracks:function(){this.container&&this.container.find(this.tracksSelector).empty()},onToggleCc:function(){u.get(u.KEYS.CC_ON)?this.enable():this.disable()},loadCaptions:function(){var e=!1;null!==this.mediaGen||void 0===this.player.currentMetadata.mediaGen||this.isPlayingAd||(this.mediaGen=this.player.currentMetadata.mediaGen),null!==this.captions||this.isPlayingAd||null===this.mediaGen||(r.every(this.mediaGen.transcript,function(t){var n=!0;return"captions"===t.kind&&r.every(t.typographic,function(t){return"vtt"===t.format&&(e=!0,u.get(u.KEYS.CC_ON)&&t.src!==this.captionSrc&&(this.captionSideloader.load(t.src,this.onCaptionsParsed),this.captionSrc=t.src),n=!1),n},this),n},this),this.doesTranscriptExist!==e&&(i.info("does transcript exists",e),this.doesTranscriptExist=e,this.player.trigger(o.VTT_TRANSCRIPT_CHECKED,e)))},onCaptionsParsed:function(e){this.captions=e,this.currentCues=[],this.onToggleCc()},onCCSettings:function(e){var t=e,n={container:{left:"0",width:"100%",textAlign:"center"},track:r.extend({},t)};this.cssStyles=this.player.webVttStyler.parse(n),u.get(u.KEYS.CC_ON)&&this.applyCCStyling(this.cssStyles)},applyCCStyling:function(e){this.player.webVttStyler.inject(e)},destroy:function(){this.captions=null,this.currentCues=null,this.captionSrc=null,this.mediaGen=null,this.container&&(this.container.remove(),delete this.container),delete this.captionSideloader,this.player.webVttStyler.reset(),delete this.player.webVttStyler,this.stopListening()}},{NAME:"VttManager"})},function(e,t){var n={textalign:"text-align",texttransform:"text-transform",fontweight:"font-weight",fontsize:"",fontfamily:"",lineheight:"line-height",backgroundcolor:"background-color",windowcolor:"background-color"},i=function(){this.styleObj={},this.identifierStyles=".pjs.injected-css-identifier {}",this.containerClasses=".pjs .edge-cc-container {",this.trackClasses=".pjs .edge-cc-container .edge-cc-tracks {",this.cueClasses=".pjs .edge-cc-container .edge-cc-tracks .edge-cc-track-cue {",this.parse=function(e){this.styleObj=e;var t=function(e,t,i){var r=e[t][i],a="";if(r){var o=n[i.toLowerCase()];a="string"==typeof o?o?o+": "+r:r:i+": "+r,a=" "+a+"; "}return a},i=this.containerClasses;this.styleObj.container&&(i+=t(this.styleObj,"container","left"),i+=t(this.styleObj,"container","bottom"),i+=t(this.styleObj,"container","width"),i+=t(this.styleObj,"container","textAlign"),i+=t(this.styleObj,"container","backgroundColor")),i+="}";var r=this.trackClasses+this.styleObj.track.window+"}",a=this.cueClasses;this.styleObj.track&&(a+=this.styleObj.track.text+"; ",a+=this.styleObj.track.background+"; "),a+="}";var o=this.identifierStyles+" "+i+" "+r+" "+a;return o},this.inject=function(e){var t=this.findStyleTag();void 0!==t?(this.reset(),this.createStyleTag(e)):this.createStyleTag(e)},this.reset=function(){var e=this.findStyleTag();void 0!==e&&document.head.removeChild(e)},this.findStyleTag=function(){for(var e,t=document.querySelectorAll("style"),n=0;n<t.length;n++)if(-1!==t[n].innerHTML.indexOf(this.identifierStyles)){e=t[n];break}return e},this.createStyleTag=function(e){var t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)}};e.exports=i},function(e,t){e.exports={getInstance:function(){return{skipPostRoll:!1,waitingForBento:!1,renderer:void 0,queuedStartTime:void 0,currentSrc:"",isBuffering:!1,isAutoPlayEnabled:!1,firedCCAvail:!1,updateDuration:!1,lastDuration:NaN,focusCurrentTime:0,seekedToEnd:!1,isMuted:!1}}}},function(e,t){e.exports={getInstance:function(){return{avgBandwidthKbps:null}}}},function(e,t){e.exports={getInstance:function(){return{shareModalManager:null,isFlashEnabled:!1,$resizeHandler:null,breakpoints:{width:[],height:[]},ccStyleSheet:null}}}},function(e,t,n){var i=n(2).getLogger("gui-manager"),r=n(4).window,a=n(1),o=n(5),s=n(3),l=n(6),d=n(81),u=n(112),c=n(22),h=n(118),f=n(43),p=n(128),g={NAME:"GuiManager",SELECTOR:".edge-gui",DEFAULT_URL_PATH:"//media.mtvnservices.com/edge/gui/gui-full-",initialize:function(e){var t;e.configModel.config.chromeless&&void 0!==e.configModel.config.chromeless?this.addCssClasses(e):(t=new h(e),t.render(),e.guiModel.shareModalView=t,this.loadGui(e)),e.on(l.FLASH_PLUGIN_STATUS,this.onFlashStatus),e.guiModel.$resizeHandler=o('<iframe frameborder="0" style="width:100%; height:100%; position:absolute; z-index:-99999;left:-99.99%; opacity:0; pointer-events:none;"></iframe>'),e.$el.append(e.guiModel.$resizeHandler),this.addResizeEventListener(e),this.parseCssBreakpoints(e,EdgePlayer.css)},addCssClasses:function(e){var t;try{t=r.self!==r.top}catch(e){t=!0}e.configModel.config.useNativeControls&&e.$el.addClass(d.PLATFORM_NATIVE),e.isMobilePlatform||e.$el.addClass(d.PLATFORM_DESKTOP),"US"!==e.configModel.config.geo&&e.$el.addClass(d.PLATFORM_INTERNATIONAL),t&&e.$el.addClass(d.PLATFORM_EMBED),e.isLive()&&e.$el.addClass(d.PLATFORM_LIVE),e.isDVR()&&e.$el.addClass(d.PLATFORM_DVR)},addResizeEventListener:function(e){e.guiModel.$resizeHandler[0].contentWindow.addEventListener("resize",a.debounce(this.onResize.bind(null,e),200))},loadGui:function(e){e.guiModel.guiUrl=e.config.customGuiUrl?e.config.customGuiUrl:this.DEFAULT_URL_PATH+EdgePlayer.defaultGuiVersion+".min.js",i.info("load GUI",e.guiModel.guiUrl),s.getExternalModule(e.guiModel.guiUrl,this.createGuiCheck.bind(this,e,this.createGui))},createGuiCheck:function(e,t,n){e.prepared().then(function(){t(e,n)})},createGui:function(e,t){if(this.addCssClasses(e),!a.isFunction(t))return void i.error("no GUI found");var n=e.configModel.config,r=!1;e.isLive()||n.useQuickTimePlayerOnIphone||(r=e.module(u).doesTranscriptExist),e.isLive()&&o.browser.safari&&!e.isMobilePlatform&&(r=e.playbackModel.firedCCAvail);var s={$el:e.$el.find(this.SELECTOR),player:e,fullscreenEnabled:!0,flashHLSEnabled:n.flashHLSEnabled,share:a.map(n.share,function(e){return e.id}),encodedFeedLink:encodeURIComponent(n.feed.link),adCuePoints:this.getAdCuePoints(e),duration:this.getDuration(e),cc:{doesTranscriptExist:r,availableOptions:f.CC_CUSTOMIZATION_OPTIONS,currentSettings:p.getCurrentSettings()},isAdBreakStarted:e.adsModel.isAdBreak,isAdPaused:e.adsModel.isAdPaused,adMetadata:e.adsModel.adMetadata||e.adsModel.adBreakMetadata};i.debug("create GUI",s);var l=t(a,o,c,EdgePlayer.log.getLogger("EdgeGUI")),d=new l(s);n.jsHLSEnabled||!n.flashHLSEnabled||e.guiModel.isFlashEnabled||(i.debug("hide GUI until flash polyfill is ready"),d.$el.hide()),this.onResize(e)},parseCssBreakpoints:function(e,t){function n(e){var t=e.match(/max/)?1:0;return parseInt(e.replace(/[^\d]/g,""),10)+t}if("string"==typeof t){var i=t.match(/\[(min|max)\-width~="(\d+)(?=px"\])/g),r=t.match(/\[(min|max)\-height~="(\d+)(?=px"\])/g);i=a.uniq(a.map(i,n)),r=a.uniq(a.map(r,n)),this.addCssBreakpoints(e,i,r)}},addCssBreakpoints:function(e,t,n){a.isArray(t)&&Array.prototype.push.apply(e.guiModel.breakpoints.width,t),a.isArray(n)&&Array.prototype.push.apply(e.guiModel.breakpoints.height,n)},onResize:function(e){var t={"min-width":"","max-width":"","min-height":"","max-height":""},n={width:e.$el.width(),height:e.$el.height()};a.each(["width","height"],function(i){a.each(e.guiModel.breakpoints[i],function(e){n[i]<e?t["max-"+i]+=" "+(e-1)+"px":t["min-"+i]+=" "+e+"px"},this)},this),e.$el.attr(t),e.trigger(l.RESIZE,n)},getAdCuePoints:function(e){return e.playlistMetadata&&e.playlistModel?e.adsModel.adCuePoints:null},getDuration:function(e){var t=e.configModel.config;return e.playlistMetadata?t.useSegmentedScrubber?e.playlistMetadata.items.map(function(e){return e.duration}).reduce(function(e,t){return e+t}):e.playlistModel.currentItem.duration:0},onSocialShare:function(e,t){var n,r=encodeURIComponent(e.configModel.config.feed.link);if(!t)return void i.warn("Error: no event data",t);if("facebook"===t)n=this.buildUrlForFacebook(r),this.openFacebookShareWindow(n);else{if("twitter"!==t)return void i.warn("Invalid share type:"+t);n=this.buildUrlForTwitter(r),this.openTwitterShareWindow(n)}n&&i.info("open:"+n)},buildUrlForFacebook:function(e){return"https://www.facebook.com/sharer/sharer.php?u="+e},buildUrlForTwitter:function(e){return"https://twitter.com/intent/tweet?url="+e},openFacebookShareWindow:function(e){r.open(e,"Share","height=600, width=800")},openTwitterShareWindow:function(e){r.open(e,"Share","height=480, width=640")},onFlashStatus:function(e){var t=e.target;e&&e.data&&e.data.flashEnabled&&(t.guiModel.isFlashEnabled=!0)}};a.bindAll(g,"loadGui","createGui","onFlashStatus","onResize"),e.exports=g},function(e,t,n){var i=n(1),r=n(5),a=n(22),o=n(119),s=n(120),l=n(6),d=a.View.extend({SELECTOR:".edge-share-modal",template:o,hidden:!0,isSupported:null,initialize:function(e){i.bindAll(this,"openModal","closeModal","onSuccess","onError","destroy"),this.player=e,this.setElement(this.player.$el.find(this.SELECTOR)),this.$el.on("touchstart click",this.stopPropagation),this.player.$el.on("touchstart click",this.closeModal),this.listenTo(this.player,l.PLAYER_DESTROY,this.destroy),this.listenTo(this.player,l.FULL_SCREEN_CHANGE,this.closeModal),this.isSupported=s.isSupported()},render:function(){return this.$el.html(this.template({isSupported:this.isSupported})),this.$titleDisplay=this.$(".edge-share-modal-title"),this.$messageDisplay=this.$(".edge-share-modal-message"),this.createClipboard(),this},openModal:function(e){this.$titleDisplay.html(e.title),this.$messageDisplay.val(e.message),this.$el.toggleClass("edge-share-modal-active-state",!0),this.hidden=!1},closeModal:function(e){if(!this.hidden){if("edge-endslate-share-icon"===e.target.className&&"span"===e.target.nodeName.toLowerCase())return!1;this.$el.toggleClass("edge-share-modal-active-state",!1),this.hidden=!0}},createClipboard:function(){var e=this.$(".edge-share-modal-copy-btn"),t=this.$(".edge-share-modal-message");this.isSupported?(this.clipboard=new s(e[0],{target:function(){return t[0]}}),this.clipboard.on("success",this.onSuccess),this.clipboard.on("error",this.onError),e.on("mouseleave",function(){e.removeClass("edge-share-modal-tooltipped")})):t.on("click",this.selectContent)},onSuccess:function(e){this.tooltipMessage="Copied!",e.clearSelection(),this.updateToolTip(e.trigger)},onError:function(e){r.os.tablet||r.os.phone?this.tooltipMessage="Selected":/Mac/i.test(navigator.userAgent)?this.tooltipMessage="Press -C to copy":this.tooltipMessage="Press Ctrl+C to copy",this.updateToolTip(e.trigger)},updateToolTip:function(e){e.setAttribute("class","edge-share-modal-copy-btn edge-share-modal-tooltipped"),e.setAttribute("data-tip",this.tooltipMessage)},selectContent:function(){r(this)[0].setSelectionRange(0,r(this)[0].value.length)},stopPropagation:function(e){e.stopPropagation()},destroy:function(){this.player=null,this.clipboard.destroy(),this.stopListening()}});e.exports=d},function(e,t){e.exports=function(e){var t="";Array.prototype.join;return t+='<div class="edge-share-modal-dialog"> \n <div class="edge-share-modal-title"></div>\n <div class="edge-share-modal-message-container">\n  <textarea class="edge-share-modal-message" spellcheck="false"',e.isSupported&&(t+=" readonly"),t+="></textarea>\n </div>\n ",e.isSupported&&(t+='\n <div class="edge-share-modal-copy-btn">Copy</div>\n '),t+="\n</div>\n"}},function(e,t,n){var i,r,a;!function(o,s){r=[e,n(121),n(123),n(124)],i=s,a="function"==typeof i?i.apply(t,r):i,!(void 0!==a&&(e.exports=a))}(this,function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var d=r(t),u=r(n),c=r(i),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return s(t,e),h(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,c.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new d.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);return t?document.querySelector(t):void 0}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof e?[e]:e,n=!!document.queryCommandSupported;return t.forEach(function(e){n=n&&!!document.queryCommandSupported(e)}),n}}]),t}(u.default);e.exports=f})},function(e,t,n){var i,r,a;!function(o,s){r=[e,n(122)],i=s,a="function"==typeof i?i.apply(t,r):i,!(void 0!==a&&(e.exports=a))}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(t),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":a(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},function(e,t){function n(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName){var n=e.hasAttribute("readonly");n||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),n||e.removeAttribute("readonly"),t=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var i=window.getSelection(),r=document.createRange();r.selectNodeContents(e),i.removeAllRanges(),i.addRange(r),t=i.toString()}return t}e.exports=n},function(e,t){function n(){}n.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;r>i;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var a=0,o=i.length;o>a;a++)i[a].fn!==t&&i[a].fn._!==t&&r.push(i[a]);return r.length?n[e]=r:delete n[e],this}},e.exports=n},function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return r(e,t,n);if(s.nodeList(e))return a(e,t,n);if(s.string(e))return o(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function a(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function o(e,t,n){return l(document.body,e,t,n)}var s=n(125),l=n(126);e.exports=i},function(e,t){t.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},t.nodeList=function(e){var n=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===n||"[object HTMLCollection]"===n)&&"length"in e&&(0===e.length||t.node(e[0]))},t.string=function(e){return"string"==typeof e||e instanceof String},t.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},function(e,t,n){function i(e,t,n,i,a){var o=r.apply(this,arguments);return e.addEventListener(n,o,a),{destroy:function(){e.removeEventListener(n,o,a)}}}function r(e,t,n,i){return function(n){n.delegateTarget=a(n.target,t),n.delegateTarget&&i.call(e,n)}}var a=n(127);e.exports=i},function(e,t){function n(e,t){for(;e&&e.nodeType!==i;){if("function"==typeof e.matches&&e.matches(t))return e;e=e.parentNode}}var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}e.exports=n},function(e,t,n){var i=n(1),r=n(43),a=r.CC_CUSTOMIZATION_OPTIONS,o=n(41);e.exports={getCurrentSettings:function(){var e=o.get(o.KEYS.CC_PREFS);return i.extend({},r.DEFAULT_CC_SETTINGS,e)},updateUserPreferences:function(e){if(i.isObject(e)){var t=o.get(o.KEYS.CC_PREFS);o.set(o.KEYS.CC_PREFS,i.extend(t,e))}},translateToCss:function(){var e=this.getCurrentSettings();return{text:[this.getCssProperty("color",this.getRgbaColor(e,"font")),this.getCss(e,"fontStyle"),this.getCss(e,"fontSize")].join("; "),background:this.getCssProperty("background-color",this.getRgbaColor(e,"background")),window:this.getCssProperty("background-color",this.getRgbaColor(e,"window"))}},getRgbaColor:function(e,t){var n=a.color[e[t+"Color"]];return void 0!==n?this.hexToRgba(n.css,e[t+"Opacity"]):void 0},getCss:function(e,t){var n=a[t];if(void 0!==n){var i=n[e[t]];if(void 0!==i)return i.css}return""},getCssProperty:function(e,t){return void 0!==t?e+": "+t+" !important;":""},hexToRgba:function(e,t){if("string"==typeof e&&e.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){var n=e.slice(1);3===n.length&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),n="0x"+n,void 0===t&&(t=1);var i=n>>16&255,r=n>>8&255,a=255&n;return"rgba("+[i,r,a,t].join(",")+")"}}}},function(e,t){e.exports={getInstance:function(){return{$container:null,endSlateUrl:null}}}},function(e,t,n){var i=n(2).getLogger("end-slate-manager"),r=n(1),a=n(3),o=n(6),s=n(81),l={NAME:"EndSlateManager",SELECTOR:".edge-endslate-container",DEFAULT_URL_PATH:"//media.mtvnservices.com/edge/endslate/",getEndSlateUrl:function(e){var t,n=e.configModel.config.endSlateType,a=EdgePlayer.defaultEndslateVersion,o=r.template(this.DEFAULT_URL_PATH+"<%= type %>-"+a+".min.js");return"string"==typeof n&&n.match(/^(none|combo|related|replay|share|byob)$/i)?n=n.toLowerCase():(i.info("Missing or incorrect endSlateType on config. Use the default"),n="replay"),"byob"===n?void 0!==e.configModel.config.endSlateLibURL&&(t=e.configModel.config.endSlateLibURL):t=o({type:n}),t},onConfigLoaded:function(e){var t=e.target,n=t.configModel.config.endSlateType;t.endSlateModel.endSlateUrl=this.getEndSlateUrl(t),this.addEventListeners(t),t.configModel.config.chromeless&&"byob"!=n&&"none"!=n||this.setUpEndslateContainer(t)},addEventListeners:function(e){e.on(o.STATE_CHANGE,this.onStateChange),e.on(o.PLAYLIST_COMPLETE,this.onPlaylistComplete),e.on(o.REPLAY_REQUEST,this.hide)},setUpEndslateContainer:function(e){var t=e.endSlateModel.$container=e.$el.find(this.SELECTOR);0===t.children().length&&("none"===e.configModel.config.endSlateType?t.addClass("edge-endslate-none"):void 0!==e.endSlateModel.endSlateUrl&&this.loadEndSlateLibrary(e))},loadEndSlateLibrary:function(e){a.getExternalModule(e.endSlateModel.endSlateUrl,function(t){new t({player:e,log:EdgePlayer.log.getLogger("EdgeEndSlate")})})},onPlaylistComplete:function(e){var t=e.target;t&&t.$el&&t.playlistCompleted&&(t.$el.addClass(s.ENDSLATE_ACTIVE),t.trigger(o.ENDSLATE_SHOW));
},onStateChange:function(e){"playing"===e.data&&this.hide(e)},hide:function(e){var t=e.target;t.trigger(o.ENDSLATE_HIDE),t.$el.removeClass(s.ENDSLATE_ACTIVE)}};r.bindAll(l,"loadEndSlateLibrary","onConfigLoaded","getEndSlateUrl","onPlaylistComplete","onStateChange","hide"),e.exports=l},function(e,t){e.exports={getInstance:function(){return{$element:null,loadingError:null,hasBeenShown:!1}}}},function(e,t,n){var i=n(2).getLogger("loading-icon-view"),r=n(1),a=n(6),o=n(22),s=o.View.extend({SELECTOR:".edge-spinner",hidden:!0,isActive:!0,initialize:function(e){r.bindAll(this,"showIcon","hideIcon","onStateChange","onFlashStatus"),this.player=e,this.setElement(this.player.$el.find(this.SELECTOR)),this.player.configModel.config.useNativeControls||(this.listenTo(this.player,a.STATE_CHANGE,this.onStateChange),this.listenTo(this.player,a.BUFFERING_WAITING,this.showIcon),this.listenTo(this.player,a.PLAYLIST_COMPLETE,this.hideIcon)),this.listenTo(this.player,a.BENTO_AD_BREAK_STARTED,this.showIcon),this.listenTo(this.player,a.BENTO_AD_STARTED,this.hideIcon),this.listenTo(this.player,a.BENTO_AD_BREAK_ENDED,this.showIcon),this.listenTo(this.player,a.MEDIA_START,this.hideIcon),this.listenTo(this.player,a.FLASH_PLUGIN_STATUS,this.onFlashStatus)},render:function(){return this.$el.addClass("edge-spinner-hidden"),this.$el.append("<div id='edge-custom-spinner'><div class='edge-spinner-icon'></div></div>"),this},onStateChange:function(e){this.player.playbackModel.isBuffering?(i.debug("show loading icon, state:"+e.data),this.showIcon()):(i.debug("hide icon, state:"+e.data),this.hideIcon())},hideIcon:function(){this.isActive&&!this.hidden&&(this.$el.addClass("edge-spinner-hidden"),this.hidden=!0)},showIcon:function(){this.isActive&&this.hidden&&(this.$el.removeClass("edge-spinner-hidden"),this.hidden=!1)},onFlashStatus:function(e){e.data.flashEnabled||this.hideIcon(),this.isActive=e.data.flashEnabled},destroy:function(){this.player=null,this.stopListening()}});e.exports=s},function(e,t,n){var i=n(4).window,r=i.document,a=n(1),o=n(17),s=n(16);i[s.PLAYER_READY]||(i[s.PLAYER_READY]=[]);var l=i[s.PLAYER_READY];e.exports=function(e){e.getPlayers=function(){return a.map(o.instances,function(e){return e.player})},e.getPlayer=function(e){var t=o.instances,n=t.length;if(!e&&n>0)return t[0].player;for(n;n--;)if(t[n].player.config.uri===e)return t[n].player;return null},e.gc=function(){var e=function(e){for(;e.parentNode;)if(e=e.parentNode,e===r)return!0;return!1},t=o.instances,n=t.length;for(n;n--;){var i=t[n].player,a=i.$el?i.$el[0]:null;a&&e(a)||(t.splice(n,1),i.destroy())}},e.createPlayers=function(t,n,i){return e.Player(t,n,i)},e.onPlayer=function(e){l.push(e)},e.removeOnPlayer=function(e){var t=l.indexOf(e);-1!==t&&l.splice(t,1)},e.destroy=function(){for(var e=o.instances,t=e.length;t>0;t--)e[t-1].player.destroy();a.each(s,function(e){delete i[e]}),delete i.EdgePlayer,delete i.MTVNPlayer}}},function(e,t,n){function i(e,t){var n="MTVNPlayer:",i=function(e){var i=e.type.replace(n,""),r=o.rest(o.toArray(arguments)),a=t[i];o.isFunction(a)&&a.apply(t,r)},r=MTVNPlayer.Player.prototype;for(var a in r)r.hasOwnProperty(a)&&e.bind(n+a,i);return t}function r(e,t,n){var r=new MTVNPlayer.Player(e[0],t,n);return i(e,r)}function a(e){var t,n;e=e||{},s.isFunction(e)&&(e={callback:e}),t=s.isFunction(e.callback)?e.callback:function(){},n=this.not(function(){return!s(this).data("contenturi")}),n.length>0?n.each(function(){t(r(s(this),o.clone(e.config),e.events))}):t()}var o=n(1),s=n(5);e.exports={init:function(){s.fn.player=a,window.$&&(window.$.fn.player=a),s(function(){s(".MTVNPlayer").addClass("pjs"),s(".pjs[data-auto-create]").player()})}}},function(e,t,n){var i=n(136);"string"==typeof i&&(i=[[e.id,i,""]]);n(139)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){t=e.exports=n(137)(),t.push([e.id,".edge-placeholder {\n	cursor: pointer;\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	background-color: black;\n}\n.edge-placeholder-button {\n	background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIIAAACCCAYAAACKAxD9AAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAPSElEQVR4Ae2dC4xU5RXHu7wWF9xFUd66U8DVKq1ixBJrVKKCgVJLNCFKSTTBujxqKFFSxVepNcZqSU20DVoTEVJKVLRpBQoGFxBWxKxIQHktW7suCogsr4Xdle3/N+6d3h3vPO7svTP3znwn+e99zne/75z/nHO+x50t+l7+SrGa1kcoa9+Watu9HT1s+5xDWmxotu0f1f4RobF9e1rbvJOiPGkRRh8oDBLOEyBAT8EPOaVCIcYhoUHYL4SeHGElQjcpH8MPFjB+XyFXbWnTs78SIMXnAsRoFUIluVJeJkqirhi+QogIkCGIAgnqhF0CxIAogZcwEOFcaRHjDxdKAq/RjhU8qcM9AqQ43PFSsI6CTISIVHWF0C9YKsu4Ngf0yY+EuoxL8PGDQSMC9RkqjBTwBPkoeIYaoVYITNgIChGoB+4fD0B3rxCE7igegrCRc0IEgQgDpIhrhXz1AGpaUsFDbBC+SHqXzxdzSQT6+aOFi4Rc1sNnFadVPB5ht1AtME6RdcmVAS5VS0cJxVlvcbAfyMDUB8KObFcz20TopQbeKBAOjCTWAGHiHeFE4lu8vdLV2+KSlnaBro4X+iS9y1xEA70FkmfyB+Y6fJdsEAGvc7VAQmhN8PjesDx4ACOnDKKxbfC7PX6HBhMKvLGg76HCT49wjnQwUSjUbqE3FPi2FELFMKFe8KVX4RcRSAYnCGcJRrzRQA8VQ6j4UjjuTZH/L8UPIpSr+HECFTfirQbIF/AMJJGMTHomXhPhYtVsjOB1uZ41OA8K6qI2MB9D15J1EJ6IlwaDBNcLfiegnjQ85IWg44hAiPCEDF4RgXCAJzAkkBKyKBfqWRCh02HCCyKQGJITeFGWijHiQgOWZ9ivz3Qqgeys8egi0jswiaEL63l8KzlDRPhMyLhr2RkiMFjEOIHpIkoJORZ6ExGBxS4sy3ctmRIBl3SLYAaLXKvctw/glVnWx0IX15IpEZg7YHDDSLA0wAgkNmX1tCvJhAjMIjKBhFcwEjwN9FeVDgquZi1JNNwIecEYwZDAjdayey+2wUbYKm1xS4QbVXLPtEs3N+ZKA9gIW6UtbkIDy8uAkXBogHyhSSBMpJR0PQIMY42hkXBpAJul5cHTJcJoFVgcLh2Y2rbbDNullHSIwBAyS86NhFMD2A4bJpVURCADNV3FpCoM/MW0bJiKCBVqphk9DLytU1YQG2LLhJKMCDCJdxGN5IcGsCU2dZRkRBiqTxTKC6mOysmzk9gSmzpKMiKMdPyEORlmDSS0aSIiRNRakxuE2eTOdcemEadLiYgQ5tyAOBgPp7YX6jlH2zoRAdYwrx02wfgMmbNIg7l5BsDYco52ct3It7b9jrd3mmu4XNpiKjNMYpEAwzOkyqopiMC7lrTRkEBKsEmr9uttx9Fviv0YhYVxwQnfeIx+1sKFf7l5//6GOU1NJx/etGnj1JtvvmmYzp/NNcHyEIVODGzcQQfxHmGIbgjbDCMNoh09n3hi/ujZs389oXfv3iXdJEOGDDl/ypQpI6+8cmTZunVVXx47dvxMvAJ0XIjCl4ZX545ajY8nwlW68J34Yd0c0C1EIC8oee65P03o169fH3s9i4qKulxyySWD7rnnnpHix5l336061NbW5pQb2T9WCPvobZ/VULtCUGbEuhCiLQ2iHV3LyyMJc5vS0tJe8+Y9PGHnzk9/eeutEy/W/czXlwiFGi4iajs2j4qdCPy2cexC+/WwbCBDV4WElEvrhw8fPmj58jfvWrVq5e3Dhn0f4kAIEsxCIwS2xuZRsROB3zkOq0CEtEXhomjs2LGXf/zxtpkLFvzx+m7dupTqw3gHehooCL24KlP3h1FiNrcTYVAYW2Krs2vDlZSU9Jw9e/bYPXv2zpg6dcplKovehT1c2PVje1Te7MZsbjWUbwI/dV+QUl5efv6iRa9Orap6944RIy7jW2J1N/N9HAKbY/vYOAKxwvU3igLySa677rofbNmyZfqLLy68Sc6C3gdLwskfIEQ+hgtsHs0TLI8QcxG6UNBSXFzcY9q0aTcoXMycPv1exuUt78A3h+52vhEianuLCOcVtPUdGj9w4MBzXnjhz5M3b37/F1dffRW/Q0Dvgl5JvoWLqO0tInQYhHHQS8GeGjVq1EUbNrxXuXjxq+PLys5msI1wgXfIF0JEbQ8RaFRaa991X0FK9+7du2mo+pq9e2tnPfDA/bwAbHU3GXsIe3cT2xdDBOMNpIR0pG/fvqVPP/30pG3btt49ZswNQ/UZ8gcrmSR/CGvC3QcimHWJUoIbGTHih+Vr1qyZ9sYbr/+sf//zibHkD2EOF2XGI7hhgO3eLl26dJ00adKonTt3/Wr+/Mev0SUrXECIsIWLqEegAUYy1EBZWVmvRx559KdMZk2cOKFCxVi9izDNXZTiEaiwkU5qoKKiYtBbb/3j7pUr376tvPwCJrPsg1FBzx96QAS6QUY80ABrH8aNu+WK7dt3zHr22Wfsk1lB9w7dDRE8IEB8Eb169eo5Z86ccbt375l+5513MJmFdwgyGQwR4o3o5XEkEum3ZMmSqUuX/m28ymVW05qz8PIxXpRliOCFFlOUUTR58uSfzJ17P6vD8Qp44aCNNxgipDCiZ5fvuuvuH6uwQHsEzxprCkqsAa15oCcR2NlL3FRGP9mauMnmipMGTp8+3azzbe1wuiWX51oMEbKk/travbxH8I0QRDIYImSDB3qPou2pp56q0rPwvpAhaNLCmDguy4hPGmiVPPPMH1a89tobe/UIdM3bVniFIEkzRDA5gk8m2bp1675Zs2a9rYUtn+sRTQIvnwaNBLQ+6hEMEVCFh3Lo0KHGJ5/8/ZoFC/70sYqFAKcFSGDlCNoNlESJEHsRMlBVC2FlWlpaWpctW/b+zJkzqhobjx1TEyAAXzTLEwTRG6Dpo4SGI+wZ6ZwGPvzwwz0zZkxfuXnzli9U0imBfAACBDEnULU6yBGI0On/ENahyAI7OHDgy6/nz//d6ueff2G7mk4YgAB4AQgAwiCNxiNkaKbm5uaWJUsWV993331Vx4+f5J9xhiUMOLU46hFoAK7MrGR2UpHDuerqTbtmzJixsqZm64F23YUpDMS3CNufxiMg5Akpf7g5emcB/2loaDj82GOPrnrppZc/lRrCGgbiLRjNES0iHNJVQ4R4FbUfM0+waNErGxUG1p861XxSp/kWkQdY3cGg9gbaW5B0g+1jP4zRoP0RSW8v0Ivr16//ZPr0ylXbt3+CwiBAmMOAkxWxfYwI+7UPq4O2YII65kTq6+sPzpv30KpFixbvVgXCMCiUiZ6wObaPEYGE8Suh4F+GbWpqOv3yy3/doDWHG5ubW/MtDGBzu2BzbB8jAvu4iEImQtvatWt3VFbe++9du/ZYYcAaFQzDoBA2dCvRsMCHrGSRfSZGfsROoUldXd2BBx/8zYqlS5cxQ0gewLckyHMDXpkIm0fFTgRiBY23n/v2rnD8dZ25nzhx4tTChQvXzZ37wKbW1jNWHpAvvYFUVsPW0fyAG+1G50KdMFwIm7giAQtFVq9evY0wsG/ff75WY63uIDrI1zAQb9M6naC9UWGpml122Q9CtA8RvmlsbGSoN6nU1tbuv/32217RG0mviQSMDB4XrG6hNS6QtIw8udjB1naPQPuIGWTKvIwRFoEEfItb6+v/e5CXUp0qfvz4sZOaGKp66KF5m8+cKbgwEK8SbBzLD7jI8up4gQT9408G+JixD9BVv5v4jX5Is8PAmKLAmRUr3v5o/Pjxf3/99eU7dezUJQxw83yp2icqtd5eshMRUNSl9ptCsA8R2jZu3HR48OCBbXozeQB5QE1NTW1lZeXyxx//bXVj41Gm260QYOUCIWiaL1Vcr1JJjmOSaCTx57qjX+yu4O9EPYKq2V3o0Q7OEfMxujUsbOUArpJLfT6fhLzozfgGOXkE7uGbMyz+5oAfx3IF1RPD20GXsFB6A6nM9J5uiM442m+MTxata3XaOSyE6X83RHsOqjMGj5dC9gB2XWDTOvsJaz+++2idZ1tjPwjRPkaPR4iq72tVE9o0GRFqVSWzntFXu2S1cGyJTR0lGRH4Vn3k+ClzMowawJYJQ2QyItBYRp+IK0bCrQFsiC0TSioiwKANQkImJSzZXAiKBtKyYSoi0Bhe2GCVjpFwagDbYcOkkg4RKKBaiK5kSVqauRg0DWAzbJdSEg0oxX+Q0TkGZS6Mv2COA60BSBBbc5Cspul6BMrYIaR0MckeZq5lVQPYCpulJW6IQIHvCAw/Gwm2BrARtkpb0g0NVoGEB7oiw4VEE1bWvWabGw3QS1gjsAA3bXFLBArm9xSYoxjAgZHAaWCrasR6A1fiNjRYhX+gHZMvWNoIzhabYBvXkikRcD/EoJRrBF3XyHwgUw1gC2yS0eBfJqHBqij5Qr1AvkCoMJI7DTBe8E8h459B6gwRaDbZKT8kOUzI1Lvoo0Y6oQHGeFYKrpLD+Od1lgiUx3JwehJDBdOTkBKyKCzCoYfQYUVyJs/3ggg8l7luYlREMJI9DazTo/Z68TiviEBdeLMW78AwtPEMUoKPgieABDu9eoaXRKBOkAFEBJMzSAk+CDkB4cATT2DVz2siUC5hgomOiGB6E1KCh0LvgMSw0zlBfJ38IALPIER8JkQE3jMw0nkNkIPRRexU7yBRNfwiAs+ja1kr8KJMb8FI5hpgxHCFkPE4QapH+0kEns2gE2vleE5/wSSRUoILYZSQuYO1Ai/s+CZ+E8GqODHtoHCBYPIGSyvJt3hUkkLXE0jJi3W+mi0i8HTc2h7BhAq0kVwIBf8SfMkHnB6dK1fN29ajhGKnShXwOXoFzB6mvbLIK13ligjUv6cwWrhIyGU99PicC7nAbqFaICRkXYJggAFq9bXCuVlvfTAeyDzNBoFwkDMJAhFoPPWoEK4QyoRCEAbeeA2NXlVGawi8VFJQiGC1ifoMFUYK+eoh8AC8lcwYS84JoDpEJWhEsOrFNiLgIehl5IPwSyV4gLogNibIRLD0hWcgbAwXSqyTIdmeVD3pMuP+8QSBlTAQwVIedR0sQIqIENSBqVbVrU7A+AykBcb9qy4JJUxEsDcCEgwUIMYgoa+Qq7ZgaKbeGwQMz8wrZAiV5Ep5XiuJgSmIASnOE/oIjFP4IfTzjwiM+mF8DM9AUKglX4jgZATIASHojrItFXoI3R2gU9EJMibJ7GjWMUPjGJ7uHtvQG11t+I78D4IParw+w3FXAAAAAElFTkSuQmCC) center;\n	opacity: 0.95;\n	filter: alpha(opacity=95);\n	top: 0;\n	left: 0;\n	height: 100%;\n	width: 100%;\n	position: absolute;\n}\n.edge-placeholder-image {\n	width: 100%;\n	height: 100%;\n	background-size: contain;\n	background-repeat: no-repeat;\n	background-position: center center;\n}\n.edge-placeholder-button:hover {\n	opacity: 1.0;\n	filter: alpha(opacity=100);\n}\n.edge-spinner{\n	top: 0;\n	left: 0;\n	position: absolute;\n	width:100%;\n	height:100%;\n	background:black;\n	display: -webkit-box;\n	display: -webkit-flex;\n	display: -ms-flexbox;\n	display: -moz-box;\n	display: flex;\n	-webkit-box-pack: center;\n	-moz-box-pack: center;\n	-ms-box-pack: center;\n	-ms-flex-pack: center;\n	-webkit-justify-content: center;\n	-moz-justify-content: center;\n	justify-content: center;\n	-webkit-box-align: center;\n	-ms-box-align: center;\n	-moz-box-align: center;\n	-ms-flex-align: center;\n	-webkit-align-items: center;\n	-moz-align-items: center;\n	align-items: center;\n	transition: opacity .4s linear;\n	pointer-events: none;\n}\n.edge-spinner-hidden {\n	opacity: 0;\n	pointer-events: none;\n}\n#edge-custom-spinner {\n	background-repeat: no-repeat;\n	background-size: contain;\n	background-position: center;\n}\n.edge-spinner-icon {\n	background: no-repeat  url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABHCAYAAAC6cjEhAAAKQWlDQ1BJQ0MgUHJvZmlsZQAASA2dlndUU9kWh8+9N73QEiIgJfQaegkg0jtIFQRRiUmAUAKGhCZ2RAVGFBEpVmRUwAFHhyJjRRQLg4Ji1wnyEFDGwVFEReXdjGsJ7601896a/cdZ39nnt9fZZ+9917oAUPyCBMJ0WAGANKFYFO7rwVwSE8vE9wIYEAEOWAHA4WZmBEf4RALU/L09mZmoSMaz9u4ugGS72yy/UCZz1v9/kSI3QyQGAApF1TY8fiYX5QKUU7PFGTL/BMr0lSkyhjEyFqEJoqwi48SvbPan5iu7yZiXJuShGlnOGbw0noy7UN6aJeGjjAShXJgl4GejfAdlvVRJmgDl9yjT0/icTAAwFJlfzOcmoWyJMkUUGe6J8gIACJTEObxyDov5OWieAHimZ+SKBIlJYqYR15hp5ejIZvrxs1P5YjErlMNN4Yh4TM/0tAyOMBeAr2+WRQElWW2ZaJHtrRzt7VnW5mj5v9nfHn5T/T3IevtV8Sbsz55BjJ5Z32zsrC+9FgD2JFqbHbO+lVUAtG0GQOXhrE/vIADyBQC03pzzHoZsXpLE4gwnC4vs7GxzAZ9rLivoN/ufgm/Kv4Y595nL7vtWO6YXP4EjSRUzZUXlpqemS0TMzAwOl89k/fcQ/+PAOWnNycMsnJ/AF/GF6FVR6JQJhIlou4U8gViQLmQKhH/V4X8YNicHGX6daxRodV8AfYU5ULhJB8hvPQBDIwMkbj96An3rWxAxCsi+vGitka9zjzJ6/uf6Hwtcim7hTEEiU+b2DI9kciWiLBmj34RswQISkAd0oAo0gS4wAixgDRyAM3AD3iAAhIBIEAOWAy5IAmlABLJBPtgACkEx2AF2g2pwANSBetAEToI2cAZcBFfADXALDIBHQAqGwUswAd6BaQiC8BAVokGqkBakD5lC1hAbWgh5Q0FQOBQDxUOJkBCSQPnQJqgYKoOqoUNQPfQjdBq6CF2D+qAH0CA0Bv0BfYQRmALTYQ3YALaA2bA7HAhHwsvgRHgVnAcXwNvhSrgWPg63whfhG/AALIVfwpMIQMgIA9FGWAgb8URCkFgkAREha5EipAKpRZqQDqQbuY1IkXHkAwaHoWGYGBbGGeOHWYzhYlZh1mJKMNWYY5hWTBfmNmYQM4H5gqVi1bGmWCesP3YJNhGbjS3EVmCPYFuwl7ED2GHsOxwOx8AZ4hxwfrgYXDJuNa4Etw/XjLuA68MN4SbxeLwq3hTvgg/Bc/BifCG+Cn8cfx7fjx/GvyeQCVoEa4IPIZYgJGwkVBAaCOcI/YQRwjRRgahPdCKGEHnEXGIpsY7YQbxJHCZOkxRJhiQXUiQpmbSBVElqIl0mPSa9IZPJOmRHchhZQF5PriSfIF8lD5I/UJQoJhRPShxFQtlOOUq5QHlAeUOlUg2obtRYqpi6nVpPvUR9Sn0vR5Mzl/OX48mtk6uRa5Xrl3slT5TXl3eXXy6fJ18hf0r+pvy4AlHBQMFTgaOwVqFG4bTCPYVJRZqilWKIYppiiWKD4jXFUSW8koGStxJPqUDpsNIlpSEaQtOledK4tE20Otpl2jAdRzek+9OT6cX0H+i99AllJWVb5SjlHOUa5bPKUgbCMGD4M1IZpYyTjLuMj/M05rnP48/bNq9pXv+8KZX5Km4qfJUilWaVAZWPqkxVb9UU1Z2qbapP1DBqJmphatlq+9Uuq43Pp893ns+dXzT/5PyH6rC6iXq4+mr1w+o96pMamhq+GhkaVRqXNMY1GZpumsma5ZrnNMe0aFoLtQRa5VrntV4wlZnuzFRmJbOLOaGtru2nLdE+pN2rPa1jqLNYZ6NOs84TXZIuWzdBt1y3U3dCT0svWC9fr1HvoT5Rn62fpL9Hv1t/ysDQINpgi0GbwaihiqG/YZ5ho+FjI6qRq9Eqo1qjO8Y4Y7ZxivE+41smsImdSZJJjclNU9jU3lRgus+0zwxr5mgmNKs1u8eisNxZWaxG1qA5wzzIfKN5m/krCz2LWIudFt0WXyztLFMt6ywfWSlZBVhttOqw+sPaxJprXWN9x4Zq42Ozzqbd5rWtqS3fdr/tfTuaXbDdFrtOu8/2DvYi+yb7MQc9h3iHvQ732HR2KLuEfdUR6+jhuM7xjOMHJ3snsdNJp9+dWc4pzg3OowsMF/AX1C0YctFx4bgccpEuZC6MX3hwodRV25XjWuv6zE3Xjed2xG3E3dg92f24+ysPSw+RR4vHlKeT5xrPC16Il69XkVevt5L3Yu9q76c+Oj6JPo0+E752vqt9L/hh/QL9dvrd89fw5/rX+08EOASsCegKpARGBFYHPgsyCRIFdQTDwQHBu4IfL9JfJFzUFgJC/EN2hTwJNQxdFfpzGC4sNKwm7Hm4VXh+eHcELWJFREPEu0iPyNLIR4uNFksWd0bJR8VF1UdNRXtFl0VLl1gsWbPkRoxajCCmPRYfGxV7JHZyqffS3UuH4+ziCuPuLjNclrPs2nK15anLz66QX8FZcSoeGx8d3xD/iRPCqeVMrvRfuXflBNeTu4f7kufGK+eN8V34ZfyRBJeEsoTRRJfEXYljSa5JFUnjAk9BteB1sl/ygeSplJCUoykzqdGpzWmEtPi000IlYYqwK10zPSe9L8M0ozBDuspp1e5VE6JA0ZFMKHNZZruYjv5M9UiMJJslg1kLs2qy3mdHZZ/KUcwR5vTkmuRuyx3J88n7fjVmNXd1Z752/ob8wTXuaw6thdauXNu5Tnddwbrh9b7rj20gbUjZ8MtGy41lG99uit7UUaBRsL5gaLPv5sZCuUJR4b0tzlsObMVsFWzt3WazrWrblyJe0fViy+KK4k8l3JLr31l9V/ndzPaE7b2l9qX7d+B2CHfc3em681iZYlle2dCu4F2t5czyovK3u1fsvlZhW3FgD2mPZI+0MqiyvUqvakfVp+qk6oEaj5rmvep7t+2d2sfb17/fbX/TAY0DxQc+HhQcvH/I91BrrUFtxWHc4azDz+ui6rq/Z39ff0TtSPGRz0eFR6XHwo911TvU1zeoN5Q2wo2SxrHjccdv/eD1Q3sTq+lQM6O5+AQ4ITnx4sf4H++eDDzZeYp9qukn/Z/2ttBailqh1tzWibakNml7THvf6YDTnR3OHS0/m/989Iz2mZqzymdLz5HOFZybOZ93fvJCxoXxi4kXhzpXdD66tOTSna6wrt7LgZevXvG5cqnbvfv8VZerZ645XTt9nX297Yb9jdYeu56WX+x+aem172296XCz/ZbjrY6+BX3n+l37L972un3ljv+dGwOLBvruLr57/17cPel93v3RB6kPXj/Mejj9aP1j7OOiJwpPKp6qP6391fjXZqm99Oyg12DPs4hnj4a4Qy//lfmvT8MFz6nPK0a0RupHrUfPjPmM3Xqx9MXwy4yX0+OFvyn+tveV0auffnf7vWdiycTwa9HrmT9K3qi+OfrW9m3nZOjk03dp76anit6rvj/2gf2h+2P0x5Hp7E/4T5WfjT93fAn88ngmbWbm3/eE8/syOll+AAAKQElEQVR4AeWbW6xdVRWGeyo3RZCKVLFYBKVcTFAalSZCtAkqXmKi8OTlpfGBRKNG4yU++QIvxsQI4cWoaOKTiSFRohEwqaKJ4BW0ilqkUgSjAhaLUi3H79vd/2HsedbaZ+/2nMPZ7Uj+M8Ycc645x/jXXHPNtfY6c+tWUebn589iuJcDtTgTPBecDJ4D5sB/wL/BE+Ah8ADYC+6dm5vbg14VMZAVE4g4ic5fC14FLgYbgGOuH2rtScpp8yjtfw7uBD+AKAlcEXHAZRcIuYhOXw+2AclpiUii6taetOzM2glugSDJWlYxiGUTCHFmvBN4uRwJGfXYaneRpm8X+AoE3YFeFlkWYiBEIt4HzgX2WTEusVrXZVeffdZytTPe72jzWQi6B31EYoeHLRDionk12A4SnLor6OrrsuOLrv1UX/VnzLb+m8RwPQTtQx+W2PFhCaRs4cBrwGmgL8A2iZpA7KV07SNtx42XukeI65OQ8zP01GInUwmEeMyV4F2gDTRBqWtdlx3ftHpc33V87XlwA/gyBGlPLB48sUDKcTTeAV4N2iBSTqJd5dRVXW2Pmbacceqx1ad9K/gU5BxATyQGMZFAyok0/ADYCmS/C7hH/Cmr+2TcmTQppU+nLkS05fjfTMWN5OAmciLJgGMbD0n5MI3OGTbMgNE5yymr44uOzwXRu8Z94EHg7nY/yGbt2djuhjeBzeAC4Ax9AUgfVbe25daHa+C7G72DmeOueqzYwViBlGfRwEXWTVsGXUp3kfEjjv8hQe1BTy3E4ZbAtU20JBlPHXNcfO51riGO/6F7xQ7GCgG9lwaXgnGD1boaoGfmZnD7UoHQZiIhHte5q8D7gXfEjBddY+mzbyaeT3Bsr3hgrxDEG6h0J9s3QOtPcAc55jbwLQJYctrSbmohNi+3HeA94ARgLBm/jast03TdtcR2k0aXeECnMPBLqPgI8FJqO+4rG9hu8EUG/Tt6xYU4X8wg14FLwKTEGP9/wdXE+Wv0IukkhsG8A30MnDE8oo+I1u9T79cYzEFXTYjXGfMZ8A7QxtRXpum6P4O3Eu+iWS3DXXIFztNB1y25z+d1+6XVJsXgGfMA+DTmFyxOgZfS9kNgkdjJiMD+RhwfBceB1C81mE+2Px3p6BkqEP/bGPpzw9jHxW2E1nt3ehPxuwQsSNeMcTrqd2Y8NdR1luir+PZaIYW4nD23oK4H5lDRR1IuQ5o/LSPEwLYL7nmgElHtlqhf0va7T3e3ZqwbieR7oJJhrn3l7eTu4r0gI8Tg3Q4qEdVuSfkLbb/OGbLNmpJhTB8nqN+DPjKqX3tkrVkgZri2uP1uCTDx1ncQ31cJ4En0mhRi807zQWDsLQltWR6uhIMt6IEsEENpK+iaIZUUbfETBv4rek0LMbqgfgOYZ8jos61/NxjIgBiYUl8MKjGtHYLco9w6OHo2/nyeMJ3Z5hhSokNW9FVDLgYNTe8c4BY7yfdpyfJB8J/omRBifZhAbwJJPjrkROt/EbgMLBBzPnY7Q7rKMr/TA2dMbiBef24x+UpESKr+t5ibjZSzQYjomy36/8AZyHsTj5sJIebHCNQTGlL6tARdblLruaZ8q+UzUYhR95Gzi7pZlexrWlLqrNF+BZyc7rbfTV1IsaIV6/RLlvuCWRVvGJWE5FFzjn2p7NWHxcyUzJqU1Q8wJfent1nTxO5rkLtAZowk9NlbrHg+yIwJIV1l9wSzLjtJIIT0kWL9eV5KG4AzQkdEYpT4LP9t4JntPy4FEhJJfimr9W2RGBffzBDMBTK0Q5D2P/wz4/JH4q/E1HQqSRsl5nhQCah2bTyz60vJ3llfc6p2abbulC5iaoNK0oFaMaP248TdN2NqSqdKjA3rGiMZYbLavumadXHWm4dXiTnWE1/LJ0iKD4U2kBzRZ0viTAu3bHP7DTBviVAHtbxLp88/HtCHEOYrwKNBbieJSoaEtLjNBq4dlZQQEZ06715Hg1xLEn8C5u5vZiFJLUH3gesseN2ZfEtECIn/NNrMvHA5+WZvO/gOcL0xz8yY72NfYRvXDT8R9T1EKx4Q0T4qiDEhEt/Lg+LbMS8CrwROkHvw/wo9EIl5BLQkHKo99Dd1PmzeWStm2YYE83IhFotEppwxNhJeNrFrWf9GWPbblWNCJMYPdyoZsUNStP7NxwQrJLmeKeUbOZ+DKgGxq9beDI4JccYoe8G4mWKdxGzicvJLiKNeQsz9ZBpiWp1Zo9/2/swyc8IJnQO+yvXWPJBqxxcdYh7E4X6mkpBZUrX2BXQ4U5s94nUjlw+gJGcAfL0yIGZ46/JdhYm3RFSfxHmM9/6ZEEhwS1J3uNnMDfSQpIVZlKQyYyzfC0JC1V2z6GV0+Lx0sla1SRObxKgrIW15UQoLxDBr3M/sASGlElLt1F82PBuLOl0LDmKTCG8ULQm1HHuBh8TeOtwSd5EQMqo+lbbbhgGkv7WkJSXrSp0tffZI7CPEMGt89edCXAmI3UXYJtr6vLGmhJMlKb4mqSSYq6i+2OY4IiPEDGt8HjoIbNySYTm+2BcSiM9Ra0KIRUK8a4aI6JAQXUkylxFZRAyzxi8Z/Ck2M6VLh5zUvYaAzh/p+RkoEIPPcqeAJD+Jfmp4Vx6JeBExw9q70b44TuKTaGfOVuB1varCmG7eJMRPWSYhI22Ms/Ndtg06hYH8hfKNQPImISZtfO76BWfBF0IrLsTp7ditw/GgncmJqUsb2xPEuegysqKXGCsZ1MvjEs0p4ECuUfeD3Qzsy/ZlF2IzdmeIM0UxxmmIeZLYen8SGkvMYLT5ef/z5OzhwJMQVIPzRftusLfvzFA3lRRCnCXGn5jquPH1ab8kH/udzyTEeCm9DrywBIE59uzUILUl6CHwMAH9Cz21QIgLqzPkZBBCMk50FxHWKalzBu8nDsu9siQxHklQXseXgw2WkQwS3RVYfNG21ZYkd9ku7q5DfgLmAmid4uItHFMyTgQngax16a/ViSXj1LK2IimPL0WKDScixoZDcrZhnmGxBwk29SlPomubattXX7nWtWOmHO16MhEptBucBfWSAsue1R+Dvp2xASgJpJYP1XT/TbtamxMWnbqUo/Vrd5XjVztLJyaFtpMTY2PI8czdBX4LKgHVpmog8Vlo7fgGDSf40ybuIUk8h6fcam/JU5GSztPxVJpLy3/Y9FbuFjyJZ8qnrK6+Lju+Pl37SJvqq2NVvzP8MUjpvSVT3yv1TPQ26quAHDdV/v/BWaAvwPj7koq/1TXJ1FVf+u3yeefbN5zhmNPLERGT4SDIXykvBG62asBdQfclGX90e2z1t3UZ0zucs8Q15YhkWYhJBBDkHetcIEFtIm0ybX0tT2KHDLWbtUchRGKWRZaVmEQEQe53zgQS5Rg10SRUfdVeisDU+9jhJePCOnYXS5upZUWISRQQ5EbNRVqivNzctCWxEDRN2QXVXzP2qSHEY1dEVpSYNmKI8gWS23p3ssJdreQZhzBRkxfuUtXOhgEgQt+qyP8BEGGxkSCixNsAAAAASUVORK5CYII=) center;\n	-webkit-animation: spin 700ms infinite linear;\n	-moz-animation: spin 700ms infinite linear;\n	animation: spin 700ms infinite linear;\n	width:70px;\n	height:70px;\n	background-size: 75%;\n}\n.edge-spinner-hidden #edge-custom-spinner,\n.edge-spinner-hidden .edge-spinner-icon {\n	display: none;\n	background: none;\n	webkit-animation: none;\n	-moz-animation: none;\n	animation: none;\n}\n\n@-webkit-keyframes spin {\n	from {\n		-webkit-transform: rotate(0deg);\n	}\n	to {\n		-webkit-transform: rotate(360deg);\n	}\n}\n@-moz-keyframes spin {\n	from {\n		-moz-transform: rotate(0deg);\n	}\n	to {\n		-moz-transform: rotate(360deg);\n	}\n}\n@keyframes spin {\n	from {\n		transform: rotate(0deg);\n	}\n	to {\n		transform: rotate(360deg);\n	}\n}\n\n.edge-overlay-container {\n	top: 0;\n	left: 0;\n	height: 100%;\n	width: 100%;\n	position: absolute;\n	pointer-events: none;\n}\n.pjs {\n	background-color: black;\n	position: relative;\n	margin: 0;\n	padding: 0;\n	border: 0;\n	font-family: 'Open Sans', Arial, sans-serif;\n	font-size: 14px;\n	vertical-align: baseline;\n	text-decoration: none;\n	text-align: left;\n	font-weight: normal;\n	font-style: normal;\n	line-height: 1;\n	-webkit-text-size-adjust: none;\n	-moz-text-size-adjust: none;\n	-ms-text-size-adjust: none;\n}\n.pjs.edge-player {\n	overflow: hidden;\n}\n.pjs *{\n	-webkit-box-sizing: border-box;\n	-moz-box-sizing: border-box;\n	box-sizing: border-box;\n}\n\n.pjs video {\n	object-fit: contain;\n}\n.pjs video.edge-player-ads-element {\n	visibility: hidden;\n	background-color: black;\n}\n.pjs:not(.edge-native-platform) video::-webkit-media-controls-start-playback-button {\n	display: none !important;\n}\n\n.pjs.edge-fullscreen-fixed {\n	position: fixed !important;\n	left: 0;\n	top: 0;\n	z-index: 2147483645; /* Max z-index */\n}\n.pjs.edge-fullscreen-active-state video {\n	position: absolute;\n	height: auto;\n	margin: auto 0;\n	top: 0;\n	left: 0;\n	right: 0;\n	bottom: 0;\n	object-fit: contain;\n}\n.mtvn-captionator {\n	pointer-events: none;\n}\n.mtvn-simple-cc {\n	pointer-events: none;\n	position: absolute;\n	width: 100%;\n	bottom: 10px;\n	left: 10%;\n}\n.mtvn-cc-panel-container {\n	padding: 10px;\n}\n.mtvn-cc-panel-container input[type=\"radio\"]{\n	margin: 4px 0;\n}\n.mtvn-cc-panel-container a{\n	margin: 4px 0;\n	display: inline-block;\n}\n.edge-dialog {\n	text-align: center;\n	background: #000;\n	height: 100%;\n	width: 100%;\n	position: absolute;\n	top: 0;\n	left: 0;\n	background-position: center center;\n	background-size: cover;\n	background-repeat: no-repeat;\n	display: -webkit-box;\n	display: -webkit-flex;\n	display: -ms-flexbox;\n	display: -moz-box;\n	display: flex;\n	-webkit-box-pack: center;\n	-moz-box-pack: center;\n	-ms-box-pack: center;\n	-ms-flex-pack: center;\n	-webkit-justify-content: center;\n	-moz-justify-content: center;\n	justify-content: center;\n	-webkit-box-align: center;\n	-ms-box-align: center;\n	-moz-box-align: center;\n	-ms-flex-align: center;\n	-webkit-align-items: center;\n	-moz-align-items: center;\n	align-items: center;\n}\n\n.edge-dialog-default-image {\n	box-shadow: inset 0 -15em 15em -5em rgba(0,0,0,0.7);\n}\n\n.edge-dialog-default-image .edge-dialog-container {\n	margin-top: 25%;\n}\n\n.edge-dialog-container {\n	font-family: 'Open Sans', Arial, sans-serif;\n	color: #FFFFFF;\n	font-size: 14px;\n	width: 100%;\n	display: -webkit-box;\n	display: -webkit-flex;\n	display: -ms-flexbox;\n	display: -moz-box;\n	display: flex;\n	-webkit-box-pack: center;\n	-moz-box-pack: center;\n	-ms-box-pack: center;\n	-ms-flex-pack: center;\n	-webkit-justify-content: center;\n	-moz-justify-content: center;\n	justify-content: center;\n	-webkit-box-align: center;\n	-ms-box-align: center;\n	-moz-box-align: center;\n	-ms-flex-align: center;\n	-webkit-align-items: center;\n	-moz-align-items: center;\n	align-items: center;\n}\n\n.edge-dialog-error-icon {\n	width: 3em;\n	height: 3em;\n	background: url("+n(138)+") center center/contain no-repeat;\n}\n\n.edge-dialog-message-container {\n	margin-left: 0.5em;\n	max-width: 70%;\n	text-transform: uppercase;\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	user-select: none;\n	cursor: default;\n}\n.edge-dialog-qr-code {\n	position: absolute;\n	top: 10px;\n	left: 10px;\n	width: 65px;\n	height: 65px;\n}\n.edge-dialog-play-id {\n	font-size: 0.8em;\n	color: #999;\n	position: absolute;\n	right: 10px;\n	bottom: 10px;\n	text-shadow: 0 0 5px #000;\n}\n\n.edge-dialog-close {\n	text-decoration: none;\n	color: #888;\n	font-weight: bold;\n	text-align: right;\n	display: block;\n}\n.edge-dialog-close:hover {\n	color: white;\n}\n.edge-dialog-close:visited {\n	color: #888;\n}\n.edge-dialog-message a {\n	pointer-events: auto;\n	cursor: pointer;\n	text-decoration: underline;\n	text-transform: none;\n	color: white;\n	background-color: transparent;\n}\n\n.pjs .edge-cc-container {\n	position: absolute;\n	bottom: 15%;\n	font-size: 1.2em;\n	pointer-events: none;\n}\n\n.pjs[max-width~='479px'] .edge-cc-container {\n	font-size: .9em;\n}\n\n.pjs .edge-cc-container .edge-cc-tracks {\n	display: inline-block;\n}\n.pjs .edge-cc-container:empty,\n.pjs .edge-cc-container .edge-cc-tracks:empty {\n	background-color: rgba(0,0,0,0.0) !important;\n}\n\n.pjs .edge-cc-container.edge-cc-hidden {\n	display: none;\n}\n\n.pjs .edge-cc-container.edge-cc-default {\n	position: absolute;\n	left: 0;\n	width: 100%;\n	text-align: center;\n}\n\n\n.pjs .edge-cc-container .edge-cc-tracks {\n	padding: 0.25em;\n	line-height: normal;\n}\n.pjs .edge-cc-container .edge-cc-track-cue::before,\n.pjs .edge-cc-container .edge-cc-track-cue::after {\n	content: \"\\A0\"; /* non-breaking space is used instead of horizontal paddings */\n}\n\n.pjs .edge-608-container {\n	position: absolute;\n	pointer-events: none;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	text-align: center;\n}\n\n.pjs .edge-608-container.edge-608-hidden {\n	display: none;\n}\n\n.pjs .edge-608-container .edge-608-tracks {\n	width: 100%;\n	height:100%;\n	display: inline-block;\n	line-height: normal;\n}\n\n.pjs .edge-608-container .edge-608-tracks .ccrow {\n	position: absolute;\n	height: auto;\n	width: 100%;\n	text-align: left;\n}\n\n.pjs .edge-608-container .edge-608-tracks .ccrow span:not(:empty) {\n	padding: 0.1em;\n	position: absolute;\n}\n\n.pjs[min-width~='480px'] .edge-608-container .edge-608-tracks {\n	font-size: 1em;\n}\n\n.pjs[min-width~='768px'] .edge-608-container .edge-608-tracks {\n	font-size: 1.3em;\n}\n\n.pjs[min-width~='1024px'] .edge-608-container .edge-608-tracks {\n	font-size: 2em;\n}\n\n.pjs[max-height~='309px'] .edge-608-container .edge-608-tracks {\n	font-size: 0.75em;\n}\n\n.pjs[max-height~='229px'] .edge-608-container .edge-608-tracks {\n	font-size: 0.5em;\n}\n\n.pjs.edge-player .edge-share-modal {\n	display: -webkit-box;\n	display: -webkit-flex;\n	display: -moz-flex;\n	display: -ms-flexbox;\n	display: flex;\n	-webkit-box-pack: center;\n	-ms-flex-pack: center;\n	-webkit-justify-content: center;\n	-moz-justify-content: center;\n	justify-content: center;\n	-webkit-box-align: center;\n	-ms-flex-align: center;\n	-webkit-align-items: center;\n	-moz-align-items: center;\n	align-items: center;\n	position: absolute;\n	top: 0;\n	left: 0;\n	width: 100%;\n	height: 100%;\n	visibility: hidden;\n	pointer-events: none;\n	z-index: 2; /* needed to keep share modal over endslate controls: fix on endslate side and remove */\n}\n\n.pjs.edge-player .edge-share-modal.edge-share-modal-active-state {\n	visibility: visible;\n}\n\n.pjs.edge-player .edge-share-modal.edge-share-modal-active-state .edge-share-modal-dialog {\n	pointer-events: auto;\n}\n\n.pjs.edge-player .edge-share-modal-dialog {\n	width: 60%;\n	min-width: 250px;\n	max-width: 565px;\n	height: auto;\n	background-color: rgba(0, 0, 0, 0.8);\n	border-radius: 4px;\n	padding: 1.5em;\n}\n\n.pjs.edge-player .edge-share-modal-title {\n	margin-bottom: 2%;\n	color: #FFFFFF;\n	font-size: 14px;\n	font-weight: bold;\n	text-transform: uppercase;\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	user-select: none;\n}\n\n.pjs.edge-player .edge-share-modal-message-container {\n	padding: 0.7em;\n	overflow: hidden;\n	background-color: rgba(57, 57, 57, 0.8);\n}\n\n.pjs.edge-player .edge-share-modal-message {\n	resize: none;\n	border: none;\n	width: 100%;\n	height: auto;\n	background-color: transparent;\n	color: #FFFFFF;\n	outline: none;\n	line-height: 1.2em;\n	-webkit-appearance: none;\n}\n\n.pjs.edge-player .edge-share-modal-copy-btn {\n	display: inline-block;\n	position: relative;\n	background: #F1F1F1;\n	padding: 0.5em 1em;\n	color: black;\n	text-transform: uppercase;\n	border-radius: 4px;\n	margin-top: 0.7em;\n	cursor: pointer;\n	font-size: 12px;\n	font-weight: bold;\n	float:	right;\n	-webkit-user-select: none;\n	-moz-user-select: none;\n	-ms-user-select: none;\n	user-select: none;\n}\n\n.pjs.edge-player .edge-share-modal-copy-btn:hover {\n	background: #e6e6e6;\n}\n\n.pjs.edge-player .edge-share-modal-copy-btn:active {\n	box-shadow: inset 0 3px 5px rgba(0,0,0,.125);\n}\n\n.pjs.edge-player .edge-share-modal-tooltipped:before {\n	content: '';\n	width: 0;\n	height: 0;\n	position: absolute;\n	margin-top: 0.2em;\n	border-left: 0.5em solid transparent;\n	border-right: 0.5em solid transparent;\n	border-bottom: 0.5em solid rgba(57, 57, 57, 1);\n}\n\n.pjs.edge-player .edge-share-modal-tooltipped:after {\n	content: attr(data-tip);\n	font-size: 1.0em;\n	background: rgba(57, 57, 57, 1);\n	border-radius: 2px;\n	position: absolute;\n	padding: 0.7em 1em;\n	margin-top: 0.7em;\n	color: #fff;\n	text-align: center;\n	text-decoration: none;\n	white-space: pre;\n	pointer-events: none;\n}\n\n.pjs.edge-player .edge-share-modal-tooltipped:before, .pjs.edge-player .edge-share-modal-tooltipped:after {\n	top: 100%;\n	right: 50%;\n	-webkit-transform: translateX(50%);\n	-ms-transform: translateX(50%);\n	transform: translateX(50%);\n}\n\n.edge-endslate-container {\n	visibility: hidden;\n	position: absolute;\n	width: 100%;\n	height: 100%;\n	top: 0;\n	left: 0;\n	background-color: black;\n}\n.edge-endslate-active-state .edge-endslate-container {\n	visibility: visible;\n}\n.edge-endslate-none {\n	background: #000;\n	opacity: 0;\n}\n.edge-endslate-active-state .edge-endslate-none {\n	opacity: 1;\n	transition: opacity .3s ease-in;\n}\n\n.edge-interstitial {\n	width: 100%;\n	height: 100%;\n	background: black;\n	position: absolute;\n	opacity: 0;\n	transition: opacity .5s ease-in;\n	pointer-events: none;\n}\n\n.edge-interstitial-active-state .edge-interstitial {\n	opacity: 1;\n}\n\n.edge-ima-placeholder, .edge-learn-more-placeholder {\n	display: none; /* display none by default as it will be toggled by bento and gui */\n	position: absolute;\n}\n\n.edge-ima-placeholder > div:first-child,\n.edge-ima-placeholder iframe[src*='imasdk'] {\n	width: 100% !important;\n	height: 100% !important;\n}\n",""]);
},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(i[a]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),e.push(o))}},e}},function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9Ijc2cHgiIGhlaWdodD0iNzZweCIgdmlld0JveD0iMCAwIDc2IDc2IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCAzLjguMyAoMjk4MDIpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPgogICAgPHRpdGxlPkFydGJvYXJkIDE8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz48L2RlZnM+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iQXJ0Ym9hcmQtMSIgZmlsbD0iI0ZGMUUzQSI+CiAgICAgICAgICAgIDxwYXRoIGQ9Ik0zLDM4IEMzLDU3LjMyIDE4LjY4LDczIDM4LDczIEM1Ny4zMiw3MyA3Myw1Ny4zMiA3MywzOCBDNzMsMTguNjggNTcuMzIsMyAzOCwzIEMxOC42OCwzIDMsMTguNjggMywzOCBMMywzOCBaIE0zNC41LDQwLjA4ODggTDM0LjUsMjEuOTA5OCBDMzQuNSwyMS4xMzE0IDM1LjEyMTYsMjAuNSAzNS44OTg2LDIwLjUgTDQwLjEsMjAuNSBDNDAuODc0MiwyMC41IDQxLjUsMjEuMTI4NiA0MS41LDIxLjkwOTggTDQxLjUsNDAuMDg4OCBDNDEuNSw0MC44Njg2IDQwLjg3ODQsNDEuNSA0MC4xLDQxLjUgTDM1Ljg5ODYsNDEuNSBDMzUuMTI3Miw0MS41IDM0LjUsNDAuODcxNCAzNC41LDQwLjA4ODggTDM0LjUsNDAuMDg4OCBaIE0zNC41LDU0LjEwMTQgTDM0LjUsNDkuOSBDMzQuNSw0OS4xMjU4IDM1LjEyMTYsNDguNSAzNS44OTg2LDQ4LjUgTDQwLjEsNDguNSBDNDAuODc0Miw0OC41IDQxLjUsNDkuMTIxNiA0MS41LDQ5LjkgTDQxLjUsNTQuMTAxNCBDNDEuNSw1NC44NzI4IDQwLjg3ODQsNTUuNSA0MC4xLDU1LjUgTDM1Ljg5ODYsNTUuNSBDMzUuMTI3Miw1NS41IDM0LjUsNTQuODc5OCAzNC41LDU0LjEwMTQgTDM0LjUsNTQuMTAxNCBaIiBpZD0iQ2xpcC0yIj48L3BhdGg+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4="},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=f[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(d(i.parts[a],t))}else{for(var o=[],a=0;a<i.parts.length;a++)o.push(d(i.parts[a],t));f[i.id]={id:i.id,refs:1,parts:o}}}}function r(e){for(var t=[],n={},i=0;i<e.length;i++){var r=e[i],a=r[0],o=r[1],s=r[2],l=r[3],d={css:o,media:s,sourceMap:l};n[a]?n[a].parts.push(d):t.push(n[a]={id:a,parts:[d]})}return t}function a(e,t){var n=m(),i=E[E.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),E.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=E.indexOf(e);t>=0&&E.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",a(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",a(e,t),t}function d(e,t){var n,i,r;if(t.singleton){var a=y++;n=v||(v=s(t)),i=u.bind(null,n,a,!1),r=u.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=l(t),i=h.bind(null,n),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),i=c.bind(null,n),r=function(){o(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}function u(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=A(t,r);else{var a=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function c(e,t){var n=t.css,i=t.media;t.sourceMap;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function h(e,t){var n=t.css,i=(t.media,t.sourceMap);i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}var f={},p=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},g=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),m=p(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,E=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=g()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=r(e);return i(n,t),function(e){for(var a=[],o=0;o<n.length;o++){var s=n[o],l=f[s.id];l.refs--,a.push(l)}if(e){var d=r(e);i(d,t)}for(var o=0;o<a.length;o++){var l=a[o];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}}};var A=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()}]);
//# sourceMappingURL=./edgeplayer-2.5.3.min.js.map